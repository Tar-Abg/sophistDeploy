"use strict";(self.webpackChunkschool=self.webpackChunkschool||[]).push([[306],{9306:(Q,p,i)=>{i.r(p),i.d(p,{StudentSettingsModule:()=>O});var m=i(8583),u=i(4655),t=i(7716),c=i(7089);const g=function(){return["./"]},f=function(){return{exact:!0}},d=function(){return["subjects"]},h=function(){return["personalInformation"]},Z=function(){return["paymentMethod"]},S=function(){return["changePassword"]};let v=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-student-settings"]],decls:19,vars:12,consts:[[1,"settings-wrapper"],[1,"settings-wrapper-title","flex-container-justify-start"],["src","./assets/images/settings.svg","alt","settings","width","23","height","23"],[1,"flex-container-start","full-height-container"],[1,"user-setting-list"],["routerLinkActive","active",1,"user-setting-list__item","flex-container-justify-start",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","active",1,"user-setting-list__item","flex-container-justify-start",3,"routerLink"],[1,"user-setting-main-info"]],template:function(n,o){1&n&&(t._UZ(0,"app-header"),t.TgZ(1,"div",0),t.TgZ(2,"h2",1),t._uU(3," Profile settings "),t._UZ(4,"img",2),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"ul",4),t.TgZ(7,"li",5),t._uU(8,"Profile information "),t.qZA(),t.TgZ(9,"li",6),t._uU(10,"Subjects "),t.qZA(),t.TgZ(11,"li",6),t._uU(12,"Personal information "),t.qZA(),t.TgZ(13,"li",6),t._uU(14,"Payment method "),t.qZA(),t.TgZ(15,"li",6),t._uU(16,"Change password "),t.qZA(),t.qZA(),t.TgZ(17,"section",7),t._UZ(18,"router-outlet"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(7),t.Q6J("routerLink",t.DdM(6,g))("routerLinkActiveOptions",t.DdM(7,f)),t.xp6(2),t.Q6J("routerLink",t.DdM(8,d)),t.xp6(2),t.Q6J("routerLink",t.DdM(9,h)),t.xp6(2),t.Q6J("routerLink",t.DdM(10,Z)),t.xp6(2),t.Q6J("routerLink",t.DdM(11,S)))},directives:[c.G,u.Od,u.rH,u.lC],styles:[""]}),e})();var s=i(3679),A=i(5319),I=i(3328),U=i(429),T=i(7779),y=i(6275);function P(e,r){if(1&e&&t._UZ(0,"img",20),2&e){const n=t.oxw();t.Q6J("src",n.userImage,t.LSH)}}function b(e,r){1&e&&(t.TgZ(0,"span",21),t._uU(1,"This is a required field"),t.qZA())}let C=(()=>{class e{constructor(n,o,l,a,Y,k){this.storageService=n,this.fb=o,this.registrationService=l,this.settingsService=a,this.cd=Y,this.validationService=k,this.subscription=new A.w}ngOnInit(){this.initializeForm(),this.getWrapUpProfile()}getWrapUpProfile(){this.subscription.add(this.registrationService.getWrapUpProfile(this.storageService.getUserId()).subscribe(n=>{n&&(this.form.patchValue(n),this.userImage=n.photo)}))}selectFile(n){const o=new FileReader;n.target.files[0]&&(o.readAsDataURL(n.target.files[0]),o.onload=l=>{this.checkImageSizes(o.result)})}checkImageSizes(n){this.validationService.checkImageSizes(n).then(o=>{o?(this.userImage=o,this.isSmallSizeForImage=!1):this.isSmallSizeForImage=!0,this.cd.detectChanges()})}initializeForm(){this.form=this.fb.group({id:[null],userId:[this.storageService.getUserId()],photo:[null],wrapUp:[null,[s.kI.required,s.kI.minLength(50),s.kI.maxLength(2e3),s.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]]})}onSubmit(){this.form.valid?this.subscription.add(this.settingsService.updateProfileInformation(Object.assign(Object.assign({},this.form.value),{photo:this.userImage})).subscribe()):this.form.markAllAsTouched()}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(I.V),t.Y36(s.qu),t.Y36(U.c),t.Y36(T.g),t.Y36(t.sBO),t.Y36(y.R))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-profile-information"]],decls:29,vars:9,consts:[[3,"formGroup","ngSubmit"],[1,"user-sign-up-list","profile-wrapper"],[1,"user-sign-up-list__item"],[1,"form-item-label","upload-photo-title"],[1,"file-upload-wrapper"],[1,"upload-image-box"],[1,"image-upload-wrap"],["alt","Upload Photo",3,"src",4,"ngIf"],[1,"upload-photo-btn"],["type","file","accept","image/*",1,"file-upload-input","upload-for-settings",3,"change"],["src","assets/images/photo-camera%201.png","alt","Upload Photo","width","33","height","33"],[1,"upload-image-requirement"],[1,"form-item-notification"],[1,"user-sign-up-list__item","large-size"],[1,"form-item-label"],["for","wrapUp",1,"form-label","form-label--flex-container"],["id","wrapUp","type","text","rows","10","cols","10","placeholder","A short headline about yourself*","formControlName","wrapUp",1,"form-textarea"],["class","error-message",4,"ngIf"],[1,"flex-container-center"],["type","submit",1,"settings-form-button"],["alt","Upload Photo",3,"src"],[1,"error-message"]],template:function(n,o){if(1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(1,"ul",1),t.TgZ(2,"li",2),t.TgZ(3,"h3",3),t._uU(4,"Profile photo*"),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.YNc(8,P,1,1,"img",7),t.qZA(),t.TgZ(9,"button",8),t.TgZ(10,"input",9),t.NdJ("change",function(a){return o.selectFile(a)}),t.qZA(),t._UZ(11,"img",10),t.qZA(),t.qZA(),t.TgZ(12,"div",11),t.TgZ(13,"p",12),t._uU(14,"Minimum size 200 x 200 pixels."),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"li",13),t.TgZ(16,"h3",14),t._uU(17,"Wrap up your profile"),t.qZA(),t.TgZ(18,"label",15),t.TgZ(19,"textarea",16),t._uU(20," A short headline about yourself *\n                "),t.qZA(),t.qZA(),t.YNc(21,b,2,0,"span",17),t.TgZ(22,"p",12),t._uU(23,"Briefly describe what you need help with"),t.qZA(),t.TgZ(24,"p",12),t._uU(25,"Your free response must be between 50 and 2000 characters. "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",18),t.TgZ(27,"button",19),t._uU(28,"Update information"),t.qZA(),t.qZA(),t.qZA()),2&n){let l,a;t.Q6J("formGroup",o.form),t.xp6(7),t.ekj("image-uploaded",o.userImage),t.xp6(1),t.Q6J("ngIf",o.userImage),t.xp6(5),t.ekj("text-danger",o.isSmallSizeForImage),t.xp6(8),t.Q6J("ngIf",(null==(l=o.form.get("wrapUp"))||null==l.errors?null:l.errors.required)&&(null==(l=o.form.get("wrapUp"))?null:l.touched)),t.xp6(3),t.ekj("text-danger",((null==(a=o.form.get("wrapUp"))||null==a.errors?null:a.errors.minlength)||(null==(a=o.form.get("wrapUp"))||null==a.errors?null:a.errors.maxlength))&&(null==(a=o.form.get("wrapUp"))?null:a.touched))}},directives:[s._Y,s.JL,s.sg,m.O5,s.Fj,s.JJ,s.u],styles:[""]}),e})();var x=i(5127),q=i(1618),w=i(5067);let J=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-student-personal-information"]],decls:1,vars:0,template:function(n,o){1&n&&t._UZ(0,"app-personal-information")},directives:[w.i],styles:[""]}),e})();var L=i(2021);const M=[{path:"",component:v,children:[{path:"",component:C},{path:"subjects",component:x.h},{path:"personalInformation",component:J},{path:"paymentMethod",component:L.Z},{path:"changePassword",component:q.p}]}];let j=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.Bz.forChild(M)],u.Bz]}),e})();var F=i(2372),z=i(4466);let O=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,j,F.E,z.m,s.UX]]}),e})()}}]);