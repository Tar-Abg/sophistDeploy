"use strict";(self.webpackChunkschool=self.webpackChunkschool||[]).push([[592],{609:(L,I,E)=>{E.d(I,{Xt:()=>w,Te:()=>c});var g=E(4762),d=E(7716),R=E(3679),x=E(8583),v=E(9765);const D=["starMain"];var _;let c=_=class{constructor(){this.stars=[],this._readOnly=!1,this._totalStars=5,this.rate=new d.vpe,this.onStarsCountChange=new v.xQ,this.onStarsCountChange.subscribe(()=>{this.setStars(),this.generateRating(!0),this.applySizeAllStars(),this.applyColorStyleAllStars(!1),this.addEvents()}),this.onValueChange=new v.xQ,this.onValueChange.subscribe(()=>{this.generateRating(),this.applySizeAllStars()}),this.onCheckedColorChange=new v.xQ,this.onCheckedColorChange.subscribe(()=>{this.applyColorStyleAllStars(!0)}),this.onUnCheckedColorChange=new v.xQ,this.onUnCheckedColorChange.subscribe(()=>{this.applyColorStyleAllStars(!1)}),this.onSizeChange=new v.xQ,this.onSizeChange.subscribe(()=>{this.applySizeAllStars()}),this.onReadOnlyChange=new v.xQ,this.onReadOnlyChange.subscribe(()=>{this.readonly?this.makeReadOnly():this.makeEditable()})}get checkedcolor(){return this._checkedColor}get uncheckedcolor(){return this._unCheckedColor}get value(){return this._value}get size(){return this._size.concat(this._size.includes("px")?"":"px")}get readonly(){return"true"===String(this._readOnly)}get totalstars(){return this._totalStars}set checkedcolor(a){this._checkedColor=a,this._checkedColor&&this.onCheckedColorChange.next(this._checkedColor)}set uncheckedcolor(a){this._unCheckedColor=a,this._unCheckedColor&&this.onUnCheckedColorChange.next(this._unCheckedColor)}set value(a){this._value=a=a&&null!=a?a:0,this._value>=0&&this.onValueChange.next(this._value)}set size(a){this._size=a=a&&null!=a&&"0px"!=a?a:"24px",this.onSizeChange.next(this._size)}set readonly(a){this._readOnly=a,this.onReadOnlyChange.next(a)}set totalstars(a){this._totalStars=a<=0?5:Math.round(a),this.onStarsCountChange.next(this._totalStars)}makeEditable(){!this.mainElement||(this.mainElement.nativeElement.style.cursor="pointer",this.mainElement.nativeElement.title=this.value,this.stars.forEach(a=>{a.style.cursor="pointer",a.title=a.dataset.index}))}makeReadOnly(){!this.mainElement||(this.mainElement.nativeElement.style.cursor="default",this.mainElement.nativeElement.title=this.value,this.stars.forEach(a=>{a.style.cursor="default",a.title=""}))}addEvents(){!this.mainElement||(this.mainElement.nativeElement.addEventListener("mouseleave",this.offStar.bind(this)),this.mainElement.nativeElement.style.cursor="pointer",this.mainElement.nativeElement.title=this.value,this.stars.forEach(a=>{a.addEventListener("click",this.onRate.bind(this)),a.addEventListener("mouseenter",this.onStar.bind(this)),a.style.cursor="pointer",a.title=a.dataset.index}))}ngAfterViewInit(){}onRate(a){if(this.readonly)return;let y=this.value;this.value=parseInt(a.srcElement.dataset.index),this.rate.emit({oldValue:y,newValue:this.value,starRating:this})}onStar(a){if(this.readonly)return;let y=parseInt(a.srcElement.dataset.index);for(let u=0;u<y;u++)this.stars[u].className="",this.addDefaultClass(this.stars[u]),this.addCheckedStarClass(this.stars[u]);for(let u=y;u<this.stars.length;u++)this.stars[u].className="",this.addDefaultClass(this.stars[u])}offStar(a){this.generateRating()}addDefaultClass(a){a.classList.add(_.CLS_DEFAULT_STAR)}addCheckedStarClass(a){a.classList.add(_.CLS_CHECKED_STAR)}addHalfStarClass(a){a.classList.add(_.CLS_HALF_STAR)}setStars(){if(!this.mainElement)return;let a=this.mainElement.nativeElement,h=[...Array(Number(this.totalstars)).keys()];this.stars.length=0,a.innerHTML="",h.forEach(y=>{let u=document.createElement("span");u.dataset.index=(y+1).toString(),u.title=u.dataset.index,a.appendChild(u),this.stars.push(u)})}applySizeAllStars(){this._size&&(0==this.stars.length&&this.setStars(),this.stars.forEach(a=>{let h=this.size.match(/\d+/)[0],y=10*parseInt(h)/24,u=0-20*parseInt(h)/24;a.style.setProperty(_.VAR_SIZE,this.size),a.classList.contains(_.CLS_HALF_STAR)&&(a.style.setProperty(_.VAR_HALF_WIDTH,`${y}px`),a.style.setProperty(_.VAR_HALF_MARGIN,`${u}px`))}))}applyColorStyleAllStars(a){0==this.stars.length&&this.setStars(),this.stars.forEach(h=>{a?this.applyCheckedColorStyle(h):this.applyUnCheckedColorStyle(h)})}applyColorStyle(a){this.applyCheckedColorStyle(a),this.applyUnCheckedColorStyle(a)}applyCheckedColorStyle(a){a.style.setProperty(_.VAR_CHECKED_COLOR,this.checkedcolor)}applyUnCheckedColorStyle(a){a.style.setProperty(_.VAR_UNCHECKED_COLOR,this.uncheckedcolor)}generateRating(a=!1){if(!this.mainElement||this.readonly&&!a)return;0==this.stars.length&&this.setStars(),this.mainElement.nativeElement.title=this.value;let h=!!(Number.parseFloat(this.value.toString())%1).toString().substring(3,2),y=1;this.stars.forEach(u=>{u.className="",this.applyColorStyle(u),this.addDefaultClass(u),this.value>=y?this.addCheckedStarClass(u):h&&(this.addHalfStarClass(u),h=!1),y++})}};c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=d.Xpm({type:c,selectors:[["star-rating"]],viewQuery:function(a,h){if(1&a&&d.Gf(D,7),2&a){let y;d.iGM(y=d.CRH())&&(h.mainElement=y.first)}},inputs:{checkedcolor:"checkedcolor",uncheckedcolor:"uncheckedcolor",value:"value",size:"size",readonly:"readonly",totalstars:"totalstars"},outputs:{rate:"rate"},decls:2,vars:0,consts:[["starMain",""]],template:function(a,h){1&a&&d._UZ(0,"div",null,0)},styles:[":root{--checkedColor:gold;--unCheckedColor:gray;--size:24px;--halfWidth:10px;--halfMargin:-20px}.star{cursor:pointer;color:var(--unCheckedColor);font-size:var(--size);width:var(--size);display:inline-block}.star:last-child{margin-right:0}.star:before{content:'\\2605'}.star.on{color:var(--checkedColor)}.star.half:after{content:'\\2605';color:var(--checkedColor);position:absolute;margin-left:var(--halfMargin);width:var(--halfWidth);overflow:hidden}"],encapsulation:3}),c.VAR_CHECKED_COLOR="--checkedColor",c.VAR_UNCHECKED_COLOR="--unCheckedColor",c.VAR_SIZE="--size",c.VAR_HALF_WIDTH="--halfWidth",c.VAR_HALF_MARGIN="--halfMargin",c.CLS_CHECKED_STAR="on",c.CLS_DEFAULT_STAR="star",c.CLS_HALF_STAR="half",c.INP_CHECKED_COLOR="checkedcolor",c.INP_UNCHECKED_COLOR="uncheckedcolor",c.INP_VALUE="value",c.INP_SIZE="size",c.INP_READONLY="readonly",c.INP_TOTALSTARS="totalstars",(0,g.gn)([(0,d.i9L)("starMain",{static:!0})],c.prototype,"mainElement",void 0),(0,g.gn)([(0,d.r_U)()],c.prototype,"rate",void 0),(0,g.gn)([(0,d.IIB)(_.INP_CHECKED_COLOR)],c.prototype,"checkedcolor",null),(0,g.gn)([(0,d.IIB)(_.INP_UNCHECKED_COLOR)],c.prototype,"uncheckedcolor",null),(0,g.gn)([(0,d.IIB)(_.INP_VALUE)],c.prototype,"value",null),(0,g.gn)([(0,d.IIB)(_.INP_SIZE)],c.prototype,"size",null),(0,g.gn)([(0,d.IIB)(_.INP_READONLY)],c.prototype,"readonly",null),(0,g.gn)([(0,d.IIB)(_.INP_TOTALSTARS)],c.prototype,"totalstars",null);let w=(()=>{let p=class{ngDoBootstrap(){}};return p.\u0275fac=function(h){return new(h||p)},p.\u0275mod=d.oAB({type:p}),p.\u0275inj=d.cJS({imports:[[R.u5,x.ez]]}),p})()},4762:(L,I,E)=>{function v(t,e,n,r){var s,i=arguments.length,o=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var f=t.length-1;f>=0;f--)(s=t[f])&&(o=(i<3?s(o):i>3?s(e,n,o):s(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function _(t,e,n,r){return new(n||(n=Promise))(function(o,s){function f(m){try{l(r.next(m))}catch(b){s(b)}}function S(m){try{l(r.throw(m))}catch(b){s(b)}}function l(m){m.done?o(m.value):function(o){return o instanceof n?o:new n(function(s){s(o)})}(m.value).then(f,S)}l((r=r.apply(t,e||[])).next())})}E.d(I,{gn:()=>v,mG:()=>_})}}]);