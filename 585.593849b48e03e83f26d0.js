"use strict";(self.webpackChunkschool=self.webpackChunkschool||[]).push([[585],{1618:(J,C,a)=>{a.d(C,{p:()=>N});var i=a(5319),p=a(3679),e=a(7716),r=a(3328),A=a(7779),v=a(6275),w=a(8583);function h(u,_){1&u&&(e.TgZ(0,"span",11),e._uU(1,"The Current Password field is required."),e.qZA())}function I(u,_){1&u&&(e.TgZ(0,"span",11),e._uU(1,"Password is incorrect"),e.qZA())}function y(u,_){1&u&&(e.TgZ(0,"span",11),e._uU(1,"The New Password field is required."),e.qZA())}function P(u,_){1&u&&(e.TgZ(0,"span",11),e._uU(1,"Passwords are not the same"),e.qZA())}function q(u,_){1&u&&(e.TgZ(0,"span",11),e._uU(1,"The Confirm New Password field is required."),e.qZA())}let N=(()=>{class u{constructor(s,t,l,c){this.storageService=s,this.fb=t,this.settingsService=l,this.validationService=c,this.subscription=new i.w}ngOnInit(){this.initializeForm(),this.subscribeOnCurrentPasswordChange()}initializeForm(){this.form=this.fb.group({userId:[this.storageService.getUserId()],currentPassword:[null,[p.kI.required]],password:[null,[p.kI.required]],rePassword:[null,[p.kI.required]]},{validators:this.validationService.checkPasswords})}onSubmit(){if(this.wrongPassword=!1,this.form.valid){delete this.form.value.rePassword;const s=this.form.value.password;delete this.form.value.password,this.subscription.add(this.settingsService.updatePassword(Object.assign(Object.assign({},this.form.value),{newPassword:s})).subscribe(()=>{var t;this.form.reset(),null===(t=this.form.get("userId"))||void 0===t||t.setValue(this.storageService.getUserId())},t=>{"Wrong password"===t.error.type&&(this.wrongPassword=!0)}))}else this.form.markAllAsTouched()}subscribeOnCurrentPasswordChange(){var s;this.subscription.add(null===(s=this.form.get("currentPassword"))||void 0===s?void 0:s.valueChanges.subscribe(()=>this.wrongPassword=!1))}ngOnDestroy(){this.subscription.unsubscribe()}}return u.\u0275fac=function(s){return new(s||u)(e.Y36(r.V),e.Y36(p.qu),e.Y36(A.g),e.Y36(v.R))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-change-password"]],decls:16,vars:6,consts:[[1,"tutor-settings-nested-page"],[1,"tutor-settings-nested-page__form","tutor-settings-nested-page__form--fixed--width",3,"formGroup","ngSubmit"],[1,"setting-form-input-wrapper"],["for","current-password",1,"form-label"],["id","current-password","name","current-password","required","","autocomplete","current-password","type","password","placeholder","Current Password*","formControlName","currentPassword",1,"form-input"],["class","error-message",4,"ngIf"],["for","new-password",1,"form-label"],["id","new-password","name","new-password","required","","autocomplete","current-password","type","password","placeholder","New Password*","formControlName","password",1,"form-input"],["for","confirm-new-password",1,"form-label"],["id","confirm-new-password","name","confirm-new-password","required","","autocomplete","current-password","type","password","placeholder","Confirm New Password*","formControlName","rePassword",1,"form-input"],[1,"settings-form-button"],[1,"error-message"]],template:function(s,t){if(1&s&&(e.TgZ(0,"div",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(2,"div",2),e.TgZ(3,"label",3),e._UZ(4,"input",4),e.YNc(5,h,2,0,"span",5),e.YNc(6,I,2,0,"span",5),e.qZA(),e.TgZ(7,"label",6),e._UZ(8,"input",7),e.YNc(9,y,2,0,"span",5),e.qZA(),e.TgZ(10,"label",8),e._UZ(11,"input",9),e.YNc(12,P,2,0,"span",5),e.YNc(13,q,2,0,"span",5),e.qZA(),e.qZA(),e.TgZ(14,"button",10),e._uU(15,"Change password"),e.qZA(),e.qZA(),e.qZA()),2&s){let l,c,f,b;e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("ngIf",(null==(l=t.form.get("currentPassword"))||null==l.errors?null:l.errors.required)&&(null==(l=t.form.get("currentPassword"))?null:l.touched)),e.xp6(1),e.Q6J("ngIf",t.wrongPassword),e.xp6(3),e.Q6J("ngIf",(null==(c=t.form.get("password"))||null==c.errors?null:c.errors.required)&&(null==(c=t.form.get("password"))?null:c.touched)),e.xp6(3),e.Q6J("ngIf",(null==t.form||null==t.form.errors?null:t.form.errors.notSame)&&(null==(f=t.form.get("rePassword"))?null:f.touched)&&!(null!=(f=t.form.get("rePassword"))&&null!=f.errors&&f.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==(b=t.form.get("rePassword"))||null==b.errors?null:b.errors.required)&&(null==(b=t.form.get("rePassword"))?null:b.touched))}},directives:[p._Y,p.JL,p.sg,p.Fj,p.Q7,p.JJ,p.u,w.O5],styles:[""]}),u})()},1700:(J,C,a)=>{a.d(C,{i:()=>Y});var i=a(3679),p=a(5319),e=a(7716),r=a(3328),A=a(6332),v=a(7779),w=a(6275),h=a(8583),I=a(9092),y=a(825);function P(n,g){1&n&&(e.TgZ(0,"span",11),e._uU(1,"You must enter your current Sophist password."),e.qZA())}function q(n,g){if(1&n&&(e.TgZ(0,"span",11),e._uU(1),e.qZA()),2&n){const m=e.oxw();e.xp6(1),e.Oqu(m.errorMessage)}}let N=(()=>{class n{constructor(m,o,d){this.fb=m,this.settingService=o,this.messageService=d,this.close=new e.vpe,this.updated=new e.vpe,this.subscription=new p.w}ngOnInit(){this.form=this.fb.group({password:[null,[i.kI.required]]}),this.initializeSubscriptions()}initializeSubscriptions(){this.subscription.add(this.form.valueChanges.subscribe(()=>this.errorMessage=""))}onConfirm(){this.errorMessage="",this.form.valid?this.updatePersonalInformation():this.form.markAllAsTouched()}updatePersonalInformation(){this.subscription.add(this.settingService.updatePersonalInformation(this.body,this.form.value.password).subscribe(m=>{this.updated.emit(),m.emailChangeRequest&&this.messageService.setNewMessage(m.emailChangeRequest),this.close.emit()},m=>{this.errorMessage=m.error.title}))}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(m){return new(m||n)(e.Y36(i.qu),e.Y36(v.g),e.Y36(y.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-password"]],inputs:{body:"body"},outputs:{close:"close",updated:"updated"},decls:15,vars:3,consts:[[1,"confirm-dialog-wrapper","flex-container-center"],[1,"confirm-dialog-content"],[1,"flex-container-center","confirm-header"],[1,"confirm-content-title"],[1,"material-icons",3,"click"],[3,"formGroup","ngSubmit"],["for","password",1,"form-label","confirm-content-label"],["type","password","formControlName","password","placeholder","Sophist password*","id","password",1,"form-input"],["class","error-message",4,"ngIf"],[1,"flex-container-center"],["type","submit",1,"confirm-modal-btn"],[1,"error-message"]],template:function(m,o){if(1&m&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h3",3),e._uU(4,"Please enter your password"),e.qZA(),e.TgZ(5,"span",4),e.NdJ("click",function(){return o.close.emit()}),e._uU(6,"close"),e.qZA(),e.qZA(),e.TgZ(7,"form",5),e.NdJ("ngSubmit",function(){return o.onConfirm()}),e.TgZ(8,"label",6),e._UZ(9,"input",7),e.YNc(10,P,2,0,"span",8),e.YNc(11,q,2,1,"span",8),e.qZA(),e.TgZ(12,"div",9),e.TgZ(13,"button",10),e._uU(14,"confirm"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&m){let d;e.xp6(7),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("ngIf",(null==(d=o.form.get("password"))||null==d.errors?null:d.errors.required)&&(null==(d=o.form.get("password"))?null:d.touched)),e.xp6(1),e.Q6J("ngIf",o.errorMessage)}},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,h.O5],styles:['.confirm-dialog-wrapper[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;background-color:#0006;z-index:999}.confirm-dialog-content[_ngcontent-%COMP%]{width:647px;padding:27px 40px 40px;background:white;border:1px solid #efe699;box-sizing:border-box;border-radius:25px}.confirm-header[_ngcontent-%COMP%]{justify-content:space-between}.confirm-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.confirm-content-title[_ngcontent-%COMP%]{flex:1;margin:0;font:300 normal 1.125rem "Segoe UI",sans-serif;line-height:24px;text-align:center;color:#000}.confirm-content-label[_ngcontent-%COMP%]{margin:25px 0 40px}.confirm-content-label[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{width:468px;margin:0 auto}.confirm-modal-btn[_ngcontent-%COMP%]{margin:0 auto;width:163px;height:43px;border:1px solid #26BC00;box-sizing:border-box;border-radius:10px;font:700 normal 1rem "Segoe UI",sans-serif;line-height:21px;letter-spacing:.08em;text-transform:capitalize;color:#26bc00;background-color:unset}']}),n})();function u(n,g){1&n&&(e.TgZ(0,"span",36),e._uU(1,"This is a required field"),e.qZA())}function _(n,g){1&n&&(e.TgZ(0,"span",36),e._uU(1,"Please provide a valid email address"),e.qZA())}function s(n,g){1&n&&(e.TgZ(0,"span",36),e._uU(1,"This is a required field"),e.qZA())}function t(n,g){1&n&&(e.TgZ(0,"span",36),e._uU(1,"This is a required field"),e.qZA())}function l(n,g){1&n&&(e.TgZ(0,"span",37),e._uU(1,"This is a required field "),e.qZA())}function c(n,g){1&n&&(e.TgZ(0,"span",36),e._uU(1,"This is a required field"),e.qZA())}function f(n,g){1&n&&(e.TgZ(0,"span",37),e._uU(1," This is a required field"),e.qZA())}function b(n,g){1&n&&(e.TgZ(0,"span",37),e._uU(1,"This is a required field"),e.qZA())}function j(n,g){1&n&&(e.TgZ(0,"span",37),e._uU(1,"This is a required field"),e.qZA())}function k(n,g){if(1&n){const m=e.EpF();e.TgZ(0,"app-confirm-password",38),e.NdJ("close",function(){return e.CHM(m),e.oxw().isOpenPasswordModal=!1})("updated",function(){return e.CHM(m),e.oxw().form.disable()}),e.qZA()}if(2&n){const m=e.oxw();e.Q6J("body",m.form.value)}}let Y=(()=>{class n{constructor(m,o,d,Z,T){this.fb=m,this.storageService=o,this.infoService=d,this.settingService=Z,this.validationService=T,this.subscription=new p.w}ngOnInit(){this.formInitialization(),this.countries$=this.infoService.getCountries(),this.timeZones$=this.infoService.getTimeZones(),this.getPersonalInformation()}formInitialization(){this.form=this.fb.group({id:[null],userId:[this.storageService.getUserId()],mobileCode:[null],mobile:[null,[i.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],userName:[null,[i.kI.required,i.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],preferredTimeZone:[null,[i.kI.required]],email:[null,[i.kI.required,i.kI.pattern(this.validationService.emailPattern),i.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],userAddress:this.fb.group({countryId:[null,[i.kI.required]],city:[null,[i.kI.required,i.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],streetNumber:[null,[i.kI.required,i.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],streetName:[null,[i.kI.required,i.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],zipCode:[null,[i.kI.required,i.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],tutorBasicInformationId:[null]})}),this.form.disable()}get userAddress(){return this.form.get("userAddress")}onSubmit(){this.form.valid?this.isOpenPasswordModal=!0:this.form.markAllAsTouched()}getPersonalInformation(){this.storageService.getUserId()&&this.subscription.add(this.settingService.getPersonalInformation(this.storageService.getUserId()).subscribe(m=>this.form.patchValue(m)))}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(m){return new(m||n)(e.Y36(i.qu),e.Y36(r.V),e.Y36(A.M),e.Y36(v.g),e.Y36(w.R))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-personal-information"]],decls:89,vars:30,consts:[[3,"formGroup"],[1,"d-flex","personal-info-wrapper","wrapper-for-contact"],[1,"flex-item-for-info","address-form"],[1,"form-item-with-notification"],[1,"form-item-label"],["for","email",1,"form-label"],["id","email","autocomplete","username","type","email","placeholder","","formControlName","email",1,"form-input"],["class","error-message",4,"ngIf"],[1,"form-item-notification"],[1,"d-flex","position-relative","phone-number-wrapper"],[1,"form-label","phone-number-label","form-label--min-width","w-25","mobile-code"],["formControlName","mobileCode",3,"disable","list","label","keyName"],["for","phone-number",1,"form-label","phone-number-label","phone-number-label-input"],["id","phone-number","autocomplete","phone-number","type","tel","placeholder","Phone number*","formControlName","mobile",1,"form-input"],[1,"d-flex","position-relative"],["for","user-name",1,"form-label"],["id","user-name","type","text","placeholder","User name*","formControlName","userName",1,"form-input"],[1,"p-relative","form-label"],["formControlName","preferredTimeZone",3,"disable","label","list","keyName"],["formGroupName","userAddress",1,"flex-item-for-info"],[1,"address-form","address-form"],["for","country",1,"form-label"],["id","country","formControlName","countryId",3,"label","keyName","list","disable"],["class","error-message block",4,"ngIf"],["for","city",1,"form-label"],["id","city","type","text","placeholder","City*","formControlName","city",1,"form-input"],["for","streetNumber",1,"form-label"],["id","streetNumber","autocomplete","streetNumber","type","text","placeholder","Street Number*","formControlName","streetNumber",1,"form-input"],["for","streetName",1,"form-label"],["id","streetName","autocomplete","streetName","type","text","placeholder","Street Name*","formControlName","streetName",1,"form-input"],["for","zipCode",1,"form-label"],["id","zipCode","autocomplete","zipCode","placeholder","Zip Code*","formControlName","zipCode",1,"form-input"],[1,"flex-container-center","grid-gap-for-buttons"],[1,"settings-form-button","settings-form-button__with-border","button-border--blue",3,"click"],[1,"settings-form-button",3,"disabled","click"],[3,"body","close","updated",4,"ngIf"],[1,"error-message"],[1,"error-message","block"],[3,"body","close","updated"]],template:function(m,o){if(1&m&&(e.TgZ(0,"form",0),e.TgZ(1,"div",1),e.TgZ(2,"ul",2),e.TgZ(3,"li",3),e.TgZ(4,"h3",4),e._uU(5,"Email Address*"),e.qZA(),e.TgZ(6,"label",5),e._UZ(7,"input",6),e.YNc(8,u,2,0,"span",7),e.YNc(9,_,2,0,"span",7),e.TgZ(10,"span",8),e._uU(11,"Not visible on the public profile"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"li",3),e.TgZ(13,"h3",4),e._uU(14,"Mobile phone"),e.qZA(),e.TgZ(15,"div",9),e.TgZ(16,"div",10),e._UZ(17,"app-select",11),e.ALo(18,"async"),e.qZA(),e.TgZ(19,"label",12),e._UZ(20,"input",13),e.qZA(),e.TgZ(21,"span",8),e._uU(22,"Not visible on the public profile"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"li",3),e.TgZ(24,"h3",4),e._uU(25,"User Name*"),e.qZA(),e.TgZ(26,"div",14),e.TgZ(27,"label",15),e._UZ(28,"input",16),e.YNc(29,s,2,0,"span",7),e.qZA(),e.TgZ(30,"span",8),e._uU(31,"Visible on the public profile"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"li",3),e.TgZ(33,"h3",4),e._uU(34,"Preferred Time Zone*"),e.qZA(),e.TgZ(35,"div",14),e.TgZ(36,"div",17),e._UZ(37,"app-select",18),e.ALo(38,"async"),e.YNc(39,t,2,0,"span",7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",19),e.TgZ(41,"ul",20),e.TgZ(42,"li",3),e.TgZ(43,"h3",4),e._uU(44,"Country*"),e.qZA(),e.TgZ(45,"label",21),e._UZ(46,"app-select",22),e.ALo(47,"async"),e.TgZ(48,"span",8),e._uU(49,"Visible on the public profile"),e.qZA(),e.YNc(50,l,2,0,"span",23),e.qZA(),e.qZA(),e.TgZ(51,"li",3),e.TgZ(52,"h3",4),e._uU(53,"City*"),e.qZA(),e.TgZ(54,"label",24),e._UZ(55,"input",25),e.TgZ(56,"span",8),e._uU(57,"Visible on the public profile"),e.qZA(),e.YNc(58,c,2,0,"span",7),e.qZA(),e.qZA(),e.TgZ(59,"li",3),e.TgZ(60,"h3",4),e._uU(61,"Street Number*"),e.qZA(),e.TgZ(62,"label",26),e._UZ(63,"input",27),e.TgZ(64,"span",8),e._uU(65,"Not visible on the public profile"),e.qZA(),e.YNc(66,f,2,0,"span",23),e.qZA(),e.qZA(),e.TgZ(67,"li",3),e.TgZ(68,"h3",4),e._uU(69,"Street Name*"),e.qZA(),e.TgZ(70,"label",28),e._UZ(71,"input",29),e.TgZ(72,"span",8),e._uU(73,"Not visible on the public profile"),e.qZA(),e.YNc(74,b,2,0,"span",23),e.qZA(),e.qZA(),e.TgZ(75,"li",3),e.TgZ(76,"h3",4),e._uU(77,"Zip Code*"),e.qZA(),e.TgZ(78,"label",30),e._UZ(79,"input",31),e.TgZ(80,"span",8),e._uU(81,"Not visible on the public profile"),e.qZA(),e.YNc(82,j,2,0,"span",23),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(83,"div",32),e.TgZ(84,"button",33),e.NdJ("click",function(){return o.form.enable()}),e._uU(85," Edit "),e.qZA(),e.TgZ(86,"button",34),e.NdJ("click",function(){return o.onSubmit()}),e._uU(87,"Update Information"),e.qZA(),e.qZA(),e.YNc(88,k,1,1,"app-confirm-password",35)),2&m){let d,Z,T,E,S,U,x,M,O;e.Q6J("formGroup",o.form),e.xp6(8),e.Q6J("ngIf",(null==(d=o.form.get("email"))||null==d.errors?null:d.errors.required)&&(null==(d=o.form.get("email"))?null:d.touched)),e.xp6(1),e.Q6J("ngIf",(null==(Z=o.form.get("email"))||null==Z.errors?null:Z.errors.pattern)&&(null==(Z=o.form.get("email"))?null:Z.touched)),e.xp6(8),e.Q6J("disable",o.form.disabled)("list",e.lcZ(18,24,o.countries$))("label","+374")("keyName","numCodeForView"),e.xp6(12),e.Q6J("ngIf",(null==(T=o.form.get("userName"))?null:T.errors)&&(null==(T=o.form.get("userName"))?null:T.touched)),e.xp6(8),e.Q6J("disable",o.form.disabled)("label","time zone*")("list",e.lcZ(38,26,o.timeZones$))("keyName","displayName"),e.xp6(2),e.Q6J("ngIf",(null==(E=o.form.get("preferredTimeZone"))?null:E.errors)&&(null==(E=o.form.get("preferredTimeZone"))?null:E.touched)),e.xp6(7),e.Q6J("label","country*")("keyName","nameLowerCase")("list",e.lcZ(47,28,o.countries$))("disable",o.form.disabled),e.xp6(4),e.Q6J("ngIf",(null==(S=o.userAddress.get("countryId"))||null==S.errors?null:S.errors.required)&&(null==(S=o.userAddress.get("countryId"))?null:S.touched)),e.xp6(8),e.Q6J("ngIf",(null==(U=o.userAddress.get("city"))||null==U.errors?null:U.errors.required)&&(null==(U=o.userAddress.get("city"))?null:U.touched)),e.xp6(8),e.Q6J("ngIf",(null==(x=o.userAddress.get("streetNumber"))||null==x.errors?null:x.errors.required)&&(null==(x=o.userAddress.get("streetNumber"))?null:x.touched)),e.xp6(8),e.Q6J("ngIf",(null==(M=o.userAddress.get("streetName"))||null==M.errors?null:M.errors.required)&&(null==(M=o.userAddress.get("streetName"))?null:M.touched)),e.xp6(8),e.Q6J("ngIf",(null==(O=o.userAddress.get("zipCode"))||null==O.errors?null:O.errors.required)&&(null==(O=o.userAddress.get("zipCode"))?null:O.touched)),e.xp6(4),e.Q6J("disabled",o.form.disabled),e.xp6(2),e.Q6J("ngIf",o.isOpenPasswordModal)}},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,h.O5,I.H,i.x0,N],pipes:[h.Ov],styles:[""]}),n})()},5127:(J,C,a)=>{a.d(C,{h:()=>N});var i=a(5319),p=a(3679),e=a(8307),r=a(7716),A=a(3328),v=a(6332),w=a(7779),h=a(8583),I=a(9092);function y(u,_){if(1&u){const s=r.EpF();r.TgZ(0,"div",14),r.TgZ(1,"img",15),r.NdJ("click",function(){r.CHM(s);const l=r.oxw().$implicit;return r.oxw().removeForm(l)}),r.qZA(),r.qZA()}}function P(u,_){if(1&u){const s=r.EpF();r.TgZ(0,"i",16),r.NdJ("click",function(){return r.CHM(s),r.oxw(2).addNewForm()}),r.qZA()}}function q(u,_){if(1&u){const s=r.EpF();r.ynx(0,5),r.TgZ(1,"div",6),r.TgZ(2,"div",7),r.TgZ(3,"app-select",8),r.NdJ("ngModelChange",function(l){const f=r.CHM(s).index;return r.oxw().categoryChange(l,f)}),r.ALo(4,"async"),r.qZA(),r.qZA(),r.TgZ(5,"div",7),r.TgZ(6,"app-select",9),r.NdJ("ngModelChange",function(l){const f=r.CHM(s).index,b=r.oxw();return b.subjectChange(l,f,b.formArray.controls[f])}),r.ALo(7,"async"),r.qZA(),r.qZA(),r.TgZ(8,"div",7),r._UZ(9,"app-select",10),r.ALo(10,"async"),r.ALo(11,"async"),r.qZA(),r.TgZ(12,"div",11),r.YNc(13,y,2,0,"div",12),r.YNc(14,P,1,0,"i",13),r.qZA(),r.qZA(),r.BQk()}if(2&u){const s=_.index,t=r.oxw();let l;r.xp6(1),r.Q6J("formGroupName",s),r.xp6(2),r.Q6J("label","Category*")("keyName","categoryName")("list",r.lcZ(4,13,t.categories$)),r.xp6(3),r.Q6J("label","Subject*")("keyName","subjectName")("list",r.lcZ(7,15,null==t.observables[s]?null:t.observables[s].subjects$)),r.xp6(3),r.Q6J("label","Level*")("list",r.lcZ(10,17,null==t.observables[s]?null:t.observables[s].levels$))("keyName","level")("disable",!(null!=(l=r.lcZ(11,19,null==t.observables[s]?null:t.observables[s].levels$))&&l.length)),r.xp6(4),r.Q6J("ngIf",s>0),r.xp6(1),r.Q6J("ngIf",s===t.formArray.controls.length-1)}}let N=(()=>{class u{constructor(s,t,l,c){this.fb=s,this.storageService=t,this.infoService=l,this.settingService=c,this.subscription=new i.w,this.observables=[{subjects$:null,levels$:null}]}ngOnInit(){this.formInitialization(),this.categories$=this.infoService.getCategories(),this.getTutorSubjects()}formInitialization(){this.form=this.fb.group({formArray:this.fb.array([this.createNewForm()])})}createNewForm(){return this.fb.group({levelId:[null],subjectId:[null],categoryId:[null],userId:[this.storageService.getUserId()],userType:[this.storageService.getUserType()],id:[null]})}get formArray(){return this.form.get("formArray")}addNewForm(){const s=this.createNewForm();s.valueChanges.subscribe(()=>this.formArray.updateValueAndValidity()),this.formArray.controls.push(s),this.formArray.updateValueAndValidity()}removeForm(s){this.formArray.controls=this.formArray.controls.filter(t=>t!==s),this.formArray.updateValueAndValidity()}onSubmit(){this.form.valid&&this.updateTutorSubjects()}updateTutorSubjects(){1===this.storageService.getUserType()?this.subscription.add(this.settingService.updateTutorSubjects(this.formArray.value).subscribe()):this.subscription.add(this.settingService.updateStudentSubjects(this.formArray.value).subscribe())}patchTutorSubjects(s){s.length&&(this.formArray.controls=[],this.observables=[],s.forEach(t=>{var l,c;const f=this.createNewForm();f.patchValue(t),null===(l=this.formArray)||void 0===l||l.controls.push(f),this.observables[(null===(c=this.formArray)||void 0===c?void 0:c.controls.length)-1]={subjects$:this.infoService.getSubjectsByCategoryId(t.categoryId),levels$:this.infoService.getLevelsBySubjectId(t.subjectId)}}),this.formArray.updateValueAndValidity())}getTutorSubjects(){1===this.storageService.getUserType()?this.subscription.add(this.settingService.getTutorSubjects(this.storageService.getUserId()).subscribe(s=>{this.patchTutorSubjects(s)})):this.subscription.add(this.settingService.getStudentSubjects(this.storageService.getUserId()).subscribe(s=>{this.patchTutorSubjects(s)}))}categoryChange(s,t){this.observables[t]||(this.observables[t]={subjects$:null,levels$:null}),this.observables[t].subjects$=this.infoService.getSubjectsByCategoryId(s)}subjectChange(s,t,l){this.observables[t].levels$=this.infoService.getLevelsBySubjectId(s).pipe((0,e.b)(c=>{var f,b;c.length?(null===(f=l.get("levelId"))||void 0===f||f.setValidators(p.kI.required),l.get("levelId").updateValueAndValidity()):(null===(b=l.get("levelId"))||void 0===b||b.removeValidators(p.kI.required),l.get("levelId").updateValueAndValidity()),this.form.updateValueAndValidity()}))}ngOnDestroy(){this.subscription.unsubscribe()}}return u.\u0275fac=function(s){return new(s||u)(r.Y36(p.qu),r.Y36(A.V),r.Y36(v.M),r.Y36(w.g))},u.\u0275cmp=r.Xpm({type:u,selectors:[["app-subjects"]],decls:6,vars:2,consts:[[1,"tutor-settings-nested-page","subjects-wrapper"],[1,"tutor-settings-nested-page__form",3,"formGroup","ngSubmit"],[1,"flex-container-justify-start","grid-gap-space"],["formArrayName","formArray",4,"ngFor","ngForOf"],["type","submit",1,"settings-form-button"],["formArrayName","formArray"],[1,"d-flex","selectRow",3,"formGroupName"],[1,"form-label","fixed-width"],["formControlName","categoryId",3,"label","keyName","list","ngModelChange"],["formControlName","subjectId",3,"label","keyName","list","ngModelChange"],["formControlName","levelId",3,"label","list","keyName","disable"],[1,"flex-container","grid-gap-for-icons"],["class","recycle-bin-wrapper",4,"ngIf"],["class","fas fa-plus",3,"click",4,"ngIf"],[1,"recycle-bin-wrapper"],["src","./assets/images/recycleBin.png","alt","Recycle Byn",3,"click"],[1,"fas","fa-plus",3,"click"]],template:function(s,t){1&s&&(r.TgZ(0,"div",0),r.TgZ(1,"form",1),r.NdJ("ngSubmit",function(){return t.onSubmit()}),r.TgZ(2,"div",2),r.YNc(3,q,15,21,"ng-container",3),r.qZA(),r.TgZ(4,"button",4),r._uU(5,"Update information"),r.qZA(),r.qZA(),r.qZA()),2&s&&(r.xp6(1),r.Q6J("formGroup",t.form),r.xp6(2),r.Q6J("ngForOf",t.formArray.controls))},directives:[p._Y,p.JL,p.sg,h.sg,p.CE,p.x0,I.H,p.JJ,p.u,h.O5],pipes:[h.Ov],styles:[""]}),u})()}}]);