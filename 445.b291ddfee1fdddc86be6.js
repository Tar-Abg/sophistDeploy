"use strict";(self.webpackChunkschool=self.webpackChunkschool||[]).push([[445],{7445:(Ve,P,p)=>{p.r(P),p.d(P,{StudentModule:()=>Ee});var d=p(8583),f=p(4655),J=p(3190),S=p(5319),Y=p(5917),e=p(7716),Z=p(3328),b=p(429),O=p(825),j=p(5603),$=p(9110);let F=(()=>{class r{constructor(n,t,i,l,a,u){this.route=n,this.router=t,this.storageService=i,this.registrationService=l,this.messageService=a,this.location=u,this.subscription=new S.w}ngOnInit(){this.subscribeOnRouterChange(),this.stepNumber$=this.registrationService.stepNumber$}subscribeOnRouterChange(){this.subscription.add(this.route.queryParams.pipe((0,J.w)(n=>n.token&&n.userId?(this.storageService.setUserIdInLocalStorage(+n.userId),this.location.replaceState(this.location.path().split("?")[0],""),this.registrationService.confirmEmail(n.userId,n.token)):(0,Y.of)(null))).subscribe(n=>{n&&(this.registrationService.stepNumber$.next(2),this.router.navigate(["step-two"],{relativeTo:this.route}))},n=>{"Invalid token error"===n.error.type&&(this.messageService.setNewMessage(n.error.title),this.messageService.setBackToMainPage(!0))}))}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(f.gz),e.Y36(f.F0),e.Y36(Z.V),e.Y36(b.c),e.Y36(O.e),e.Y36(d.Ye))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-sign-up"]],decls:9,vars:4,consts:[[1,"grid-container"],[1,"content-wrapper"],[1,"register-form-wrapper"],[1,"register-form-wrapper__title"],[3,"stepNumber","stepCount"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-register-header"),e.TgZ(2,"main",1),e.TgZ(3,"section",2),e.TgZ(4,"h2",3),e._uU(5," student registration FORm "),e.qZA(),e._UZ(6,"app-steps",4),e.ALo(7,"async"),e._UZ(8,"router-outlet"),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(6),e.Q6J("stepNumber",e.lcZ(7,2,t.stepNumber$)||1)("stepCount",5))},directives:[j.U,$.G,f.lC],pipes:[d.Ov],styles:[""]}),r})();var s=p(3679),M=p(6275),y=p(6332),N=p(9092);function Q(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"Please fill in your first name"),e.qZA())}function L(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"Field length has exceeded the limit of 100 characters"),e.qZA())}function E(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"Please fill in your last name"),e.qZA())}function V(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"Field length has exceeded the limit of 100 characters"),e.qZA())}function z(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"Please fill in your username"),e.qZA())}function D(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"Field length has exceeded the limit of 100 characters"),e.qZA())}function R(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"This username is already registered on Sophist"),e.qZA())}function W(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"Username can not contain space"),e.qZA())}function B(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"Please specify your gender"),e.qZA())}function G(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"This is a required field"),e.qZA())}function H(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"Please enter your email address"),e.qZA())}function X(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"Please provide a valid email address"),e.qZA())}function K(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"This email is already registered on Sophist"),e.qZA())}function ee(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"Please create your password"),e.qZA())}function te(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"Password should be at least 8 characters"),e.qZA())}function ne(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"Password can not contain space"),e.qZA())}function re(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"Password should contain at least 1 digit and 1 symbol"),e.qZA())}function se(r,o){if(1&r&&(e.TgZ(0,"span",27),e._uU(1),e.qZA()),2&r){const n=o.ngIf;e.xp6(1),e.Oqu(n)}}function ie(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"Please create your password"),e.qZA())}function oe(r,o){1&r&&(e.TgZ(0,"span",27),e._uU(1,"Passwords are not the same"),e.qZA())}let le=(()=>{class r{constructor(n,t,i,l,a,u){this.fb=n,this.storageService=t,this.validationService=i,this.infosService=l,this.registrationService=a,this.messageService=u,this.subscription=new S.w}ngOnInit(){this.registrationService.stepNumber$.next(1),this.storageService.setUserType(2),this.initializeForm(),this.genderList$=this.infosService.getGenders(),this.emailIsExist$=this.registrationService.emailIsExist$,this.usernameIsExist$=this.registrationService.usernameIsExist$,this.timeZones$=this.infosService.getTimeZones(),this.passwordValidation$=this.registrationService.passwordValidation$,this.resetPasswordError()}initializeForm(){this.form=this.fb.group({id:[null],userType:[this.storageService.getUserType()],firstName:[null,[s.kI.required,s.kI.maxLength(100),s.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],lastName:[null,[s.kI.required,s.kI.maxLength(100),s.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],userName:[null,[s.kI.required,s.kI.maxLength(100),this.validationService.cannotContainSpace]],preferredTimeZone:[null,[s.kI.required]],gender:[null,[s.kI.required]],email:[null,[s.kI.required,s.kI.pattern(this.validationService.emailPattern),s.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],password:[null],rePassword:[null,[s.kI.required,s.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]]},{validators:this.validationService.checkPasswords})}onSubmit(){this.form.valid?this.saveInformation():this.form.markAllAsTouched()}saveInformation(){this.subscription.add(this.registrationService.saveInformation(Object.assign(Object.assign({},this.form.value),{userType:this.storageService.getUserType()})).subscribe(n=>{this.messageService.setNewMessage(n),this.messageService.setBackToMainPage(!0)}))}resetPasswordError(){var n;this.subscription.add(null===(n=this.form.get("password"))||void 0===n?void 0:n.valueChanges.subscribe(()=>this.registrationService.passwordValidation$.next("")))}ngOnDestroy(){this.subscription.unsubscribe()}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(s.qu),e.Y36(Z.V),e.Y36(M.R),e.Y36(y.M),e.Y36(b.c),e.Y36(O.e))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-student-first-step"]],decls:55,vars:36,consts:[[1,"flex-container"],[1,"flex-item","flex-item-step-min-length"],[1,"margin-left-space"],[1,"register-form",3,"formGroup","ngSubmit"],[1,"form-legend"],["for","first-name",1,"form-label"],["id","first-name","type","text","placeholder","First name*","formControlName","firstName",1,"form-input"],["class","error-message",4,"ngIf"],["for","last-name",1,"form-label"],["id","last-name","type","text","placeholder","Last name*","formControlName","lastName",1,"form-input"],["for","user-name",1,"form-label","flex-column"],["id","user-name","type","text","placeholder","User name*","formControlName","userName",1,"form-input"],[1,"gender","fixed-width","form-label"],["formControlName","gender",3,"label","list"],[1,"p-relative","form-label"],["formControlName","preferredTimeZone",3,"label","list","keyName"],["for","email",1,"form-label"],["id","email","autocomplete","username","type","email","placeholder","email address*","formControlName","email",1,"form-input"],["for","password",1,"form-label"],["id","password","autocomplete","new-password","type","password","placeholder","password*","formControlName","password",1,"form-input"],["for","re-enter-password",1,"form-label"],["id","re-enter-password","autocomplete","new-password","type","password","placeholder","re-enter password*","formControlName","rePassword",1,"form-input"],[1,"student-form-warning"],[1,"flex-container-center","button-wrapper"],["type","submit",1,"sophist-btn","flex-container-center","next-btn"],[1,"flex-item"],["src","assets/images/studentRegister.png","alt","Register illustration","width","100","height","100"],[1,"error-message"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"form",3),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(4,"fieldset"),e.TgZ(5,"legend",4),e._uU(6,"Enter your information"),e.qZA(),e.TgZ(7,"label",5),e._UZ(8,"input",6),e.YNc(9,Q,2,0,"span",7),e.YNc(10,L,2,0,"span",7),e.qZA(),e.TgZ(11,"label",8),e._UZ(12,"input",9),e.YNc(13,E,2,0,"span",7),e.YNc(14,V,2,0,"span",7),e.qZA(),e.TgZ(15,"label",10),e._UZ(16,"input",11),e.YNc(17,z,2,0,"span",7),e.YNc(18,D,2,0,"span",7),e.YNc(19,R,2,0,"span",7),e.ALo(20,"async"),e.YNc(21,W,2,0,"span",7),e.qZA(),e.TgZ(22,"div",12),e._UZ(23,"app-select",13),e.ALo(24,"async"),e.YNc(25,B,2,0,"span",7),e.qZA(),e.TgZ(26,"div",14),e._UZ(27,"app-select",15),e.ALo(28,"async"),e.YNc(29,G,2,0,"span",7),e.qZA(),e.TgZ(30,"label",16),e._UZ(31,"input",17),e.YNc(32,H,2,0,"span",7),e.YNc(33,X,2,0,"span",7),e.YNc(34,K,2,0,"span",7),e.ALo(35,"async"),e.qZA(),e.TgZ(36,"label",18),e._UZ(37,"input",19),e.YNc(38,ee,2,0,"span",7),e.YNc(39,te,2,0,"span",7),e.YNc(40,ne,2,0,"span",7),e.YNc(41,re,2,0,"span",7),e.YNc(42,se,2,1,"span",7),e.ALo(43,"async"),e.qZA(),e.TgZ(44,"label",20),e._UZ(45,"input",21),e.YNc(46,ie,2,0,"span",7),e.YNc(47,oe,2,0,"span",7),e.qZA(),e.TgZ(48,"span",22),e._uU(49,"Be informed that only your initials will be visible to tutors"),e.qZA(),e.qZA(),e.TgZ(50,"div",23),e.TgZ(51,"button",24),e._uU(52,"NEXT"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"div",25),e._UZ(54,"img",26),e.qZA(),e.qZA()),2&n){let i,l,a,u,c,m,_,I,U,T,v,A,h,C,g,x,q;e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngIf",((null==(i=t.form.get("firstName"))||null==i.errors?null:i.errors.required)||(null==(i=t.form.get("firstName"))||null==i.errors?null:i.errors.pattern))&&(null==(i=t.form.get("firstName"))?null:i.touched)),e.xp6(1),e.Q6J("ngIf",(null==(l=t.form.get("firstName"))||null==l.errors?null:l.errors.maxlength)&&(null==(l=t.form.get("firstName"))?null:l.touched)),e.xp6(3),e.Q6J("ngIf",((null==(a=t.form.get("lastName"))||null==a.errors?null:a.errors.required)||(null==(a=t.form.get("lastName"))||null==a.errors?null:a.errors.pattern))&&(null==(a=t.form.get("lastName"))?null:a.touched)),e.xp6(1),e.Q6J("ngIf",(null==(u=t.form.get("lastName"))||null==u.errors?null:u.errors.maxlength)&&(null==(u=t.form.get("lastName"))?null:u.touched)),e.xp6(3),e.Q6J("ngIf",((null==(c=t.form.get("userName"))||null==c.errors?null:c.errors.required)||(null==(c=t.form.get("userName"))||null==c.errors?null:c.errors.pattern))&&(null==(c=t.form.get("userName"))?null:c.touched)),e.xp6(1),e.Q6J("ngIf",(null==(m=t.form.get("userName"))||null==m.errors?null:m.errors.maxlength)&&(null==(m=t.form.get("userName"))?null:m.touched)),e.xp6(1),e.Q6J("ngIf",e.lcZ(20,26,t.usernameIsExist$)),e.xp6(2),e.Q6J("ngIf",(null==(_=t.form.get("userName"))||null==_.errors?null:_.errors.cannotContainSpace)&&(null==(_=t.form.get("userName"))?null:_.touched)),e.xp6(2),e.Q6J("label","gender*")("list",e.lcZ(24,28,t.genderList$)),e.xp6(2),e.Q6J("ngIf",(null==(I=t.form.get("gender"))?null:I.errors)&&(null==(I=t.form.get("gender"))?null:I.touched)),e.xp6(2),e.Q6J("label","time zone*")("list",e.lcZ(28,30,t.timeZones$))("keyName","displayName"),e.xp6(2),e.Q6J("ngIf",(null==(U=t.form.get("preferredTimeZone"))?null:U.errors)&&(null==(U=t.form.get("preferredTimeZone"))?null:U.touched)),e.xp6(3),e.Q6J("ngIf",(null==(T=t.form.get("email"))||null==T.errors?null:T.errors.required)&&(null==(T=t.form.get("email"))?null:T.touched)),e.xp6(1),e.Q6J("ngIf",(null==(v=t.form.get("email"))||null==v.errors?null:v.errors.pattern)&&(null==(v=t.form.get("email"))?null:v.touched)),e.xp6(1),e.Q6J("ngIf",e.lcZ(35,32,t.emailIsExist$)),e.xp6(4),e.Q6J("ngIf",(null==(A=t.form.get("password"))||null==A.errors?null:A.errors.required)&&(null==(A=t.form.get("password"))?null:A.touched)),e.xp6(1),e.Q6J("ngIf",(null==(h=t.form.get("password"))||null==h.errors?null:h.errors.minlength)&&!(null!=(h=t.form.get("password"))&&null!=h.errors&&h.errors.cannotContainSpace)&&(null==(h=t.form.get("password"))?null:h.touched)),e.xp6(1),e.Q6J("ngIf",(null==(C=t.form.get("password"))||null==C.errors?null:C.errors.cannotContainSpace)&&(null==(C=t.form.get("password"))?null:C.touched)),e.xp6(1),e.Q6J("ngIf",(null==(g=t.form.get("password"))||null==g.errors?null:g.errors.pattern)&&!(null!=(g=t.form.get("password"))&&null!=g.errors&&g.errors.cannotContainSpace)&&(null==(g=t.form.get("password"))?null:g.touched)&&!(null!=(g=t.form.get("password"))&&null!=g.errors&&g.errors.minlength)),e.xp6(1),e.Q6J("ngIf",e.lcZ(43,34,t.passwordValidation$)),e.xp6(4),e.Q6J("ngIf",(null==(x=t.form.get("rePassword"))||null==x.errors?null:x.errors.required)&&(null==(x=t.form.get("rePassword"))?null:x.touched)),e.xp6(1),e.Q6J("ngIf",(null==t.form||null==t.form.errors?null:t.form.errors.notSame)&&(null==(q=t.form.get("rePassword"))?null:q.touched)&&!(null!=(q=t.form.get("rePassword"))&&null!=q.errors&&q.errors.required))}},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,d.O5,N.H],pipes:[d.Ov],styles:[".register-form[_ngcontent-%COMP%]{width:418px}.button-wrapper[_ngcontent-%COMP%]{margin-top:30px}"]}),r})();var ae=p(8002),k=p(8307),w=p(7539);function ue(r,o){1&r&&(e.TgZ(0,"span",32),e._uU(1,"Please choose a subject"),e.qZA())}function pe(r,o){1&r&&(e.TgZ(0,"span",32),e._uU(1,"This is a required field"),e.qZA())}function ce(r,o){1&r&&(e.TgZ(0,"span",32),e._uU(1,"This is a required field"),e.qZA())}function de(r,o){if(1&r){const n=e.EpF();e.TgZ(0,"div",33),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit;return e.oxw().removeStudentSubjects(i)}),e._UZ(1,"img",34),e.qZA()}}function me(r,o){if(1&r){const n=e.EpF();e.TgZ(0,"i",35),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).addStudentSubjects()}),e.qZA()}}function ge(r,o){if(1&r){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",22),e.TgZ(2,"div",23),e.TgZ(3,"div",24),e.TgZ(4,"app-select",25),e.NdJ("ngModelChange",function(i){const a=e.CHM(n).index,u=e.oxw();return u.categoryChange(i,a,u.studentSubjects.controls[a])}),e.ALo(5,"async"),e.qZA(),e.YNc(6,ue,2,0,"span",26),e.qZA(),e.TgZ(7,"div",24),e.TgZ(8,"app-select",27),e.NdJ("ngModelChange",function(i){const a=e.CHM(n).index,u=e.oxw();return u.subjectChange(i,a,u.studentSubjects.controls[a])}),e.ALo(9,"async"),e.qZA(),e.YNc(10,pe,2,0,"span",26),e.qZA(),e.TgZ(11,"div",24),e._UZ(12,"app-select",28),e.ALo(13,"async"),e.ALo(14,"async"),e.YNc(15,ce,2,0,"span",26),e.qZA(),e.TgZ(16,"div",29),e.YNc(17,de,2,0,"div",30),e.YNc(18,me,1,0,"i",31),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&r){const n=o.index,t=e.oxw();let i,l,a,u;e.xp6(2),e.Q6J("formGroupName",n),e.xp6(2),e.Q6J("label","Category*")("keyName","categoryName")("list",e.lcZ(5,16,t.categories$)),e.xp6(2),e.Q6J("ngIf",(null==t.studentSubjects.controls[n]||null==(i=t.studentSubjects.controls[n].get("categoryId"))?null:i.errors)&&(null==t.studentSubjects.controls[n]||null==(i=t.studentSubjects.controls[n].get("categoryId"))?null:i.touched)),e.xp6(2),e.Q6J("label","Subject*")("keyName","subjectName")("list",e.lcZ(9,18,null==t.observables[n]?null:t.observables[n].subjects$)),e.xp6(2),e.Q6J("ngIf",(null==t.studentSubjects.controls[n]||null==(l=t.studentSubjects.controls[n].get("subjectId"))?null:l.errors)&&(null==t.studentSubjects.controls[n]||null==(l=t.studentSubjects.controls[n].get("subjectId"))?null:l.touched)),e.xp6(2),e.Q6J("label","What level is this for?*")("list",e.lcZ(13,20,null==t.observables[n]?null:t.observables[n].levels$))("keyName","level")("disable",!(null!=(a=e.lcZ(14,22,null==t.observables[n]?null:t.observables[n].levels$))&&a.length)),e.xp6(3),e.Q6J("ngIf",(null==t.studentSubjects.controls[n]||null==(u=t.studentSubjects.controls[n].get("levelId"))?null:u.errors)&&(null==t.studentSubjects.controls[n]||null==(u=t.studentSubjects.controls[n].get("levelId"))?null:u.touched)),e.xp6(2),e.Q6J("ngIf",n>0),e.xp6(1),e.Q6J("ngIf",n==t.studentSubjects.controls.length-1)}}function fe(r,o){if(1&r){const n=e.EpF();e.TgZ(0,"td"),e.TgZ(1,"div",38),e.TgZ(2,"mat-checkbox",39),e.NdJ("change",function(i){const a=e.CHM(n).index,u=e.oxw().$implicit;return e.oxw().selectDay(i,u.days[a])}),e.qZA(),e.qZA(),e.qZA()}if(2&r){const n=o.index,t=e.oxw().$implicit,i=e.oxw();e.xp6(2),e.Q6J("disabled",i.isDisabledCalendar)("checked",t.days[n].checked)}}function he(r,o){if(1&r&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"h4",36),e._uU(3),e.qZA(),e.TgZ(4,"p",37),e._uU(5),e.qZA(),e.qZA(),e.YNc(6,fe,3,2,"td",8),e.qZA()),2&r){const n=o.$implicit,t=o.index;e.xp6(3),e.hij(" ",n[t+1].description,""),e.xp6(2),e.Oqu(n[t+1].details),e.xp6(1),e.Q6J("ngForOf",n.days)}}let Se=(()=>{class r{constructor(n,t,i,l,a){this.fb=n,this.storageService=t,this.infoService=i,this.registrationService=l,this.router=a,this.subscription=new S.w,this.selectedDays=[],this.actionType="CREATE",this.observables=[{subjects$:null,levels$:null}]}ngOnInit(){this.initializeForm(),this.initializeListeners(),this.registrationService.stepNumber$.next(2)}initializeForm(){this.form=this.fb.group({id:[null],userId:[this.storageService.getUserId()],sessionsCountId:[null],isFlexible:[!1],studentSubjects:this.fb.array([this.newStudentSubjects()]),availabilities:[null]})}initializeListeners(){this.categories$=this.infoService.getCategories(),this.lessonsCounts$=this.infoService.getStudentWantedLessonsCounts(),this.getStudentAvailableHours(),this.getStudentWantedLessons()}getStudentAvailableHours(){this.infoService.getStudentAvailableHours().pipe((0,ae.U)(n=>n.map(t=>{let i={};i[t.id]=t,i.days=[];for(let l=0;l<7;l++)i.days.push({partOfDayId:t.id,dayId:l+1,checked:!1});return i}))).subscribe(n=>this.availableHours=n)}categoryChange(n,t,i){this.observables[t]||(this.observables[t]={subjects$:null,levels$:null}),this.observables[t].subjects$=this.infoService.getSubjectsByCategoryId(n),i.get("levelId").reset(),i.get("levelId").updateValueAndValidity()}newStudentSubjects(){return this.fb.group({id:[null],categoryId:[null,[s.kI.required]],subjectId:[null,[s.kI.required]],levelId:[null,[]]})}get studentSubjects(){var n;return null===(n=this.form)||void 0===n?void 0:n.get("studentSubjects")}subjectChange(n,t,i){this.observables[t].levels$=this.infoService.getLevelsBySubjectId(n).pipe((0,k.b)(l=>{var a,u;l.length?(null===(a=i.get("levelId"))||void 0===a||a.setValidators(s.kI.required),i.get("levelId").updateValueAndValidity()):(null===(u=i.get("levelId"))||void 0===u||u.removeValidators(s.kI.required),i.get("levelId").updateValueAndValidity()),this.form.updateValueAndValidity()}))}removeStudentSubjects(n){this.studentSubjects.controls=this.studentSubjects.controls.filter(t=>t!=n),this.studentSubjects.updateValueAndValidity()}addStudentSubjects(){this.studentSubjects.push(this.newStudentSubjects())}onSubmit(){this.form.valid?"CREATE"===this.actionType?this.saveStudentWantedLessons():(this.updateStudentWantedLessons(),this.form.markAllAsTouched()):this.form.markAllAsTouched()}saveStudentWantedLessons(){this.subscription.add(this.registrationService.saveStudentWantedLessons(Object.assign(Object.assign({},this.form.value),{availabilities:this.selectedDays})).subscribe(()=>this.nextStep()))}updateStudentWantedLessons(){this.subscription.add(this.registrationService.updateStudentWantedLessons(Object.assign(Object.assign({},this.form.value),{availabilities:this.selectedDays})).subscribe(()=>this.nextStep()))}getStudentWantedLessons(){this.subscription.add(this.registrationService.getStudentWantedLessons(this.storageService.getUserId()).subscribe(n=>{n?(this.actionType="UPDATE",this.form.patchValue(n),this.patchStudentSubjects(n)):this.actionType="CREATE"}))}patchStudentSubjects(n){n.studentSubjects.length&&(this.studentSubjects.controls=[],this.observables=[],n.studentSubjects.forEach(t=>{var i,l;const a=this.newStudentSubjects();a.patchValue(t),null===(i=this.studentSubjects)||void 0===i||i.controls.push(a),this.observables[(null===(l=this.studentSubjects)||void 0===l?void 0:l.controls.length)-1]={subjects$:this.infoService.getSubjectsByCategoryId(t.categoryId),levels$:this.infoService.getLevelsBySubjectId(t.subjectId)}}),this.removeSelectedDaysProperty(n),this.checkDaysInputs(),this.studentSubjects.updateValueAndValidity())}checkDaysInputs(){this.selectedDays.forEach(n=>{setTimeout(()=>{this.availableHours.forEach(t=>{t.days.forEach(i=>{i.partOfDayId==n.partOfDayId&&i.dayId==n.dayId&&(i.checked=!0)})})},0)})}removeSelectedDaysProperty(n){this.selectedDays=n.availabilities.map(t=>(delete t.infoAboutStudentWantedLessonId,delete t.id,delete t.userId,t))}isFlexibleChange(n){this.isDisabledCalendar=n,n&&(this.selectedDays.length=0,this.availableHours.forEach(t=>{t.days.forEach(i=>i.checked=!1)}))}selectDay(n,t){delete t.checked,t.checked=!t.checked,n.checked?this.selectedDays.push(t):this.selectedDays.splice(this.selectedDays.indexOf(t),1)}nextStep(){this.registrationService.stepNumber$.next(3),this.router.navigate(["student/signUp/step-three"])}ngOnDestroy(){this.subscription.unsubscribe()}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(s.qu),e.Y36(Z.V),e.Y36(y.M),e.Y36(b.c),e.Y36(f.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-student-second-step"]],decls:55,vars:7,consts:[[1,"flex-container"],[1,"flex-item","flex-item-step-min-length"],[1,"margin-left-space"],[1,"register-form",3,"formGroup","ngSubmit"],[1,"user-sign-up-list"],[1,"user-sign-up-list__item"],[1,"main-question"],[1,"flex-container-justify-start","grid-gap-space-for-student"],[4,"ngFor","ngForOf"],[1,"mb-15"],[1,"main-question","mb-15"],["id","customers"],[1,"table-head__title"],[1,"checkboxes-wrapper"],["formControlName","isFlexible",3,"ngModelChange"],[1,"user-sign-up-list__item","select-wrapper-min-width"],[1,"fixed-width","form-label"],["formControlName","sessionsCountId",3,"label","list"],[1,"flex-container-center","button-wrapper","button-wrapper__mt"],["type","submit",1,"sophist-btn","flex-container-center","next-btn"],[1,"flex-item"],["src","assets/images/studentRegister.png","alt","Register illustration","width","100","height","100"],["formArrayName","studentSubjects"],[1,"d-flex","selectRow",3,"formGroupName"],[1,"selectWrapper"],["formControlName","categoryId",3,"label","keyName","list","ngModelChange"],["class","error-message",4,"ngIf"],["formControlName","subjectId",3,"label","keyName","list","ngModelChange"],["formControlName","levelId",3,"label","list","keyName","disable"],[1,"flex-container","grid-gap-for-icons"],["class","recycle-bin-wrapper text-danger",3,"click",4,"ngIf"],["class","fas fa-plus",3,"click",4,"ngIf"],[1,"error-message"],[1,"recycle-bin-wrapper","text-danger",3,"click"],["src","./assets/images/recycleBin.png","alt","recycle byn",1,"trashIcon"],[1,"fas","fa-plus",3,"click"],[1,"table-row__title"],[1,"table-row__description"],[1,"table-checkbox-wrapper"],[3,"disabled","checked","change"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"form",3),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(4,"ul",4),e.TgZ(5,"li",5),e.TgZ(6,"h3",6),e._uU(7,"What subject(s) are you interested in?"),e.qZA(),e.TgZ(8,"div",7),e.YNc(9,ge,19,24,"ng-container",8),e.qZA(),e.qZA(),e.TgZ(10,"li",5),e.TgZ(11,"div",9),e.TgZ(12,"h3",10),e._uU(13,"When are you available for lessons?"),e.qZA(),e.TgZ(14,"table",11),e.TgZ(15,"thead"),e.TgZ(16,"tr"),e._UZ(17,"th"),e.TgZ(18,"th"),e.TgZ(19,"h2",12),e._uU(20,"Sun"),e.qZA(),e.qZA(),e.TgZ(21,"th"),e.TgZ(22,"h2",12),e._uU(23," Mon "),e.qZA(),e.qZA(),e.TgZ(24,"th"),e.TgZ(25,"h2",12),e._uU(26,"Tue "),e.qZA(),e.qZA(),e.TgZ(27,"th"),e.TgZ(28,"h2",12),e._uU(29,"Wed"),e.qZA(),e.qZA(),e.TgZ(30,"th"),e.TgZ(31,"h2",12),e._uU(32,"Thu"),e.qZA(),e.qZA(),e.TgZ(33,"th"),e.TgZ(34,"h2",12),e._uU(35,"Fri"),e.qZA(),e.qZA(),e.TgZ(36,"th"),e.TgZ(37,"h2",12),e._uU(38,"Sat"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"tbody"),e.YNc(40,he,7,3,"tr",8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",13),e.TgZ(42,"mat-checkbox",14),e.NdJ("ngModelChange",function(l){return t.isFlexibleChange(l)}),e._uU(43," Anytime (I\u2019m flexible) "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(44,"li",15),e.TgZ(45,"h3",6),e._uU(46,"How many tutoring sessions do you think you will need?*"),e.qZA(),e.TgZ(47,"div",16),e._UZ(48,"app-select",17),e.ALo(49,"async"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"div",18),e.TgZ(51,"button",19),e._uU(52,"NEXT"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"div",20),e._UZ(54,"img",21),e.qZA(),e.qZA()),2&n&&(e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngForOf",t.studentSubjects.controls),e.xp6(31),e.Q6J("ngForOf",t.availableHours),e.xp6(8),e.Q6J("label","Select*")("list",e.lcZ(49,5,t.lessonsCounts$)))},directives:[s._Y,s.JL,s.sg,d.sg,w.oG,s.JJ,s.u,N.H,s.CE,s.x0,d.O5],pipes:[d.Ov],styles:['.main-question[_ngcontent-%COMP%]{font-size:1.125rem}table[_ngcontent-%COMP%]{border-collapse:unset;border-spacing:0 10px}table[_ngcontent-%COMP%]   .table-head__title[_ngcontent-%COMP%]{margin:0;padding:0 21px;font:600 normal 1.125rem "Segoe UI",sans-serif;text-align:center;line-height:24px;color:#de9300}table[_ngcontent-%COMP%]   .table-checkbox-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:1px solid #f7f7f7;border-bottom:1px solid #f7f7f7;vertical-align:middle}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border:0;padding-right:30px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:1px solid #f7f7f7;border-radius:0 5px 5px 0}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){border-left:1px solid #f7f7f7;border-radius:5px 0 0 5px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;font:300 normal 1rem "Segoe UI",sans-serif;line-height:21px;color:#717171}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;padding:0;font:600 normal 1.125rem "Segoe UI",sans-serif;line-height:24px;color:#de9300}.select-wrapper-min-width[_ngcontent-%COMP%]{width:60%}.select-wrapper-min-width[_ngcontent-%COMP%]   .main-question[_ngcontent-%COMP%]{letter-spacing:normal}.grid-gap-space-for-student[_ngcontent-%COMP%]{flex-direction:column;justify-content:flex-start;align-items:flex-start;grid-gap:24px}']}),r})();function Ze(r,o){1&r&&(e.TgZ(0,"span",26),e._uU(1,"This is a required field"),e.qZA())}function be(r,o){1&r&&(e.TgZ(0,"span",26),e._uU(1,"This is a required field"),e.qZA())}function _e(r,o){1&r&&(e.TgZ(0,"span",26),e._uU(1,"This is a required field"),e.qZA())}function Te(r,o){1&r&&(e.TgZ(0,"span",26),e._uU(1,"This is a required field"),e.qZA())}function ve(r,o){1&r&&(e.TgZ(0,"span",26),e._uU(1,"This is a required field"),e.qZA())}let Ae=(()=>{class r{constructor(n,t,i,l,a){this.fb=n,this.storageService=t,this.infoService=i,this.registrationService=l,this.router=a,this.subscription=new S.w,this.actionType="CREATE"}ngOnInit(){this.initializeForm(),this.initializeListeners(),this.registrationService.stepNumber$.next(3)}initializeForm(){this.form=this.fb.group({id:[null],userId:[this.storageService.getUserId()],countryId:[null,[s.kI.required]],city:[null,[s.kI.required,s.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],streetNumber:[null,[s.kI.required,s.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],streetName:[null,[s.kI.required,s.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],zipCode:[null,[s.kI.required,s.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]]})}onSubmit(){this.form.valid?"CREATE"===this.actionType?this.saveAddress():this.updateAddress():this.form.markAllAsTouched()}initializeListeners(){this.countries$=this.infoService.getCountries(),this.getBasicInformation()}getBasicInformation(){this.subscription.add(this.registrationService.getStudentAddressPage(this.storageService.getUserId()).subscribe(n=>{n?(this.actionType="UPDATE",this.form.patchValue(n)):this.actionType="CREATE"}))}saveAddress(){this.subscription.add(this.registrationService.saveStudentAddress(this.form.value).subscribe(()=>this.nextStep()))}updateAddress(){this.subscription.add(this.registrationService.updateStudentAddress(this.form.value).subscribe(()=>this.nextStep()))}nextStep(){this.registrationService.stepNumber$.next(4),this.router.navigate(["student/signUp/step-four"])}previousStep(){this.registrationService.stepNumber$.next(2),this.router.navigate(["student/signUp/step-two"])}ngOnDestroy(){this.subscription.unsubscribe()}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(s.qu),e.Y36(Z.V),e.Y36(y.M),e.Y36(b.c),e.Y36(f.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-student-third-step"]],decls:50,vars:11,consts:[[1,"flex-container"],[1,"flex-item","flex-item-step-min-length"],[1,"margin-left-space"],[1,"register-form",3,"formGroup","ngSubmit"],[1,"form-legend","mb-15"],[1,"form-legend-description"],[1,"form-wrapper","student-form"],[1,"address-form__item"],[1,"select-label"],[1,"fixed-width","form-label"],["formControlName","countryId",3,"label","list","keyName"],[1,"form-item-notification"],["class","error-message block",4,"ngIf"],["for","city",1,"form-label"],["id","city","autocomplete","city","type","text","placeholder","City*","formControlName","city",1,"form-input"],["for","streetNumber",1,"form-label"],["id","streetNumber","autocomplete","streetNumber","type","text","placeholder","Street Number*","formControlName","streetNumber",1,"form-input"],["for","streetName",1,"form-label"],["id","streetName","autocomplete","streetName","type","text","placeholder","Street Name*","formControlName","streetName",1,"form-input"],["for","zipCode",1,"form-label"],["id","zipCode","autocomplete","zipCode","type","text","placeholder","Zip Code*","formControlName","zipCode",1,"form-input"],[1,"flex-container-center","button-wrapper","button-wrapper__mt"],["type","button",1,"sophist-btn","flex-container-center",3,"click"],["type","submit",1,"sophist-btn","flex-container-center"],[1,"flex-item"],["src","assets/images/studentRegister.png","alt","Register illustration","width","100","height","100"],[1,"error-message","block"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"form",3),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(4,"fieldset"),e.TgZ(5,"legend",4),e._uU(6,"Basic Information"),e.qZA(),e.TgZ(7,"p",5),e._uU(8,"Please provide the following information so we can start creating your profile."),e.qZA(),e.TgZ(9,"ul",6),e.TgZ(10,"li",7),e.TgZ(11,"p",8),e._uU(12,"Physical Address"),e.qZA(),e.TgZ(13,"div",9),e._UZ(14,"app-select",10),e.ALo(15,"async"),e.TgZ(16,"span",11),e._uU(17,"Visible in a public profile"),e.qZA(),e.YNc(18,Ze,2,0,"span",12),e.qZA(),e.qZA(),e.TgZ(19,"li",7),e.TgZ(20,"label",13),e._UZ(21,"input",14),e.TgZ(22,"span",11),e._uU(23,"Visible in a public profile"),e.qZA(),e.YNc(24,be,2,0,"span",12),e.qZA(),e.qZA(),e.TgZ(25,"li",7),e.TgZ(26,"label",15),e._UZ(27,"input",16),e.TgZ(28,"span",11),e._uU(29,"Not visible on the public profile."),e.qZA(),e.YNc(30,_e,2,0,"span",12),e.qZA(),e.qZA(),e.TgZ(31,"li",7),e.TgZ(32,"label",17),e._UZ(33,"input",18),e.TgZ(34,"span",11),e._uU(35,"Not visible on the public profile."),e.qZA(),e.YNc(36,Te,2,0,"span",12),e.qZA(),e.qZA(),e.TgZ(37,"li",7),e.TgZ(38,"label",19),e._UZ(39,"input",20),e.TgZ(40,"span",11),e._uU(41,"Not visible on the public profile"),e.qZA(),e.YNc(42,ve,2,0,"span",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"div",21),e.TgZ(44,"button",22),e.NdJ("click",function(){return t.previousStep()}),e._uU(45,"PREVIOUS"),e.qZA(),e.TgZ(46,"button",23),e._uU(47,"NEXT"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"div",24),e._UZ(49,"img",25),e.qZA(),e.qZA()),2&n){let i,l,a,u,c;e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(11),e.Q6J("label","Country*")("list",e.lcZ(15,9,t.countries$))("keyName","nameLowerCase"),e.xp6(4),e.Q6J("ngIf",(null==(i=t.form.get("countryId"))||null==i.errors?null:i.errors.required)&&(null==(i=t.form.get("countryId"))?null:i.touched)),e.xp6(6),e.Q6J("ngIf",(null==(l=t.form.get("city"))||null==l.errors?null:l.errors.required)&&(null==(l=t.form.get("city"))?null:l.touched)),e.xp6(6),e.Q6J("ngIf",(null==(a=t.form.get("streetNumber"))||null==a.errors?null:a.errors.required)&&(null==(a=t.form.get("streetNumber"))?null:a.touched)),e.xp6(6),e.Q6J("ngIf",(null==(u=t.form.get("streetName"))||null==u.errors?null:u.errors.required)&&(null==(u=t.form.get("streetName"))?null:u.touched)),e.xp6(6),e.Q6J("ngIf",(null==(c=t.form.get("zipCode"))||null==c.errors?null:c.errors.required)&&(null==(c=t.form.get("zipCode"))?null:c.touched))}},directives:[s._Y,s.JL,s.sg,N.H,s.JJ,s.u,d.O5,s.Fj],pipes:[d.Ov],styles:['.form-legend-description[_ngcontent-%COMP%]{font:300 normal 1.125rem "Segoe UI",sans-serif;line-height:24px;letter-spacing:.02em;color:#3862b0;margin-bottom:22px}.form-wrapper[_ngcontent-%COMP%]{width:418px}.form-wrapper[_ngcontent-%COMP%]   .select-label[_ngcontent-%COMP%]{margin-bottom:5px;font:400 normal 1.125rem "Segoe UI",sans-serif;line-height:24px;color:#000}.student-form[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{margin-bottom:0}']}),r})();function Ce(r,o){1&r&&e._UZ(0,"img",28)}function xe(r,o){if(1&r&&e._UZ(0,"img",29),2&r){const n=e.oxw();e.Q6J("src",n.userImage,e.LSH)}}function qe(r,o){1&r&&(e.TgZ(0,"span",30),e._uU(1,"This is a required field"),e.qZA())}let ye=(()=>{class r{constructor(n,t,i,l,a,u){this.fb=n,this.storageService=t,this.registrationService=i,this.validationService=l,this.cd=a,this.router=u,this.subscription=new S.w,this.actionType="CREATE"}ngOnInit(){this.registrationService.stepNumber$.next(4),this.initializeForm(),this.getWrapUpProfile()}initializeForm(){this.form=this.fb.group({id:[null],userId:[this.storageService.getUserId()],photo:[null],wrapUp:[null,[s.kI.required,s.kI.minLength(50),s.kI.maxLength(2e3),s.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],headline:[null],bio:[null]})}onSubmit(){this.form.valid?"CREATE"===this.actionType?this.saveWrapUpProfile():this.updateWrapUpProfile():this.form.markAllAsTouched()}saveWrapUpProfile(){this.subscription.add(this.registrationService.saveWrapUpProfile(Object.assign(Object.assign({},this.form.value),{photo:this.userImage})).subscribe(()=>this.nextStep()))}updateWrapUpProfile(){this.subscription.add(this.registrationService.updateWrapUpProfile(Object.assign(Object.assign({},this.form.value),{photo:this.userImage})).subscribe(()=>this.nextStep()))}getWrapUpProfile(){this.subscription.add(this.registrationService.getWrapUpProfile(this.storageService.getUserId()).subscribe(n=>{n?(this.actionType="UPDATE",this.form.patchValue(n),this.userImage=n.photo):this.actionType="CREATE"}))}selectFile(n){const t=new FileReader;t.readAsDataURL(n.target.files[0]),n.target.files[0]&&(t.onload=i=>{this.checkImageSizes(t.result)})}checkImageSizes(n){this.validationService.checkImageSizes(n).then(t=>{t?(this.userImage=t,this.isSmallSizeForImage=!1):this.isSmallSizeForImage=!0,this.cd.detectChanges()})}nextStep(){this.registrationService.stepNumber$.next(5),this.router.navigate(["student/signUp/step-five"])}previousStep(){this.registrationService.stepNumber$.next(2),this.router.navigate(["student/signUp/step-three"])}ngOnDestroy(){this.subscription.unsubscribe()}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(s.qu),e.Y36(Z.V),e.Y36(b.c),e.Y36(M.R),e.Y36(e.sBO),e.Y36(f.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-student-fourth-step"]],decls:45,vars:10,consts:[[1,"form-legend","student-form-title"],[1,"tutor-sign-up-wrapper"],[1,"tutor-sign-up-form-container"],[3,"formGroup","ngSubmit"],[1,"user-sign-up-list"],[1,"user-sign-up-list__item"],[1,"main-question","upload-photo-title","mb-15"],[1,"file-upload-wrapper"],[1,"upload-image-box"],[1,"image-upload-wrap"],["type","file","accept",".png, .jpg, .jpeg, \u2024jpe",1,"file-upload-input",3,"change"],[1,"drag-text"],["src","assets/images/photo-camera%201.png","alt","Upload Photo","width","33","height","33",4,"ngIf"],["alt","Upload Photo",3,"src",4,"ngIf"],[1,"file-upload-content"],["src","#","alt","your image",1,"file-upload-image"],[1,"image-title-wrap"],["type","button","onclick","removeUpload()",1,"remove-image"],[1,"image-title"],[1,"upload-image-requirement"],[1,"form-item-notification"],[1,"main-question"],["for","bio",1,"form-label","form-label--textarea"],["id","bio","type","text","rows","5","cols","3","placeholder","A paragraph or more about yourself*","formControlName","wrapUp",1,"form-textarea"],["class","error-message",4,"ngIf"],[1,"flex-container-center","button-wrapper","button-wrapper__mt"],["type","button",1,"sophist-btn","flex-container-center",3,"click"],["type","submit",1,"sophist-btn","flex-container-center","next-btn"],["src","assets/images/photo-camera%201.png","alt","Upload Photo","width","33","height","33"],["alt","Upload Photo",3,"src"],[1,"error-message"]],template:function(n,t){if(1&n&&(e.TgZ(0,"legend",0),e._uU(1,"Create Your Profile"),e.qZA(),e.TgZ(2,"section",1),e.TgZ(3,"div",2),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(5,"fieldset"),e.TgZ(6,"ul",4),e.TgZ(7,"li",5),e.TgZ(8,"h3",6),e._uU(9,"Profile photo"),e.qZA(),e.TgZ(10,"div",7),e.TgZ(11,"div",8),e.TgZ(12,"div",9),e.TgZ(13,"input",10),e.NdJ("change",function(l){return t.selectFile(l)}),e.qZA(),e.TgZ(14,"div",11),e.YNc(15,Ce,1,0,"img",12),e.qZA(),e.YNc(16,xe,1,1,"img",13),e.qZA(),e.TgZ(17,"div",14),e._UZ(18,"img",15),e.TgZ(19,"div",16),e.TgZ(20,"button",17),e._uU(21," Remove "),e.TgZ(22,"span",18),e._uU(23,"Uploaded Image"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",19),e.TgZ(25,"p",20),e._uU(26,"Minimum size 200 x 200 pixels. "),e.qZA(),e.TgZ(27,"p",20),e._uU(28," You can upload a photo later or change your photo at any time."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"li",5),e.TgZ(30,"h3",21),e._uU(31,"Wrap up your profile*"),e.qZA(),e.TgZ(32,"label",22),e.TgZ(33,"textarea",23),e._uU(34,"                "),e.qZA(),e.YNc(35,qe,2,0,"span",24),e.qZA(),e.TgZ(36,"p",20),e._uU(37,"Briefly describe what you need help with."),e.qZA(),e.TgZ(38,"p",20),e._uU(39,"Your free response must be between 50 and 2000 characters. "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",25),e.TgZ(41,"button",26),e.NdJ("click",function(){return t.previousStep()}),e._uU(42,"PREVIOUS"),e.qZA(),e.TgZ(43,"button",27),e._uU(44,"NEXT"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){let i,l;e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(8),e.ekj("image-uploaded",t.userImage),e.xp6(3),e.Q6J("ngIf",!t.userImage),e.xp6(1),e.Q6J("ngIf",t.userImage),e.xp6(9),e.ekj("text-danger",t.isSmallSizeForImage),e.xp6(10),e.Q6J("ngIf",(null==(i=t.form.get("wrapUp"))||null==i.errors?null:i.errors.required)&&(null==(i=t.form.get("wrapUp"))?null:i.touched)),e.xp6(3),e.ekj("text-danger",((null==(l=t.form.get("wrapUp"))||null==l.errors?null:l.errors.minlength)||(null==(l=t.form.get("wrapUp"))||null==l.errors?null:l.errors.maxlength))&&(null==(l=t.form.get("wrapUp"))?null:l.touched))}},directives:[s._Y,s.JL,s.sg,d.O5,s.Fj,s.JJ,s.u],styles:[".student-form-title[_ngcontent-%COMP%]{width:1221px;margin:0 auto 20px}.tutor-sign-up-wrapper[_ngcontent-%COMP%]{margin-top:0;padding:20px 33px 110px}.tutor-sign-up-form-container[_ngcontent-%COMP%]{margin:0}.tutor-sign-up-form-container[_ngcontent-%COMP%]   .upload-photo-title[_ngcontent-%COMP%]{margin-bottom:15px}.form-label--textarea[_ngcontent-%COMP%]{width:697px;margin-bottom:5px}.form-label--textarea[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{left:unset;right:0}.button-wrapper__mt[_ngcontent-%COMP%]{margin-top:50px}.image-uploaded[_ngcontent-%COMP%]{border-radius:50%;display:flex;overflow:hidden}"]}),r})();var Ie=p(8067),Ue=p(6256);function Ne(r,o){1&r&&(e.TgZ(0,"span",35),e._uU(1,"This is a required field"),e.qZA())}function we(r,o){1&r&&(e.TgZ(0,"span",36),e._uU(1,"This is a required field"),e.qZA())}function Pe(r,o){if(1&r&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&r){const n=o.$implicit;e.Q6J("ngValue",n.id),e.xp6(1),e.Oqu(n.numberInString+" "+n.name)}}function Oe(r,o){1&r&&(e.TgZ(0,"span",36),e._uU(1,"This is a required field"),e.qZA())}function Fe(r,o){if(1&r&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&r){const n=o.$implicit;e.Q6J("ngValue",n.id),e.xp6(1),e.Oqu(n.description)}}function Me(r,o){1&r&&(e.TgZ(0,"span",36),e._uU(1,"This is a required field"),e.qZA())}function ke(r,o){1&r&&(e.TgZ(0,"span",36),e._uU(1,"This is a required field"),e.qZA())}const Je=[{path:"signUp",component:F,children:[{path:"step-one",component:le},{path:"step-two",component:Se},{path:"step-three",component:Ae},{path:"step-four",component:ye},{path:"step-five",component:(()=>{class r{constructor(n,t,i,l,a,u,c){this.fb=n,this.infoService=t,this.dateService=i,this.storageService=l,this.registrationService=a,this.authService=u,this.router=c,this.subscription=new S.w}ngOnInit(){this.registrationService.stepNumber$.next(5),this.initializeForm(),this.initializeListeners()}getIsUserFromUS(){this.isUserFromUS$=this.infoService.getIsUserAmerican().pipe((0,k.b)(n=>{n&&this.addBillingAddress()}))}initializeListeners(){this.getIsUserFromUS(),this.months$=this.infoService.getMonths(),this.yearList=this.dateService.getYearsForCard(),this.states$=this.infoService.getStates()}addBillingAddress(){this.form.addControl("billingAddress",this.fb.group({stateId:[null,s.kI.required],streetNumber:[null,s.kI.required,s.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)],apartment:[null,s.kI.required,s.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)],zipCode:[null,s.kI.required,s.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)],city:[null,s.kI.required,s.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]}))}initializeForm(){this.form=this.fb.group({userId:[this.storageService.getUserId()],cardNumber:[null,s.kI.required],name:[null,s.kI.required],expMonth:[null,s.kI.required],expYear:[null,s.kI.required],cvc:[null,s.kI.required]})}onSubmit(){if(this.form.valid){const n=Object.assign(Object.assign({},this.form.value),{cardNumber:this.form.value.cardNumber.toString()});this.subscription.add(this.registrationService.saveCardDetails(n).subscribe(t=>{t.token&&(this.authService.setSessions(t),this.storageService.setItem("userType",2),this.router.navigate(["student/profile"]))}))}else this.form.markAllAsTouched()}get billingAddress(){return this.form.get("billingAddress")}previousStep(){this.registrationService.stepNumber$.next(4),this.router.navigate(["student/signUp/step-four"])}ngOnDestroy(){this.subscription.unsubscribe()}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(s.qu),e.Y36(y.M),e.Y36(Ie.R),e.Y36(Z.V),e.Y36(b.c),e.Y36(Ue.e),e.Y36(f.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-student-fifth-step"]],decls:63,vars:11,consts:[[1,"credit-card-container"],[1,"register-form",3,"formGroup","ngSubmit"],[1,"form-legend"],[1,"flex-container-start"],[1,"flex-item-for-card"],[1,"main-question","mb-32"],["for","cardNumber",1,"flex-column","form-group"],[1,"card-input-label"],["type","number","id","cardNumber","placeholder","","maxlength","16","formControlName","cardNumber",1,"card-field"],["class","error-message block",4,"ngIf"],["for","cardName",1,"form-group","form-label","flex-column"],["id","cardName","autocomplete","cardName","type","text","placeholder","name on  card","formControlName","name",1,"card-field"],["class","error-message",4,"ngIf"],[1,"date-picker-wrapper"],[1,"form-group","select-with-border"],["formControlName","expMonth"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-group","select-year-wrapper","select-with-border"],["formControlName","expYear"],["for","cvv",1,"form-group","form-label","flex-column","cvv-label"],["id","cvv","autocomplete","cvv","type","number","placeholder","","maxlength","3","formControlName","cvc",1,"card-field","cvv"],[1,"card__image"],["src","assets/images/card.png","alt","Card","width","693","height","420"],[1,"main-convenient"],[1,"main-question"],[1,"main-convenient-list"],[1,"main-convenient-list__item"],["src","assets/images/checked.png","alt","Checked","width","26","height","26"],[1,"checkboxes-wrapper"],["paymentPolicies",""],[1,"checkbox-text"],["href",""],[1,"flex-container-center","button-wrapper","button-wrapper__mt"],["type","button",1,"sophist-btn","flex-container-center",3,"click"],["type","submit",1,"sophist-btn","flex-container-center","next-btn",3,"disabled","click"],[1,"error-message","block"],[1,"error-message"],[3,"ngValue"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(2,"fieldset"),e.TgZ(3,"legend",2),e._uU(4,"Payment Information"),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"h3",5),e._uU(8,"ADD credit card/debit card"),e.qZA(),e.TgZ(9,"label",6),e.TgZ(10,"span",7),e._uU(11," Card Number*"),e.qZA(),e._UZ(12,"input",8),e.YNc(13,Ne,2,0,"span",9),e.qZA(),e.TgZ(14,"label",10),e.TgZ(15,"span",7),e._uU(16," Insert your name as it appears on the card* "),e.qZA(),e._UZ(17,"input",11),e.YNc(18,we,2,0,"span",12),e.qZA(),e.TgZ(19,"span",7),e._uU(20,"Card expiration date*"),e.qZA(),e.TgZ(21,"div",13),e.TgZ(22,"div",14),e.TgZ(23,"select",15),e.YNc(24,Pe,2,2,"option",16),e.ALo(25,"async"),e.qZA(),e.YNc(26,Oe,2,0,"span",12),e.qZA(),e.TgZ(27,"div",17),e.TgZ(28,"select",18),e.YNc(29,Fe,2,2,"option",16),e.qZA(),e.YNc(30,Me,2,0,"span",12),e.qZA(),e.TgZ(31,"label",19),e.TgZ(32,"span",7),e._uU(33," CVC2/CVV2* "),e.qZA(),e._UZ(34,"input",20),e.YNc(35,ke,2,0,"span",12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",21),e._UZ(37,"img",22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",23),e.TgZ(39,"h3",24),e._uU(40,"Convenient, cashless payments"),e.qZA(),e.TgZ(41,"ul",25),e.TgZ(42,"li",26),e._UZ(43,"img",27),e._uU(44," Pay only once your lesson\u2019s complete. "),e.qZA(),e.TgZ(45,"li",26),e._UZ(46,"img",27),e._uU(47," Lessons are charged by each tutor\u2019s hourly rate. "),e.qZA(),e.TgZ(48,"li",26),e._UZ(49,"img",27),e._uU(50," It is your responsibility to notify the tutor about the cancelation of the class. Please read the cancellation policy of your tutor prior to scheduling the class. The tutor may charge you for the late notice. "),e.qZA(),e.qZA(),e.TgZ(51,"div",28),e.TgZ(52,"mat-checkbox",null,29),e.TgZ(54,"p",30),e._uU(55,"I have read and agree to the "),e.TgZ(56,"a",31),e._uU(57,"Payment Policies.*"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(58,"div",32),e.TgZ(59,"button",33),e.NdJ("click",function(){return t.previousStep()}),e._uU(60,"PREVIOUS"),e.qZA(),e.TgZ(61,"button",34),e.NdJ("click",function(){return t.onSubmit()}),e._uU(62,"Sign"),e.qZA(),e.qZA(),e.qZA()),2&n){const i=e.MAs(53);let l,a,u,c,m;e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(12),e.Q6J("ngIf",(null==(l=t.form.get("cardNumber"))||null==l.errors?null:l.errors.required)&&(null==(l=t.form.get("cardNumber"))?null:l.touched)),e.xp6(5),e.Q6J("ngIf",(null==(a=t.form.get("name"))||null==a.errors?null:a.errors.required)&&(null==(a=t.form.get("name"))?null:a.touched)),e.xp6(6),e.Q6J("ngForOf",e.lcZ(25,9,t.months$)),e.xp6(2),e.Q6J("ngIf",(null==(u=t.form.get("expMonth"))||null==u.errors?null:u.errors.required)&&(null==(u=t.form.get("expMonth"))?null:u.touched)),e.xp6(3),e.Q6J("ngForOf",t.yearList),e.xp6(1),e.Q6J("ngIf",(null==(c=t.form.get("expYear"))||null==c.errors?null:c.errors.required)&&(null==(c=t.form.get("expYear"))?null:c.touched)),e.xp6(5),e.Q6J("ngIf",(null==(m=t.form.get("cvc"))||null==m.errors?null:m.errors.required)&&(null==(m=t.form.get("cvc"))?null:m.touched)),e.xp6(26),e.Q6J("disabled",!i.checked)}},directives:[s._Y,s.JL,s.sg,s.wV,s.Fj,s.nD,s.JJ,s.u,d.O5,s.EJ,d.sg,w.oG,s.YN,s.Kr],pipes:[d.Ov],styles:['.main-convenient[_ngcontent-%COMP%]{padding-left:105px}.main-convenient-list[_ngcontent-%COMP%]{padding:30px 0 0 30px;width:60%}.main-convenient-list__item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;grid-gap:20px;margin-bottom:20px;font:300 normal 1.125rem "Segoe UI",sans-serif;line-height:24px;color:#000}.main-convenient-list__item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:auto}.checkboxes-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ffb519;text-decoration:underline}.credit-card-container[_ngcontent-%COMP%]{width:100%;padding:0 168px 0 178px}.flex-item-for-card[_ngcontent-%COMP%], .form-legend[_ngcontent-%COMP%]{margin-left:105px;width:382px}.billing-address-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:37px 0 58px;padding:0 190px 58px 105px;grid-gap:32px;border-bottom:2px solid #efefef}.billing-address-container[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{flex:0 0 418px}.card-field[_ngcontent-%COMP%]{height:34px;border:0;border-bottom:1px solid #8fb5fc}.main-question[_ngcontent-%COMP%]{flex:0 0 100%;font-size:1.25rem;line-height:27px}.mb-32[_ngcontent-%COMP%]{margin-bottom:32px}.form-group[_ngcontent-%COMP%]{display:flex;position:relative;margin-bottom:30px}.card-input-label[_ngcontent-%COMP%]{font:300 normal 1rem "Segoe UI",sans-serif;line-height:21px;color:#7a7a7a}.checkbox-text[_ngcontent-%COMP%]{margin-top:16px;font:400 normal 1rem "Segoe UI",sans-serif;line-height:21px;color:#000}.date-picker-wrapper[_ngcontent-%COMP%]{display:flex;grid-gap:30px}.date-picker-wrapper[_ngcontent-%COMP%]   .cvv-label[_ngcontent-%COMP%]{width:110px;margin-left:33px}.date-picker-wrapper[_ngcontent-%COMP%]   .cvv-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:-24px 0 0;line-height:normal}.select-year-wrapper[_ngcontent-%COMP%]{width:62px}select[_ngcontent-%COMP%]{border:none;background-color:transparent}.select-with-border[_ngcontent-%COMP%]{border-bottom:1px solid #8fb5fc}']}),r})()},{path:"",redirectTo:"step-one"}]},{path:"StudentProfileDetails",component:F},{path:"profile",loadChildren:()=>Promise.all([p.e(731),p.e(25),p.e(265),p.e(8),p.e(935),p.e(602)]).then(p.bind(p,4602)).then(r=>r.StudentProfileModule)},{path:"settings",loadChildren:()=>Promise.all([p.e(731),p.e(306)]).then(p.bind(p,9306)).then(r=>r.StudentSettingsModule)}];let Ye=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[f.Bz.forChild(Je)],f.Bz]}),r})();var je=p(4466),$e=p(8295),Qe=p(9899),Le=p(6627);let Ee=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[d.ez,Ye,je.m,w.p9,s.UX,$e.lN,Qe.FA,Le.Ps]]}),r})()}}]);