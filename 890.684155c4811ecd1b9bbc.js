"use strict";(self.webpackChunkschool=self.webpackChunkschool||[]).push([[890],{7598:(ge,B,d)=>{d.d(B,{T:()=>W});var i=d(7716),N=d(5319),v=d(3679),X=d(7988),R=d(3328),e=d(8583),F=d(8295),M=d(9899),re=d(6627),ee=d(9983);function V(U,H){if(1&U){const g=i.EpF();i.TgZ(0,"div"),i.TgZ(1,"button",22),i.NdJ("click",function(){i.CHM(g);const q=i.oxw().$implicit;return i.oxw().removeForm(q)}),i._UZ(2,"img",23),i.qZA(),i.qZA()}}function ne(U,H){if(1&U){const g=i.EpF();i.TgZ(0,"div",7),i.TgZ(1,"fieldset",8),i.TgZ(2,"div",9),i.TgZ(3,"label",10),i._UZ(4,"input",11),i.qZA(),i.TgZ(5,"label",12),i._UZ(6,"input",13),i.qZA(),i.TgZ(7,"div",14),i.TgZ(8,"h2",15),i._uU(9,"Date "),i.qZA(),i.TgZ(10,"mat-form-field",16),i.TgZ(11,"mat-datepicker-toggle",17),i.TgZ(12,"mat-icon",18),i._UZ(13,"img",19),i.qZA(),i.qZA(),i._UZ(14,"mat-datepicker",null,20),i.TgZ(16,"input",21),i.NdJ("click",function(){return i.CHM(g),i.MAs(15).open()}),i.qZA(),i.qZA(),i.qZA(),i.YNc(17,V,3,0,"div",5),i.qZA(),i.qZA(),i.qZA()}if(2&U){const g=H.index,S=i.MAs(15),q=i.oxw();i.ekj("aitionalForm",g>0),i.xp6(1),i.Q6J("formGroupName",g),i.xp6(10),i.Q6J("for",S),i.xp6(5),i.Q6J("matDatepicker",S)("readonly",!0)("max",q.todayDate),i.xp6(1),i.Q6J("ngIf",g>0)}}function oe(U,H){if(1&U){const g=i.EpF();i.ynx(0),i.TgZ(1,"button",24),i.NdJ("click",function(){return i.CHM(g),i.oxw().back.emit()}),i._uU(2,"PREVIOUS"),i.qZA(),i.TgZ(3,"button",25),i.NdJ("click",function(){return i.CHM(g),i.oxw().onSubmit()}),i._uU(4,"NEXT"),i.qZA(),i.BQk()}}function u(U,H){if(1&U){const g=i.EpF();i.TgZ(0,"button",26),i.NdJ("click",function(){return i.CHM(g),i.oxw().updateCertificates()}),i._uU(1,"Update information "),i.qZA()}}let W=(()=>{class U{constructor(g,S,q){this.fb=g,this.registrationService=S,this.storageService=q,this.subscription=new N.w,this.back=new i.vpe,this.next=new i.vpe,this.isLoggedIn=!0,this.actionType="CREATE",this.todayDate=new Date}ngOnInit(){this.formInitialization(),this.registrationService.getCertificates(this.storageService.getUserId()).subscribe(g=>{g.length>0?(this.actionType="UPDATE",this.patchFormValue(g)):this.actionType="CREATE"})}formInitialization(){const g=this.createNewForm();this.updateValueAndValidity(g),this.form=this.fb.group({formArray:this.fb.array([g])}),this.formArray.updateValueAndValidity()}createNewForm(){return this.fb.group({institutionName:[null,[v.kI.required,v.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],qualification:[null,[v.kI.required,v.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],date:[null,[v.kI.required]],userId:[this.storageService.getUserId()],id:[]})}get formArray(){return this.form.get("formArray")}addNewForm(){const g=this.createNewForm();this.updateValueAndValidity(g),this.formArray.controls.push(g),this.formArray.updateValueAndValidity()}onSubmit(){"CREATE"===this.actionType?this.saveCertificates():this.updateCertificates()}updateValueAndValidity(g){this.subscription.add(g.valueChanges.subscribe(()=>this.formArray.updateValueAndValidity()))}removeForm(g){this.formArray.controls=this.formArray.controls.filter(S=>S!==g),this.formArray.updateValueAndValidity()}saveCertificates(){const g=this.checkIfEmpty();this.subscription.add(this.registrationService.saveCertificates(g).subscribe(()=>this.next.emit()))}updateCertificates(){const g=this.checkIfEmpty();this.subscription.add(this.registrationService.updateCertificates(g).subscribe(()=>this.next.emit()))}checkIfEmpty(){let g=this.formArray.value;return g.forEach(S=>{const q=JSON.parse(JSON.stringify(S));delete q.userId,delete q.id,g=Object.values(q).every(z=>null===z||""===z)?g.filter(z=>z!==S):g}),g=g.length?g:[this.formArray.value[0]],g}patchFormValue(g){this.formArray.controls=[],g.forEach(S=>{let q=this.createNewForm();q.patchValue(S),q.valueChanges.subscribe(()=>this.formArray.updateValueAndValidity()),this.formArray.controls.push(q),this.formArray.updateValueAndValidity()})}ngOnDestroy(){this.subscription.unsubscribe()}}return U.\u0275fac=function(g){return new(g||U)(i.Y36(v.qu),i.Y36(X.g),i.Y36(R.V))},U.\u0275cmp=i.Xpm({type:U,selectors:[["app-certificates"]],inputs:{isLoggedIn:"isLoggedIn"},outputs:{back:"back",next:"next"},decls:9,vars:8,consts:[[1,"flex-item","flex-item-step-min-length"],[1,"multiple-form",3,"formGroup"],["class","formArray","formArrayName","formArray",3,"aitionalForm",4,"ngFor","ngForOf"],["type","button","id","add",1,"add","flex-container-center",3,"click"],[1,"flex-container-center","button-wrapper"],[4,"ngIf"],["type","submit","class","settings-form-button",3,"click",4,"ngIf"],["formArrayName","formArray",1,"formArray"],[1,"register-form",3,"formGroupName"],[1,"register-step-form"],["for","institution-name",1,"form-label"],["id","institution-name","type","text","placeholder","institution name","formControlName","institutionName",1,"form-input"],["for","qualification",1,"form-label"],["id","qualification","type","text","placeholder","qualification","formControlName","qualification",1,"form-input"],[1,"form-label","date-picker-wrapper"],[1,"date-picker-label"],["appearance","fill",1,"date-range-wrapper","custom-date-range-wrapper"],["matSuffix","",3,"for"],["matDatepickerToggleIcon",""],["src","assets/images/calendar.svg","alt","Calendar","width","26","height","28"],["picker1",""],["matInput","","formControlName","date","placeholder","dd/mm/yyyy",3,"matDatepicker","readonly","max","click"],["type","button","id","remove",1,"remove-icon-wrapper",3,"click"],["src","assets/images/recycleBin.png","alt","Remove Row"],[1,"sophist-btn","flex-container-center","previous-btn",3,"click"],[1,"sophist-btn","flex-container-center","next-btn",3,"click"],["type","submit",1,"settings-form-button",3,"click"]],template:function(g,S){1&g&&(i.TgZ(0,"div",0),i.TgZ(1,"div"),i.TgZ(2,"form",1),i.YNc(3,ne,18,8,"div",2),i.qZA(),i.TgZ(4,"button",3),i.NdJ("click",function(){return S.addNewForm()}),i._uU(5," + Add more"),i.qZA(),i.TgZ(6,"div",4),i.YNc(7,oe,5,0,"ng-container",5),i.YNc(8,u,2,0,"button",6),i.qZA(),i.qZA(),i.qZA()),2&g&&(i.xp6(1),i.ekj("margin-left-space",!S.isLoggedIn)("margin-left-onLogged",S.isLoggedIn),i.xp6(1),i.Q6J("formGroup",S.form),i.xp6(1),i.Q6J("ngForOf",S.formArray.controls),i.xp6(4),i.Q6J("ngIf",!S.isLoggedIn),i.xp6(1),i.Q6J("ngIf",S.isLoggedIn))},directives:[v._Y,v.JL,v.sg,e.sg,e.O5,v.CE,v.x0,v.Fj,v.JJ,v.u,F.KE,M.nW,F.R9,re.Hw,M.Q0,M.Mq,ee.Nt,M.hl],styles:[".margin-left-onLogged[_ngcontent-%COMP%]{margin-left:40px}.date-picker-wrapper[_ngcontent-%COMP%]{width:100%;flex-direction:column}.register-step-form[_ngcontent-%COMP%]{position:relative}.register-step-form[_ngcontent-%COMP%]   .remove-icon-wrapper[_ngcontent-%COMP%]{position:absolute;top:-34px;left:5px;padding:8px}"]}),U})()},193:(ge,B,d)=>{d.d(B,{O:()=>ye});var i=d(7716),N=d(5319),v=d(3679),X=d(6332),R=d(7988),e=d(3328),F=d(8583),M=d(9092),re=d(7539),ee=d(8295),V=d(9899),ne=d(6627),oe=d(9983);function u(b,P){1&b&&(i.TgZ(0,"span",36),i._uU(1,"This is a required field "),i.qZA())}function W(b,P){1&b&&(i.TgZ(0,"span",37),i._uU(1,"This is a required field "),i.qZA())}function U(b,P){1&b&&(i.TgZ(0,"span",36),i._uU(1,"This is a required field"),i.qZA())}function H(b,P){1&b&&(i.TgZ(0,"span",36),i._uU(1,"This is a required field"),i.qZA())}function g(b,P){if(1&b){const f=i.EpF();i.TgZ(0,"div",38),i.TgZ(1,"div",39),i.TgZ(2,"div",40),i.TgZ(3,"div",41),i._UZ(4,"img",42),i.qZA(),i.TgZ(5,"input",43),i.NdJ("change",function(k){i.CHM(f);const w=i.oxw().$implicit;return i.oxw().fileUploaded(k.target,w)}),i.qZA(),i.TgZ(6,"p"),i._uU(7),i.qZA(),i.qZA(),i.TgZ(8,"h3",44),i._uU(9,"Please upload an unofficial transcript (the file must be in .pdf format)"),i.qZA(),i.qZA(),i.YNc(10,H,2,0,"span",13),i.qZA()}if(2&b){const f=i.oxw().index,m=i.oxw();let k,w;i.xp6(7),i.Oqu(null==m.formArray.controls[f]||null==(k=m.formArray.controls[f].get("pdfName"))?null:k.value),i.xp6(3),i.Q6J("ngIf",(null==m.formArray.controls[f]||null==(w=m.formArray.controls[f].get("pdfFromInstitution"))?null:w.errors)&&(null==m.formArray.controls[f]||null==(w=m.formArray.controls[f].get("pdfFromInstitution"))?null:w.touched))}}function S(b,P){1&b&&(i.TgZ(0,"span",37),i._uU(1,"This is a required field "),i.qZA())}function q(b,P){1&b&&(i.TgZ(0,"span",36),i._uU(1,"This is a required field"),i.qZA())}function se(b,P){1&b&&(i.TgZ(0,"span",36),i._uU(1,"This is a required field"),i.qZA())}function z(b,P){1&b&&(i.TgZ(0,"span",36),i._uU(1,"This is a required field"),i.qZA())}function _e(b,P){if(1&b){const f=i.EpF();i.TgZ(0,"div"),i.TgZ(1,"button",45),i.NdJ("click",function(){i.CHM(f);const k=i.oxw().$implicit;return i.oxw().removeForm(k)}),i._UZ(2,"img",46),i.qZA(),i.qZA()}}function ve(b,P){if(1&b){const f=i.EpF();i.TgZ(0,"div",7),i.TgZ(1,"fieldset",8),i.TgZ(2,"div",9),i.TgZ(3,"div",10),i.TgZ(4,"label",11),i._UZ(5,"input",12),i.YNc(6,u,2,0,"span",13),i.qZA(),i.TgZ(7,"div",14),i._UZ(8,"app-select",15),i.ALo(9,"async"),i.YNc(10,W,2,0,"span",16),i.qZA(),i.TgZ(11,"label",17),i._UZ(12,"input",18),i.YNc(13,U,2,0,"span",13),i.qZA(),i.TgZ(14,"div",19),i.TgZ(15,"mat-checkbox",20),i._uU(16," Degree in progress "),i.qZA(),i.qZA(),i.YNc(17,g,11,2,"div",21),i.qZA(),i.TgZ(18,"div",10),i.TgZ(19,"div",14),i._UZ(20,"app-select",22),i.ALo(21,"async"),i.YNc(22,S,2,0,"span",16),i.qZA(),i.TgZ(23,"label",23),i._UZ(24,"input",24),i.YNc(25,q,2,0,"span",13),i.qZA(),i.TgZ(26,"div",25),i.TgZ(27,"div",26),i.TgZ(28,"h2",27),i._uU(29,"From "),i.qZA(),i.TgZ(30,"mat-form-field",28),i.TgZ(31,"mat-datepicker-toggle",29),i.TgZ(32,"mat-icon",30),i._UZ(33,"img",31),i.qZA(),i.qZA(),i._UZ(34,"mat-datepicker",null,32),i.TgZ(36,"input",33),i.NdJ("click",function(){return i.CHM(f),i.MAs(35).open()}),i.qZA(),i.qZA(),i.YNc(37,se,2,0,"span",13),i.qZA(),i.TgZ(38,"div",26),i.TgZ(39,"h2",27),i._uU(40,"To "),i.qZA(),i.TgZ(41,"mat-form-field",28),i.TgZ(42,"mat-datepicker-toggle",29),i.TgZ(43,"mat-icon",30),i._UZ(44,"img",31),i.qZA(),i.qZA(),i._UZ(45,"mat-datepicker",null,34),i.TgZ(47,"input",35),i.NdJ("click",function(){return i.CHM(f),i.MAs(46).open()}),i.qZA(),i.qZA(),i.YNc(48,z,2,0,"span",13),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.YNc(49,_e,3,0,"div",5),i.qZA(),i.qZA()}if(2&b){const f=P.$implicit,m=P.index,k=i.MAs(35),w=i.MAs(46),T=i.oxw();let O,$,Q,j,E,J,D,L,ae,me,ie;i.ekj("aitionalForm",m>0),i.xp6(1),i.Q6J("formGroupName",m),i.xp6(5),i.Q6J("ngIf",(null==T.formArray.controls[m]||null==(O=T.formArray.controls[m].get("name"))?null:O.errors)&&(null==T.formArray.controls[m]||null==(O=T.formArray.controls[m].get("name"))?null:O.touched)),i.xp6(2),i.Q6J("label","education level*")("list",i.lcZ(9,27,T.institutionalLevels$)),i.xp6(2),i.Q6J("ngIf",(null==T.formArray.controls[m]||null==($=T.formArray.controls[m].get("educationalLevel"))?null:$.errors)&&(null==T.formArray.controls[m]||null==($=T.formArray.controls[m].get("educationalLevel"))?null:$.touched)),i.xp6(3),i.Q6J("ngIf",(null==T.formArray.controls[m]||null==(Q=T.formArray.controls[m].get("major"))?null:Q.errors)&&(null==T.formArray.controls[m]||null==(Q=T.formArray.controls[m].get("major"))?null:Q.touched)),i.xp6(4),i.Q6J("ngIf",null==T.formArray.controls[m]||null==(j=T.formArray.controls[m].get("degreeInProgress"))?null:j.value),i.xp6(3),i.Q6J("label","country*")("list",i.lcZ(21,29,T.countries$))("keyName","nameLowerCase"),i.xp6(2),i.Q6J("ngIf",(null==T.formArray.controls[m]||null==(E=T.formArray.controls[m].get("countryId"))?null:E.errors)&&(null==T.formArray.controls[m]||null==(E=T.formArray.controls[m].get("countryId"))?null:E.touched)),i.xp6(3),i.Q6J("ngIf",(null==T.formArray.controls[m]||null==(J=T.formArray.controls[m].get("city"))?null:J.errors)&&(null==T.formArray.controls[m]||null==(J=T.formArray.controls[m].get("city"))?null:J.touched)),i.xp6(6),i.Q6J("for",k),i.xp6(5),i.Q6J("matDatepicker",k)("readonly",!0)("max",(null==T.formArray.controls[m]||null==(D=T.formArray.controls[m].get("graduationDate"))?null:D.value)||T.todayDate),i.xp6(1),i.Q6J("ngIf",(null==T.formArray.controls[m]||null==(L=T.formArray.controls[m].get("startDate"))?null:L.errors)&&(null==T.formArray.controls[m]||null==(L=T.formArray.controls[m].get("startDate"))?null:L.touched)),i.xp6(5),i.Q6J("for",w),i.xp6(5),i.Q6J("matDatepicker",w)("max",T.todayDate)("min",null==T.formArray.controls[m]||null==(ae=T.formArray.controls[m].get("startDate"))?null:ae.value)("readonly",!0)("disabled",!0===(null==(me=f.get("degreeInProgress"))?null:me.value)),i.xp6(1),i.Q6J("ngIf",(null==T.formArray.controls[m]||null==(ie=T.formArray.controls[m].get("graduationDate"))?null:ie.errors)&&(null==T.formArray.controls[m]||null==(ie=T.formArray.controls[m].get("graduationDate"))?null:ie.touched)),i.xp6(1),i.Q6J("ngIf",m>0)}}function Te(b,P){if(1&b){const f=i.EpF();i.TgZ(0,"button",49),i.NdJ("click",function(){return i.CHM(f),i.oxw(2).back.emit()}),i._uU(1," PREVIOUS "),i.qZA()}}function Ze(b,P){if(1&b){const f=i.EpF();i.ynx(0),i.YNc(1,Te,2,0,"button",47),i.TgZ(2,"button",48),i.NdJ("click",function(){return i.CHM(f),i.oxw().onSubmit()}),i._uU(3,"NEXT"),i.qZA(),i.BQk()}if(2&b){const f=i.oxw();i.xp6(1),i.Q6J("ngIf",f.showPrevious)}}function be(b,P){if(1&b){const f=i.EpF();i.TgZ(0,"button",50),i.NdJ("click",function(){return i.CHM(f),i.oxw().updateInstitutions()}),i._uU(1,"Update information "),i.qZA()}}let ye=(()=>{class b{constructor(f,m,k,w){this.fb=f,this.infoService=m,this.registrationService=k,this.storageService=w,this.subscription=new N.w,this.back=new i.vpe,this.next=new i.vpe,this.isLoggedIn=!0,this.showPrevious=!0,this.todayDate=new Date,this.actionType="CREATE"}ngOnInit(){this.formInitialization(),this.initializeSubscriptions()}addNewForm(){const f=this.createNewForm();this.subscribeForFormValueChange(f),this.formArray.controls.push(f)}onSubmit(){this.formArray.valid?"CREATE"===this.actionType?this.saveInstitutions():this.updateInstitutions():this.formArray.markAllAsTouched()}formInitialization(){const f=this.createNewForm();this.subscribeForFormValueChange(f),this.form=this.fb.group({formArray:this.fb.array([f])}),this.formArray.updateValueAndValidity()}get formArray(){return this.form.get("formArray")}createNewForm(){return this.fb.group({name:[null,[v.kI.required,v.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],educationalLevel:[null,[v.kI.required]],countryId:[null,[v.kI.required]],city:[null,[v.kI.required,v.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],major:[null,[v.kI.required,v.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],startDate:[null,[v.kI.required]],graduationDate:[null,[v.kI.required]],degreeInProgress:[!1,[v.kI.required]],pdfFromInstitution:[null],userId:[this.storageService.getUserId()],pdfName:[null],id:[null]})}removeForm(f){this.formArray.controls=this.formArray.controls.filter(m=>m!==f),this.formArray.updateValueAndValidity()}initializeSubscriptions(){this.countries$=this.infoService.getCountries(),this.institutionalLevels$=this.infoService.getInstitutionalLevels(),this.getInstitutionsPage()}getInstitutionsPage(){const f=this.storageService.getUserId();f&&this.subscription.add(this.registrationService.getInstitutionsPage(f).subscribe(m=>{m.length?(this.actionType="UPDATE",this.patchFormValue(m)):this.actionType="CREATE"}))}saveInstitutions(){this.subscription.add(this.registrationService.saveInstitutions(this.formArray.value).subscribe(()=>this.next.emit()))}updateInstitutions(){this.formArray.valid?this.subscription.add(this.registrationService.updateInstitutions(this.formArray.value).subscribe(()=>this.next.emit())):this.form.markAllAsTouched()}patchFormValue(f){this.formArray.controls=[],f.forEach(m=>{let k=this.createNewForm();this.subscribeForFormValueChange(k),k.patchValue(m),this.formArray.controls.push(k),this.formArray.updateValueAndValidity()})}subscribeForFormValueChange(f){this.degreeInProgressChanged(f),this.subscription.add(f.valueChanges.subscribe(m=>{this.formArray.updateValueAndValidity()}))}fileUploaded(f,m){var k;let w=new FileReader,T=f.files[0];w.readAsDataURL(T),null===(k=m.get("pdfName"))||void 0===k||k.setValue(T.name),w.onload=()=>{var O;null===(O=m.get("pdfFromInstitution"))||void 0===O||O.setValue(w.result),this.formArray.updateValueAndValidity()}}degreeInProgressChanged(f){var m;this.subscription.add(null===(m=f.get("degreeInProgress"))||void 0===m?void 0:m.valueChanges.subscribe(k=>{var w,T,O,$,Q,j,E,J,D,L;!0===k?(null===(w=f.get("graduationDate"))||void 0===w||w.reset(),null===(T=f.get("graduationDate"))||void 0===T||T.removeValidators(v.kI.required),null===(O=f.get("pdfFromInstitution"))||void 0===O||O.addValidators(v.kI.required)):(null===($=f.get("graduationDate"))||void 0===$||$.addValidators(v.kI.required),null===(Q=f.get("pdfFromInstitution"))||void 0===Q||Q.removeValidators(v.kI.required),null===(j=f.get("pdfFromInstitution"))||void 0===j||j.updateValueAndValidity(),null===(E=f.get("pdfFromInstitution"))||void 0===E||E.reset(),null===(J=f.get("pdfName"))||void 0===J||J.reset()),null===(D=f.get("graduationDate"))||void 0===D||D.updateValueAndValidity(),null===(L=f.get("pdfFromInstitution"))||void 0===L||L.updateValueAndValidity()}))}ngOnDestroy(){this.subscription.unsubscribe()}}return b.\u0275fac=function(f){return new(f||b)(i.Y36(v.qu),i.Y36(X.M),i.Y36(R.g),i.Y36(e.V))},b.\u0275cmp=i.Xpm({type:b,selectors:[["app-institutions"]],inputs:{isLoggedIn:"isLoggedIn",showPrevious:"showPrevious"},outputs:{back:"back",next:"next"},decls:8,vars:8,consts:[[1,"subjects-form-wrapper"],[1,"subjects-form",3,"formGroup"],["class","formArray","formArrayName","formArray",3,"aitionalForm",4,"ngFor","ngForOf"],["type","button",1,"add","flex-container-center",3,"click"],[1,"flex-container-center","button-wrapper"],[4,"ngIf"],["type","submit","class","settings-form-button",3,"click",4,"ngIf"],["formArrayName","formArray",1,"formArray"],[1,"register-form",3,"formGroupName"],[1,"flex-container-start","register-step-form","row"],[1,"flex-item"],["for","institution-name",1,"form-label"],["id","institution-name","type","text","placeholder","institution name*","formControlName","name",1,"form-input"],["class","error-message",4,"ngIf"],[1,"form-label","fixed-width"],["formControlName","educationalLevel",3,"label","list"],["class","error-message block",4,"ngIf"],["for","major",1,"form-label"],["id","major","type","text","placeholder","major*","formControlName","major",1,"form-input"],[1,"checkboxes-wrapper"],["formControlName","degreeInProgress"],["class","choose-file-wrapper",4,"ngIf"],["formControlName","countryId",3,"label","list","keyName"],["for","city",1,"form-label"],["id","city","type","text","placeholder","city*","formControlName","city",1,"form-input"],[1,"flex-container-start","double-calendar","fixed-width"],[1,"date-picker-wrapper"],[1,"date-picker-label"],["appearance","fill",1,"date-range-wrapper","custom-date-range-wrapper"],["matSuffix","",3,"for"],["matDatepickerToggleIcon",""],["src","assets/images/calendar.svg","alt","Calendar","width","26","height","28"],["picker",""],["matInput","","formControlName","startDate","placeholder","dd/mm/yyyy*",3,"matDatepicker","readonly","max","click"],["picker1",""],["matInput","","formControlName","graduationDate","placeholder","dd/mm/yyyy*",3,"matDatepicker","max","min","readonly","disabled","click"],[1,"error-message"],[1,"error-message","block"],[1,"choose-file-wrapper"],[1,"file-upload"],[1,"file-select"],["id","fileName",1,"file-select-button"],["src","assets/images/pdf.png","alt","Pdf","width","36","height","36"],["type","file","accept","application/pdf","name","chooseFile",1,"chooseFile",3,"change"],[1,"upload-message"],["type","button",1,"remove-icon-wrapper",3,"click"],["src","assets/images/recycleBin.png","alt","Remove Row"],["class","sophist-btn flex-container-center previous-btn",3,"click",4,"ngIf"],[1,"sophist-btn","flex-container-center","next-btn",3,"click"],[1,"sophist-btn","flex-container-center","previous-btn",3,"click"],["type","submit",1,"settings-form-button",3,"click"]],template:function(f,m){1&f&&(i.TgZ(0,"div",0),i.TgZ(1,"form",1),i.YNc(2,ve,50,31,"div",2),i.qZA(),i.TgZ(3,"button",3),i.NdJ("click",function(){return m.addNewForm()}),i._uU(4," + Add more"),i.qZA(),i.TgZ(5,"div",4),i.YNc(6,Ze,4,1,"ng-container",5),i.YNc(7,be,2,0,"button",6),i.qZA(),i.qZA()),2&f&&(i.ekj("margin-left-space",!m.isLoggedIn)("margin-left-onLogged",m.isLoggedIn),i.xp6(1),i.Q6J("formGroup",m.form),i.xp6(1),i.Q6J("ngForOf",m.formArray.controls),i.xp6(4),i.Q6J("ngIf",!m.isLoggedIn),i.xp6(1),i.Q6J("ngIf",m.isLoggedIn))},directives:[v._Y,v.JL,v.sg,F.sg,F.O5,v.CE,v.x0,v.Fj,v.JJ,v.u,M.H,re.oG,ee.KE,V.nW,ee.R9,ne.Hw,V.Q0,V.Mq,oe.Nt,V.hl],pipes:[F.Ov],styles:[".margin-left-onLogged[_ngcontent-%COMP%]{margin-left:40px}.register-step-form[_ngcontent-%COMP%]{grid-gap:24px 84px}.register-step-form[_ngcontent-%COMP%]   .flex-item[_ngcontent-%COMP%]{width:418px}.register-form[_ngcontent-%COMP%]{position:relative;padding-top:35px;margin-top:35px;border-top:1px solid #ccc}.register-form[_ngcontent-%COMP%]:first-child{border:0;margin:0;padding:0}.register-form[_ngcontent-%COMP%]   .remove-icon-wrapper[_ngcontent-%COMP%]{position:absolute;top:-34px;left:5px;padding:8px}.subjects-form-wrapper[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{margin-top:-40px}.subjects-form[_ngcontent-%COMP%]   .formArray[_ngcontent-%COMP%]{padding:35px 0;border-top:1px solid #c4c4c4}.subjects-form[_ngcontent-%COMP%]   .formArray[_ngcontent-%COMP%]:first-child{border:0}.subjects-form[_ngcontent-%COMP%]   .checkboxes-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0}.multiple-form[_ngcontent-%COMP%]   .formArray[_ngcontent-%COMP%]{padding:35px 0;border-top:1px solid #c4c4c4}.multiple-form[_ngcontent-%COMP%]   .formArray[_ngcontent-%COMP%]:first-child{border:0}"]}),b})()},863:(ge,B,d)=>{d.d(B,{P:()=>X});var i=d(7716),N=d(6256),v=d(4655);let X=(()=>{class R{constructor(F,M){this.authService=F,this.router=M}canActivate(F,M){return!!this.authService.isAuthenticated()||(this.router.navigate(["/"]),!1)}}return R.\u0275fac=function(F){return new(F||R)(i.LFG(N.e),i.LFG(v.F0))},R.\u0275prov=i.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})()},4890:(ge,B,d)=>{d.r(B),d.d(B,{TutorModule:()=>Xt});var i=d(8583),N=d(4655),v=d(5319),X=d(5917),R=d(3190),e=d(7716),F=d(3328),M=d(7988),re=d(825),ee=d(5603),V=d(9110);let ne=(()=>{class o{constructor(t,r,n,s,l,p){this.route=t,this.router=r,this.storageService=n,this.registrationService=s,this.messageService=l,this.location=p,this.subscription=new v.w}ngOnInit(){this.subscribeOnRouterChange(),this.stepNumber$=this.registrationService.stepNumber$}subscribeOnRouterChange(){this.subscription.add(this.route.queryParams.pipe((0,R.w)(t=>t.token&&t.userId?(this.storageService.setUserIdInLocalStorage(+t.userId),this.location.replaceState(this.location.path().split("?")[0],""),this.registrationService.confirmEmail(t.userId,t.token)):(0,X.of)(null))).subscribe(t=>{t&&(this.registrationService.stepNumber$.next(2),this.router.navigate(["step-two"],{relativeTo:this.route}))},t=>{"Invalid token error"===t.error.type&&(this.messageService.setNewMessage(t.error.title),this.messageService.setBackToMainPage(!0))}))}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(N.gz),e.Y36(N.F0),e.Y36(F.V),e.Y36(M.g),e.Y36(re.e),e.Y36(i.Ye))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sign-up"]],decls:13,vars:4,consts:[[1,"grid-container"],[1,"content-wrapper"],[1,"register-form-wrapper"],[1,"register-form-wrapper__title"],[3,"stepNumber","stepCount"],[1,"flex-container-start"],[1,"flex-item"],[1,"flex-item","col-md-6","col-xs-12","col-lg-4"],["src","assets/images/illustration.png","alt","Register illustration","width","100","height","100"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-register-header"),e.TgZ(2,"main",1),e.TgZ(3,"section",2),e.TgZ(4,"h2",3),e._uU(5," Tutor application form "),e.qZA(),e._UZ(6,"app-steps",4),e.ALo(7,"async"),e.TgZ(8,"div",5),e.TgZ(9,"div",6),e._UZ(10,"router-outlet"),e.qZA(),e.TgZ(11,"div",7),e._UZ(12,"img",8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("stepNumber",e.lcZ(7,2,r.stepNumber$)||1)("stepCount",5))},directives:[ee.U,V.G,N.lC],pipes:[i.Ov],styles:[""]}),o})(),oe=(()=>{class o{constructor(t){this.registrationService=t}ngOnInit(){this.stepNumber$=this.registrationService.stepNumber$}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(M.g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tutor-sign-up"]],decls:13,vars:4,consts:[[1,"grid-container"],[1,"content-wrapper"],[1,"register-form-wrapper"],[1,"tutor-step-wrapper"],[1,"register-form-wrapper__title"],[3,"stepNumber","stepCount"],[1,"flex-container-center"],[1,"flex-item"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-register-header"),e.TgZ(2,"main",1),e.TgZ(3,"section",2),e.TgZ(4,"section",3),e.TgZ(5,"div"),e.TgZ(6,"h2",4),e._uU(7," Tutor sign up steps "),e.qZA(),e._UZ(8,"app-steps",5),e.ALo(9,"async"),e.qZA(),e.qZA(),e.TgZ(10,"div",6),e.TgZ(11,"div",7),e._UZ(12,"router-outlet"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Q6J("stepNumber",e.lcZ(9,2,r.stepNumber$)||1)("stepCount",3))},directives:[ee.U,V.G,N.lC],pipes:[i.Ov],styles:[""]}),o})();var u=d(3679),W=d(6332),U=d(6275),H=d(8067),g=d(9092);function S(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"Please fill in your first name"),e.qZA())}function q(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"Please fill in your last name"),e.qZA())}function se(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"Please fill in your username"),e.qZA())}function z(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"This username is already registered on Sophist"),e.qZA())}function _e(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"Please specify your gender"),e.qZA())}function ve(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"Please specify month of your birth"),e.qZA())}function Te(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"Please specify year of your birth"),e.qZA())}function Ze(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"This is a required field"),e.qZA())}function be(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"Please enter your email address"),e.qZA())}function ye(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"Please provide a valid email address"),e.qZA())}function b(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"This email is already registered on Sophist"),e.qZA())}function P(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"Please create your password"),e.qZA())}function f(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"Please create your password"),e.qZA())}function m(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"Passwords are not the same"),e.qZA())}let k=(()=>{class o{constructor(t,r,n,s,l,p,a){this.fb=t,this.infosService=r,this.validationService=n,this.registrationService=s,this.storageService=l,this.dateService=p,this.messageService=a,this.subscription=new v.w,this.form={}}ngOnInit(){this.storageService.setUserType(1),this.formInitialization(),this.userId=this.storageService.getUserId(),this.initializeSubscriptions(),this.registrationService.stepNumber$.next(1)}formInitialization(){this.form=this.fb.group({userType:[this.storageService.getUserType()],firstName:[null,[u.kI.required,u.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],lastName:[null,[u.kI.required,u.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],userName:[null,[u.kI.required,u.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],preferredTimeZone:[null,[u.kI.required]],gender:[null,[u.kI.required]],monthOfBirth:[null,[u.kI.required]],yearOfBirth:[null,[u.kI.required]],email:[null,[u.kI.required,u.kI.pattern(this.validationService.emailPattern)]],password:[null,[u.kI.required,u.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],rePassword:[null,[u.kI.required,u.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]]},{validators:this.validationService.checkPasswords})}onSubmit(){this.form.valid?this.saveInformation():this.form.markAllAsTouched()}saveInformation(){this.registrationService.saveInformation(Object.assign(Object.assign({},this.form.value),{userType:1})).subscribe(t=>{this.messageService.setNewMessage(t),this.messageService.setBackToMainPage(!0)})}initializeSubscriptions(){this.genderList$=this.infosService.getGenders(),this.months$=this.infosService.getMonths(),this.yearList=this.dateService.getYears(1930),this.emailIsExist$=this.registrationService.emailIsExist$,this.usernameIsExist$=this.registrationService.usernameIsExist$,this.timeZones$=this.infosService.getTimeZones()}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.qu),e.Y36(W.M),e.Y36(U.R),e.Y36(M.g),e.Y36(F.V),e.Y36(H.R),e.Y36(re.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-step-one"]],decls:49,vars:35,consts:[[1,"flex-item","flex-item-step-min-length"],[1,"margin-left-space"],[1,"register-form",3,"formGroup","submit"],[1,"form-legend"],["for","first-name",1,"form-label"],["id","first-name","type","text","placeholder","first name*","formControlName","firstName",1,"form-input"],["class","error-message",4,"ngIf"],["for","last-name",1,"form-label"],["id","last-name","type","text","placeholder","last name*","formControlName","lastName",1,"form-input"],["for","user-name",1,"form-label"],["id","user-name","type","text","placeholder","user name*","formControlName","userName",1,"form-input"],[1,"gender","fixed-width"],["formControlName","gender",3,"label","list"],[1,"flex-container","form-label","double-select","fixed-width"],[1,"p-relative","min-width-select"],["formControlName","monthOfBirth",3,"label","list","keyName"],["formControlName","yearOfBirth",3,"label","list"],[1,"p-relative","form-label"],["formControlName","preferredTimeZone",3,"label","list","keyName"],["for","email",1,"form-label"],["id","email","autocomplete","username","type","email","placeholder","email address*","formControlName","email",1,"form-input"],["for","password",1,"form-label"],["id","password","autocomplete","new-password","type","password","placeholder","password*","formControlName","password",1,"form-input"],["for","re-enter-password",1,"form-label"],["id","re-enter-password","autocomplete","new-password","type","password","placeholder","re-enter password*","formControlName","rePassword",1,"form-input"],[1,"flex-container-center","button-wrapper"],["type","submit",1,"sophist-btn","flex-container-center","next-btn"],[1,"error-message"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"form",2),e.NdJ("submit",function(){return r.onSubmit()}),e.TgZ(3,"fieldset"),e.TgZ(4,"legend",3),e._uU(5,"Enter your information"),e.qZA(),e.TgZ(6,"label",4),e._UZ(7,"input",5),e.YNc(8,S,2,0,"span",6),e.qZA(),e.TgZ(9,"label",7),e._UZ(10,"input",8),e.YNc(11,q,2,0,"span",6),e.qZA(),e.TgZ(12,"label",9),e._UZ(13,"input",10),e.YNc(14,se,2,0,"span",6),e.YNc(15,z,2,0,"span",6),e.ALo(16,"async"),e.qZA(),e.TgZ(17,"div",11),e._UZ(18,"app-select",12),e.ALo(19,"async"),e.YNc(20,_e,2,0,"span",6),e.qZA(),e.TgZ(21,"div",13),e.TgZ(22,"div",14),e._UZ(23,"app-select",15),e.ALo(24,"async"),e.YNc(25,ve,2,0,"span",6),e.qZA(),e.TgZ(26,"div",14),e._UZ(27,"app-select",16),e.YNc(28,Te,2,0,"span",6),e.qZA(),e.qZA(),e.TgZ(29,"div",17),e._UZ(30,"app-select",18),e.ALo(31,"async"),e.YNc(32,Ze,2,0,"span",6),e.qZA(),e.TgZ(33,"label",19),e._UZ(34,"input",20),e.YNc(35,be,2,0,"span",6),e.YNc(36,ye,2,0,"span",6),e.YNc(37,b,2,0,"span",6),e.ALo(38,"async"),e.qZA(),e.TgZ(39,"label",21),e._UZ(40,"input",22),e.YNc(41,P,2,0,"span",6),e.qZA(),e.TgZ(42,"label",23),e._UZ(43,"input",24),e.YNc(44,f,2,0,"span",6),e.YNc(45,m,2,0,"span",6),e.qZA(),e.qZA(),e.TgZ(46,"div",25),e.TgZ(47,"button",26),e._uU(48,"NEXT"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){let n,s,l,p,a,h,_,Z,x,C,I,Y;e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(6),e.Q6J("ngIf",(null==(n=r.form.get("firstName"))?null:n.errors)&&(null==(n=r.form.get("firstName"))?null:n.touched)),e.xp6(3),e.Q6J("ngIf",(null==(s=r.form.get("lastName"))?null:s.errors)&&(null==(s=r.form.get("lastName"))?null:s.touched)),e.xp6(3),e.Q6J("ngIf",(null==(l=r.form.get("userName"))?null:l.errors)&&(null==(l=r.form.get("userName"))?null:l.touched)),e.xp6(1),e.Q6J("ngIf",e.lcZ(16,25,r.usernameIsExist$)),e.xp6(3),e.Q6J("label","gender*")("list",e.lcZ(19,27,r.genderList$)),e.xp6(2),e.Q6J("ngIf",(null==(p=r.form.get("gender"))?null:p.errors)&&(null==(p=r.form.get("gender"))?null:p.touched)),e.xp6(3),e.Q6J("label","month of birth*")("list",e.lcZ(24,29,r.months$))("keyName","name"),e.xp6(2),e.Q6J("ngIf",(null==(a=r.form.get("monthOfBirth"))?null:a.errors)&&(null==(a=r.form.get("monthOfBirth"))?null:a.touched)),e.xp6(2),e.Q6J("label","year of birth*")("list",r.yearList),e.xp6(1),e.Q6J("ngIf",(null==(h=r.form.get("yearOfBirth"))?null:h.errors)&&(null==(h=r.form.get("yearOfBirth"))?null:h.touched)),e.xp6(2),e.Q6J("label","time zone*")("list",e.lcZ(31,31,r.timeZones$))("keyName","displayName"),e.xp6(2),e.Q6J("ngIf",(null==(_=r.form.get("preferredTimeZone"))?null:_.errors)&&(null==(_=r.form.get("preferredTimeZone"))?null:_.touched)),e.xp6(3),e.Q6J("ngIf",(null==(Z=r.form.get("email"))||null==Z.errors?null:Z.errors.required)&&(null==(Z=r.form.get("email"))?null:Z.touched)),e.xp6(1),e.Q6J("ngIf",(null==(x=r.form.get("email"))||null==x.errors?null:x.errors.pattern)&&(null==(x=r.form.get("email"))?null:x.touched)),e.xp6(1),e.Q6J("ngIf",e.lcZ(38,33,r.emailIsExist$)),e.xp6(4),e.Q6J("ngIf",(null==(C=r.form.get("password"))?null:C.errors)&&(null==(C=r.form.get("password"))?null:C.touched)),e.xp6(3),e.Q6J("ngIf",(null==(I=r.form.get("rePassword"))||null==I.errors?null:I.errors.required)&&(null==(I=r.form.get("rePassword"))?null:I.touched)),e.xp6(1),e.Q6J("ngIf",(null==r.form||null==r.form.errors?null:r.form.errors.notSame)&&(null==(Y=r.form.get("rePassword"))?null:Y.touched)&&!(null!=(Y=r.form.get("rePassword"))&&null!=Y.errors&&Y.errors.required))}},directives:[u._Y,u.JL,u.sg,u.Fj,u.JJ,u.u,i.O5,g.H],pipes:[i.Ov],styles:[".gender[_ngcontent-%COMP%]{margin-bottom:20px;position:relative}"]}),o})();var w=d(193);let T=(()=>{class o{constructor(t,r,n){this.router=t,this.route=r,this.registrationService=n}ngOnInit(){this.registrationService.stepNumber$.next(2)}nextStep(){this.registrationService.stepNumber$.next(3),this.router.navigate(["tutor/signUp/step-three"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(N.F0),e.Y36(N.gz),e.Y36(M.g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-second-step"]],decls:3,vars:2,consts:[[1,"form-legend","margin-left-space"],[3,"isLoggedIn","showPrevious","next"]],template:function(t,r){1&t&&(e.TgZ(0,"legend",0),e._uU(1,"Educational Institutions"),e.qZA(),e.TgZ(2,"app-institutions",1),e.NdJ("next",function(){return r.nextStep()}),e.qZA()),2&t&&(e.xp6(2),e.Q6J("isLoggedIn",!1)("showPrevious",!1))},directives:[w.O],styles:[""]}),o})();var O=d(7598);let $=(()=>{class o{constructor(t,r){this.router=t,this.registrationService=r}ngOnInit(){this.registrationService.stepNumber$.next(3)}nextStep(){this.registrationService.stepNumber$.next(4),this.router.navigate(["tutor/signUp/step-four"])}previousStep(){this.registrationService.stepNumber$.next(2),this.router.navigate(["tutor/signUp/step-two"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(N.F0),e.Y36(M.g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-third-step"]],decls:4,vars:1,consts:[[1,"flex-item","flex-item-step-min-length"],[1,"form-legend","margin-left-space"],[3,"isLoggedIn","next","back"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"legend",1),e._uU(2,"Certificates/Qualification"),e.qZA(),e.TgZ(3,"app-certificates",2),e.NdJ("next",function(){return r.nextStep()})("back",function(){return r.previousStep()}),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("isLoggedIn",!1))},directives:[O.T],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),o})();var Q=d(8307),j=d(2613),E=d(7539),J=d(8295),D=d(9899),L=d(6627),ae=d(9983);function me(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function ie(o,c){if(1&o&&(e.TgZ(0,"mat-radio-button",9),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("",t.description," ")}}function Ne(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function Me(o,c){if(1&o&&(e.TgZ(0,"li",30),e.TgZ(1,"h3",6),e._uU(2,"1.1 How many years of experience do you have as a tutor? "),e.qZA(),e.TgZ(3,"div",7),e.TgZ(4,"mat-radio-group",31),e.YNc(5,ie,2,2,"mat-radio-button",32),e.ALo(6,"async"),e.qZA(),e.YNc(7,Ne,2,0,"span",10),e.qZA(),e.qZA()),2&o){const t=e.oxw();let r;e.xp6(5),e.Q6J("ngForOf",e.lcZ(6,2,t.tutorExperiences$)),e.xp6(2),e.Q6J("ngIf",(null==(r=t.form.get("experienceYears"))?null:r.errors)&&(null==(r=t.form.get("experienceYears"))?null:r.touched))}}function Ue(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function Pe(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function Fe(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function Oe(o,c){if(1&o&&(e.TgZ(0,"li",30),e.TgZ(1,"h3",6),e._uU(2,"2.1 Please choose all that apply"),e.qZA(),e.TgZ(3,"div"),e.TgZ(4,"div",33),e.TgZ(5,"mat-radio-group",34),e.TgZ(6,"mat-radio-button",9),e._uU(7,"Online platforms"),e.qZA(),e.TgZ(8,"mat-radio-button",9),e._uU(9,"Other"),e.qZA(),e.qZA(),e.YNc(10,Pe,2,0,"span",10),e.qZA(),e.TgZ(11,"div",7),e._UZ(12,"input",35),e.YNc(13,Fe,2,0,"span",10),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();let r,n;e.xp6(6),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(2),e.Q6J("ngIf",(null==(r=t.form.get("everTutoredOnline"))?null:r.errors)&&(null==(r=t.form.get("everTutoredOnline"))?null:r.touched)),e.xp6(3),e.Q6J("ngIf",(null==(n=t.form.get("onlineTutoringVariant"))?null:n.errors)&&(null==(n=t.form.get("onlineTutoringVariant"))?null:n.touched))}}function Ee(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"mat-checkbox",36),e.NdJ("change",function(n){const l=e.CHM(t).$implicit;return e.oxw().selectStudentType(n,l)}),e._uU(1),e.qZA()}if(2&o){const t=c.$implicit;e.Q6J("checked",t.checked),e.xp6(1),e.hij(" ",t.description," ")}}function Je(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function Ye(o,c){if(1&o&&(e.TgZ(0,"mat-radio-button",37),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.description)}}function Re(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function De(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function He(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function Qe(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function Le(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().removeInterview(n)}),e._UZ(1,"img",48),e.qZA()}}function $e(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"i",49),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addInterview()}),e.qZA()}}function je(o,c){if(1&o&&(e.ynx(0),e.TgZ(1,"div",38),e.TgZ(2,"div",39),e.TgZ(3,"div",40),e._UZ(4,"app-select",41),e.ALo(5,"async"),e.YNc(6,De,2,0,"span",10),e.qZA(),e.TgZ(7,"div",40),e._UZ(8,"app-select",42),e.ALo(9,"async"),e.YNc(10,He,2,0,"span",10),e.qZA(),e.TgZ(11,"div",40),e._UZ(12,"app-select",43),e.ALo(13,"async"),e.YNc(14,Qe,2,0,"span",10),e.qZA(),e.TgZ(15,"div",44),e.YNc(16,Le,2,0,"div",45),e.YNc(17,$e,1,0,"i",46),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&o){const t=c.index,r=e.oxw();let n,s,l;e.xp6(2),e.Q6J("formGroupName",t),e.xp6(2),e.Q6J("label","Days of week*")("list",e.lcZ(5,15,r.daysOfWeek$))("keyName","name"),e.xp6(2),e.Q6J("ngIf",(null==r.interview.controls[t]||null==(n=r.interview.controls[t].get("dayOfWeek"))?null:n.errors)&&(null==r.interview.controls[t]||null==(n=r.interview.controls[t].get("dayOfWeek"))?null:n.touched)),e.xp6(2),e.Q6J("label","Hours of day*")("list",e.lcZ(9,17,r.hoursOfDay$))("keyName","time"),e.xp6(2),e.Q6J("ngIf",(null==r.interview.controls[t]||null==(s=r.interview.controls[t].get("startOfRange"))?null:s.errors)&&(null==r.interview.controls[t]||null==(s=r.interview.controls[t].get("startOfRange"))?null:s.touched)),e.xp6(2),e.Q6J("label","Hours of day*")("list",e.lcZ(13,19,r.hoursOfDay$))("keyName","time"),e.xp6(2),e.Q6J("ngIf",(null==r.interview.controls[t]||null==(l=r.interview.controls[t].get("endOfRange"))?null:l.errors)&&(null==r.interview.controls[t]||null==(l=r.interview.controls[t].get("endOfRange"))?null:l.touched)),e.xp6(2),e.Q6J("ngIf",t>0),e.xp6(1),e.Q6J("ngIf",t==r.interview.controls.length-1)}}function Ve(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function Be(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function We(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function ze(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function Ge(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function Ke(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"i",49),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).addWorkHistory()}),e.qZA()}}function Xe(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).removeWorkHistory(n)}),e._UZ(1,"img",48),e.qZA()}}function et(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",51),e.TgZ(2,"div",52),e.TgZ(3,"div",53),e.TgZ(4,"div",54),e._UZ(5,"input",55),e.YNc(6,Be,2,0,"span",10),e.qZA(),e.qZA(),e.TgZ(7,"div",56),e.TgZ(8,"div",57),e.TgZ(9,"h2",58),e._uU(10,"From"),e.qZA(),e.TgZ(11,"mat-form-field",59),e.TgZ(12,"mat-datepicker-toggle",60),e.TgZ(13,"mat-icon",61),e._UZ(14,"img",62),e.qZA(),e.qZA(),e._UZ(15,"mat-datepicker",null,63),e.TgZ(17,"input",64),e.NdJ("click",function(){return e.CHM(t),e.MAs(16).open()}),e.qZA(),e.qZA(),e.YNc(18,We,2,0,"span",10),e.qZA(),e.TgZ(19,"div",57),e.TgZ(20,"h2",58),e._uU(21,"To "),e.qZA(),e.TgZ(22,"mat-form-field",59),e.TgZ(23,"mat-datepicker-toggle",60),e.TgZ(24,"mat-icon",61),e._UZ(25,"img",62),e.qZA(),e.qZA(),e._UZ(26,"mat-datepicker",null,65),e.TgZ(28,"input",66),e.NdJ("click",function(){return e.CHM(t),e.MAs(27).open()}),e.qZA(),e.qZA(),e.YNc(29,ze,2,0,"span",10),e.qZA(),e.TgZ(30,"div",67),e.TgZ(31,"mat-checkbox",68),e._uU(32," current "),e.qZA(),e.YNc(33,Ge,2,0,"span",10),e.qZA(),e.qZA(),e.TgZ(34,"div",44),e.YNc(35,Ke,1,0,"i",46),e.YNc(36,Xe,2,0,"div",45),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&o){const t=c.index,r=e.MAs(16),n=e.MAs(27),s=e.oxw(2);let l,p,a,h,_,Z;e.xp6(2),e.Q6J("formGroupName",t),e.xp6(4),e.Q6J("ngIf",(null==s.workHistory.controls[t]||null==(l=s.workHistory.controls[t].get("schoolOrInstitutionName"))?null:l.errors)&&(null==s.workHistory.controls[t]||null==(l=s.workHistory.controls[t].get("schoolOrInstitutionName"))?null:l.touched)),e.xp6(6),e.Q6J("for",r),e.xp6(5),e.Q6J("matDatepicker",r)("readonly",!0)("max",(null==s.workHistory.controls[t]||null==(p=s.workHistory.controls[t].get("endYear"))?null:p.value)||s.todayDate),e.xp6(1),e.Q6J("ngIf",(null==s.workHistory.controls[t]||null==(a=s.workHistory.controls[t].get("startYear"))?null:a.errors)&&(null==s.workHistory.controls[t]||null==(a=s.workHistory.controls[t].get("startYear"))?null:a.touched)),e.xp6(5),e.Q6J("for",n),e.xp6(5),e.Q6J("matDatepicker",n)("max",s.todayDate)("min",null==s.workHistory.controls[t]||null==(h=s.workHistory.controls[t].get("startYear"))?null:h.value)("readonly",!0),e.xp6(1),e.Q6J("ngIf",(null==s.workHistory.controls[t]||null==(_=s.workHistory.controls[t].get("endYear"))?null:_.errors)&&(null==s.workHistory.controls[t]||null==(_=s.workHistory.controls[t].get("endYear"))?null:_.touched)),e.xp6(4),e.Q6J("ngIf",(null==s.workHistory.controls[t]||null==(Z=s.workHistory.controls[t].get("current"))?null:Z.errors)&&(null==s.workHistory.controls[t]||null==(Z=s.workHistory.controls[t].get("current"))?null:Z.touched)),e.xp6(2),e.Q6J("ngIf",t==s.workHistory.controls.length-1),e.xp6(1),e.Q6J("ngIf",t>0)}}function tt(o,c){if(1&o&&(e.TgZ(0,"div"),e.TgZ(1,"h3",22),e._uU(2,"Please list work history, starting from the most recent institution/school."),e.qZA(),e.TgZ(3,"div",50),e.YNc(4,et,37,16,"ng-container",19),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.workHistory.controls)}}function rt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().removeReferencesForInstructor(n)}),e._UZ(1,"img",48),e.qZA()}}function it(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function nt(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function ot(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function st(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"Please provide a valid email address"),e.qZA())}function at(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function lt(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function ct(o,c){if(1&o&&(e.TgZ(0,"div",69),e.TgZ(1,"div",70),e.TgZ(2,"div",71),e.TgZ(3,"div",72),e.TgZ(4,"h2",73),e._uU(5),e.qZA(),e.YNc(6,rt,2,0,"div",45),e.qZA(),e.TgZ(7,"label",74),e._UZ(8,"input",75),e.YNc(9,it,2,0,"span",10),e.qZA(),e.TgZ(10,"label",76),e._UZ(11,"input",77),e.YNc(12,nt,2,0,"span",10),e.qZA(),e.TgZ(13,"label",78),e._UZ(14,"input",79),e.YNc(15,ot,2,0,"span",10),e.YNc(16,st,2,0,"span",10),e.qZA(),e.TgZ(17,"div",80),e.TgZ(18,"div",81),e.TgZ(19,"div",82),e._UZ(20,"app-select",83),e.ALo(21,"async"),e.YNc(22,at,2,0,"span",10),e.qZA(),e.TgZ(23,"label",84),e._UZ(24,"input",85),e.YNc(25,lt,2,0,"span",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const t=c.index,r=e.oxw();let n,s,l,p,a,h;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(4),e.hij("Professional reference ",t+1,""),e.xp6(1),e.Q6J("ngIf",t>1),e.xp6(3),e.Q6J("ngIf",(null==r.professionalReferencesForInstructor.controls[t]||null==(n=r.professionalReferencesForInstructor.controls[t].get("name"))?null:n.errors)&&(null==r.professionalReferencesForInstructor.controls[t]||null==(n=r.professionalReferencesForInstructor.controls[t].get("name"))?null:n.touched)),e.xp6(3),e.Q6J("ngIf",(null==r.professionalReferencesForInstructor.controls[t]||null==(s=r.professionalReferencesForInstructor.controls[t].get("lastName"))?null:s.errors)&&(null==r.professionalReferencesForInstructor.controls[t]||null==(s=r.professionalReferencesForInstructor.controls[t].get("lastName"))?null:s.touched)),e.xp6(3),e.Q6J("ngIf",(null==r.professionalReferencesForInstructor.controls[t]||null==(l=r.professionalReferencesForInstructor.controls[t].get("emailAddress"))||null==l.errors?null:l.errors.required)&&(null==r.professionalReferencesForInstructor.controls[t]||null==(l=r.professionalReferencesForInstructor.controls[t].get("emailAddress"))?null:l.touched)),e.xp6(1),e.Q6J("ngIf",(null==r.professionalReferencesForInstructor.controls[t]||null==(p=r.professionalReferencesForInstructor.controls[t].get("emailAddress"))||null==p.errors?null:p.errors.pattern)&&(null==r.professionalReferencesForInstructor.controls[t]||null==(p=r.professionalReferencesForInstructor.controls[t].get("emailAddress"))?null:p.touched)),e.xp6(4),e.Q6J("list",e.lcZ(21,12,r.phoneCods$))("label","+374")("keyName","numCodeForView"),e.xp6(2),e.Q6J("ngIf",(null==r.professionalReferencesForInstructor.controls[t]||null==(a=r.professionalReferencesForInstructor.controls[t].get("numberId"))?null:a.errors)&&(null==r.professionalReferencesForInstructor.controls[t]||null==(a=r.professionalReferencesForInstructor.controls[t].get("numberId"))?null:a.touched)),e.xp6(3),e.Q6J("ngIf",(null==r.professionalReferencesForInstructor.controls[t]||null==(h=r.professionalReferencesForInstructor.controls[t].get("mobilePhone"))?null:h.errors)&&(null==r.professionalReferencesForInstructor.controls[t]||null==(h=r.professionalReferencesForInstructor.controls[t].get("mobilePhone"))?null:h.touched))}}let ut=(()=>{class o{constructor(t,r,n,s,l,p){this.fb=t,this.infoService=r,this.registrationService=n,this.validationService=s,this.storageService=l,this.router=p,this.subscription=new v.w,this.actionType="CREATE",this.todayDate=new Date}ngOnInit(){this.formInitialization(),this.initializeListeners(),this.registrationService.stepNumber$.next(4)}formInitialization(){const t=this.fb.group({schoolOrInstitutionName:[null],startYear:[null],endYear:[null],current:[!1]});this.form=this.fb.group({id:[null],userId:[this.storageService.getUserId()],everTutored:[null,[u.kI.required]],experienceYears:[null],everTutoredOnline:[null,[u.kI.required]],hoursPerWeekCurrently:[null,[u.kI.required]],onlineTutoringVariant:[null],linkTutorAndStudentTypes:[null,[u.kI.required]],wantToBeInstructor:[null,[u.kI.required]],interview:this.fb.array([this.newInterview()]),workHistory:this.fb.array([t]),professionalReferencesForInstructor:this.fb.array([this.newProfessionalReferencesForInstructor(),this.newProfessionalReferencesForInstructor()])}),this.wantToBeInstructorChanged(t)}get interview(){return this.form.get("interview")}get workHistory(){return this.form.get("workHistory")}get professionalReferencesForInstructor(){return this.form.get("professionalReferencesForInstructor")}addInterview(){this.interview.push(this.newInterview())}addProfessionalReferencesForInstructor(){this.professionalReferencesForInstructor.push(this.newProfessionalReferencesForInstructor())}addWorkHistory(){this.workHistory.push(this.newWorkHistory())}newInterview(){return this.fb.group({dayOfWeek:[null,[u.kI.required]],startOfRange:[null,[u.kI.required]],endOfRange:[null,[u.kI.required]]})}newWorkHistory(){const t=this.fb.group({schoolOrInstitutionName:[null,[u.kI.required]],startYear:[null,[u.kI.required]],endYear:[null,[u.kI.required]],current:[!1,[u.kI.required]]});return this.wantToBeInstructorChanged(t),t}newProfessionalReferencesForInstructor(){return this.fb.group({name:[null,[u.kI.required,u.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],lastName:[null,[u.kI.required,u.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],emailAddress:[null,[u.kI.required,u.kI.pattern(this.validationService.emailPattern),u.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],mobilePhone:[null],numberId:[null]})}onSubmit(){if(this.form.valid){let t=[];this.studentLevels.forEach(r=>{r.checked&&t.push({studentType:r.id})}),"CREATE"===this.actionType?this.savePreferences(t):this.updatePreferences(t)}else this.form.markAllAsTouched()}savePreferences(t){this.subscription.add(this.registrationService.savePreferences(Object.assign(Object.assign({},this.form.value),{workHistory:this.form.value.wantToBeInstructor?this.form.value.workHistory:null,linkTutorAndStudentTypes:t})).subscribe(()=>this.nextStep()))}updatePreferences(t){this.subscription.add(this.registrationService.updatePreferences(Object.assign(Object.assign({},this.form.value),{workHistory:this.form.value.wantToBeInstructor?this.form.value.workHistory:null,linkTutorAndStudentTypes:t})).subscribe(()=>this.nextStep()))}selectStudentType(t,r){this.updateStudentTypeList(t,r),this.checkStudentLevelAndUpdateForm()}checkStudentLevelAndUpdateForm(){var t;let r=!0;this.studentLevels.forEach(n=>{n.checked&&(r=!1)}),r&&(null===(t=this.form.get("linkTutorAndStudentTypes"))||void 0===t||t.setValue(null))}updateStudentTypeList(t,r){var n;let s=this.studentLevels.find(l=>l===r);t.checked?(s&&(s.checked=!0),null===(n=this.form.get("linkTutorAndStudentTypes"))||void 0===n||n.setValue(!0)):s&&(s.checked=!1)}removeInterview(t){this.interview.controls=this.interview.controls.filter(r=>r!=t),this.interview.updateValueAndValidity()}removeWorkHistory(t){this.workHistory.controls=this.workHistory.controls.filter(r=>r!=t),this.workHistory.updateValueAndValidity()}removeReferencesForInstructor(t){this.professionalReferencesForInstructor.controls=this.professionalReferencesForInstructor.controls.filter(r=>r!=t),this.professionalReferencesForInstructor.updateValueAndValidity()}initializeListeners(){this.getStudentLevels(),this.phoneCods$=this.infoService.getCountries(),this.hoursPerWeekForTutor$=this.infoService.getHoursPerWeekForTutor(),this.daysOfWeek$=this.infoService.getDaysOfWeek(),this.hoursOfDay$=this.infoService.getHoursOfDay(),this.tutorExperiences$=this.infoService.getTutorExperiences(),this.subscribeToEverTutoredValueChange(),this.subscribeToEverTutoredOnlineValueChange(),this.subscribeToWantToBeInstructorValueChange()}getStudentLevels(){this.infoService.getStudentLevels().pipe((0,Q.b)(t=>{this.studentLevels=t.map(r=>{let n=r;return n.checked=!1,n})})).subscribe(()=>{this.getPreferencesPage()})}getPreferencesPage(){this.subscription.add(this.registrationService.getPreferencesPage(this.storageService.getUserId()).subscribe(t=>{t?(t.linkTutorAndStudentTypes.forEach(r=>{var n,s;let l=null===(n=this.studentLevels)||void 0===n?void 0:n.find(p=>p.id===r.studentType);l&&(l.checked=!0,null===(s=this.form.get("linkTutorAndStudentTypes"))||void 0===s||s.setValue(!0))}),this.actionType="UPDATE",this.form.patchValue(t),this.patchInterview(t),this.patchWorkHistory(t),this.patchProfessionalReferencesForInstructor(t)):this.actionType="CREATE"}))}patchInterview(t){t.interview.length&&(this.interview.controls=[],t.interview.forEach(r=>{var n;const s=this.newInterview();s.patchValue(r),null===(n=this.interview)||void 0===n||n.controls.push(s)}),this.interview.updateValueAndValidity())}patchWorkHistory(t){t.workHistory.length&&(this.workHistory.controls=[],t.workHistory.forEach(r=>{var n;const s=this.newWorkHistory();s.patchValue(r),null===(n=this.workHistory)||void 0===n||n.controls.push(s)}),this.workHistory.updateValueAndValidity())}patchProfessionalReferencesForInstructor(t){t.professionalReferencesForInstructor.length&&(this.professionalReferencesForInstructor.controls=[],t.professionalReferencesForInstructor.forEach(r=>{var n;const s=this.newProfessionalReferencesForInstructor();s.patchValue(r),null===(n=this.professionalReferencesForInstructor)||void 0===n||n.controls.push(s)}),this.professionalReferencesForInstructor.updateValueAndValidity())}subscribeToEverTutoredValueChange(){var t;null===(t=this.form.get("everTutored"))||void 0===t||t.valueChanges.subscribe(r=>{var n,s;r?null===(n=this.form.get("experienceYears"))||void 0===n||n.setValidators(u.kI.required):null===(s=this.form.get("experienceYears"))||void 0===s||s.removeValidators(u.kI.required)})}subscribeToEverTutoredOnlineValueChange(){var t;null===(t=this.form.get("everTutoredOnline"))||void 0===t||t.valueChanges.subscribe(r=>{var n,s;r?null===(n=this.form.get("onlineTutoringVariant"))||void 0===n||n.setValidators(u.kI.required):null===(s=this.form.get("onlineTutoringVariant"))||void 0===s||s.removeValidators(u.kI.required)})}subscribeToWantToBeInstructorValueChange(){var t;null===(t=this.form.get("wantToBeInstructor"))||void 0===t||t.valueChanges.subscribe(r=>{this.workHistory.controls.forEach(r?n=>{var s,l,p,a;null===(s=n.get("startYear"))||void 0===s||s.setValidators(u.kI.required),null===(l=n.get("schoolOrInstitutionName"))||void 0===l||l.setValidators(u.kI.required),null===(p=n.get("endYear"))||void 0===p||p.setValidators(u.kI.required),null===(a=n.get("current"))||void 0===a||a.setValidators(u.kI.required)}:n=>{var s,l,p,a,h,_,Z,x;null===(s=n.get("startYear"))||void 0===s||s.clearValidators(),null===(l=n.get("startYear"))||void 0===l||l.updateValueAndValidity(),null===(p=n.get("schoolOrInstitutionName"))||void 0===p||p.clearValidators(),null===(a=n.get("schoolOrInstitutionName"))||void 0===a||a.updateValueAndValidity(),null===(h=n.get("endYear"))||void 0===h||h.clearValidators(),null===(_=n.get("endYear"))||void 0===_||_.updateValueAndValidity(),null===(Z=n.get("current"))||void 0===Z||Z.clearValidators(),null===(x=n.get("current"))||void 0===x||x.updateValueAndValidity()})})}wantToBeInstructorChanged(t){var r;this.subscription.add(null===(r=t.get("current"))||void 0===r?void 0:r.valueChanges.subscribe(n=>{var s,l,p,a,h,_,Z;!0===n?(null===(s=t.get("endYear"))||void 0===s||s.reset(),null===(l=t.get("endYear"))||void 0===l||l.removeValidators(u.kI.required),null===(p=t.get("endYear"))||void 0===p||p.disable(),null===(a=t.get("endYear"))||void 0===a||a.updateValueAndValidity()):(null===(h=t.get("endYear"))||void 0===h||h.enable(),null===(_=t.get("endYear"))||void 0===_||_.addValidators(u.kI.required)),null===(Z=t.get("endYear"))||void 0===Z||Z.updateValueAndValidity()}))}nextStep(){this.registrationService.stepNumber$.next(5),this.router.navigate(["tutor/signUp/step-five"])}previousStep(){this.registrationService.stepNumber$.next(3),this.router.navigate(["tutor/signUp/step-three"])}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.qu),e.Y36(W.M),e.Y36(M.g),e.Y36(U.R),e.Y36(F.V),e.Y36(N.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-fourth-step"]],decls:74,vars:21,consts:[[1,"margin-left-space"],[3,"formGroup"],[1,"register-form"],[1,"form-legend"],[1,"question-list"],[1,"question-list__item"],[1,"main-question"],[1,"checkboxes-wrapper-flex","checkboxes-wrapper-flex-with-min-width"],["name","everTutored","formControlName","everTutored",1,"everTutored"],[3,"value"],["class","error-message",4,"ngIf"],["class","nested",4,"ngIf"],["name","everTutoredOnline","formControlName","everTutoredOnline",1,"everTutoredOnline"],[1,"sub-question"],[1,"grid-3-template"],["class","checkbox-wrapper",3,"checked","change",4,"ngFor","ngForOf"],["name","hoursPe  rWeekCurrently","formControlName","hoursPerWeekCurrently"],["class","hoursPerWeekForTutor",3,"value",4,"ngFor","ngForOf"],[1,"flex-container-justify-start","flex-wrap"],[4,"ngFor","ngForOf"],["name","wantToBeInstructor","formControlName","wantToBeInstructor",1,"everTutoredOnline"],[4,"ngIf"],[1,"warning-title"],[1,"flex-container-start","register-step-form","row","no-gutter"],["class","flex-item col-md-6","formArrayName","professionalReferencesForInstructor",4,"ngFor","ngForOf"],[1,"add","flex-container-center",3,"click"],[1,"flex-container-center","button-wrapper"],["type","button",1,"sophist-btn","flex-container-center","previous-btn",3,"click"],["type","submit",1,"sophist-btn","flex-container-center","next-btn",3,"click"],[1,"error-message"],[1,"nested"],["name","experienceYears","formControlName","experienceYears",1,"everTutored"],[3,"value",4,"ngFor","ngForOf"],[1,"checkboxes-wrapper-flex","grid-1-template","checkboxes-wrapper-flex-with-min-width"],["name","allToApply ","formControlName","allToApply",1,"allToApply"],["type","text","formControlName","onlineTutoringVariant","placeholder","Enter the option",1,"form-input"],[1,"checkbox-wrapper",3,"checked","change"],[1,"hoursPerWeekForTutor",3,"value"],["formArrayName","interview"],[1,"d-flex","align-items-center","selectRow","gap-3","grid-gap-10",3,"formGroupName"],[1,"selectWrapper"],["formControlName","dayOfWeek",3,"label","list","keyName"],["formControlName","startOfRange",3,"label","list","keyName"],["formControlName","endOfRange",3,"label","list","keyName"],[1,"flex-container","grid-gap-for-icons"],["class","recycle-bin-wrapper",3,"click",4,"ngIf"],["class","fas fa-plus",3,"click",4,"ngIf"],[1,"recycle-bin-wrapper",3,"click"],["src","./assets/images/recycleBin.png","alt","recycle byn",1,"trashIcon"],[1,"fas","fa-plus",3,"click"],[1,"flex-container-justify-start","grid-gap-space","flex-wrap"],["formArrayName","workHistory"],[1,"d-flex","selectRow","flex-wrap","mb-20",3,"formGroupName"],[1,"nested-form-item","grid-gap-10","mb-0"],[1,"form-label-nested-content"],["type","text","formControlName","schoolOrInstitutionName","placeholder","name of the Institution/school*",1,"form-input"],[1,"d-flex","align-items-end","grid-gap-10"],[1,"date-picker-wrapper-for-calendar","position-relative"],[1,"date-picker-label"],["appearance","fill",1,"date-range-wrapper","custom-date-range-wrapper"],["matSuffix","",3,"for"],["matDatepickerToggleIcon",""],["src","assets/images/calendar.svg","alt","Calendar","width","26","height","28"],["picker",""],["matInput","","formControlName","startYear","placeholder","mm/dd/yyyy*",3,"matDatepicker","readonly","max","click"],["picker1",""],["matInput","","formControlName","endYear","placeholder","mm/dd/yyyy*",3,"matDatepicker","max","min","readonly","click"],[1,"p-relative"],["formControlName","current",1,"checkbox-wrapper"],["formArrayName","professionalReferencesForInstructor",1,"flex-item","col-md-6"],[3,"formGroupName"],[1,""],[1,"flex-container","justify-content-between","mb-20"],[1,"form-title","m-0"],["for","first-name",1,"form-label"],["id","first-name","type","text","placeholder","First Name*","formControlName","name",1,"form-input"],["for","last-name",1,"form-label"],["id","last-name","type","text","placeholder","Last Name*","formControlName","lastName",1,"form-input"],["for","email",1,"form-label"],["id","email","autocomplete","username","type","email","placeholder","Email Address*","formControlName","emailAddress",1,"form-input"],[1,"tutor-contact","wrapper-for-contact"],[1,"d-flex","position-relative"],[1,"form-label","phone-number-label","form-label--min-width","w-25"],["formControlName","numberId",3,"list","label","keyName"],["for","phone-number",1,"form-label","phone-number-label","phone-number-label-input"],["id","phone-number","autocomplete","phone-number","type","tel","placeholder","Mobile phone","formControlName","mobilePhone",1,"form-input"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"form",1),e.TgZ(2,"fieldset",2),e.TgZ(3,"legend",3),e._uU(4,"Tutoring Preferences/Employment History"),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"ol"),e.TgZ(7,"li",5),e.TgZ(8,"h3",6),e._uU(9,"Have you ever been a tutor?"),e.qZA(),e.TgZ(10,"div",7),e.TgZ(11,"mat-radio-group",8),e.TgZ(12,"mat-radio-button",9),e._uU(13,"Yes"),e.qZA(),e.TgZ(14,"mat-radio-button",9),e._uU(15,"No"),e.qZA(),e.qZA(),e.YNc(16,me,2,0,"span",10),e.qZA(),e.TgZ(17,"ol"),e.YNc(18,Me,8,4,"li",11),e.qZA(),e.qZA(),e.TgZ(19,"li",5),e.TgZ(20,"h3",6),e._uU(21,"Have you ever tutored online?"),e.qZA(),e.TgZ(22,"div",7),e.TgZ(23,"mat-radio-group",12),e.TgZ(24,"mat-radio-button",9),e._uU(25,"Yes"),e.qZA(),e.TgZ(26,"mat-radio-button",9),e._uU(27,"No"),e.qZA(),e.qZA(),e.YNc(28,Ue,2,0,"span",10),e.qZA(),e.TgZ(29,"ol"),e.YNc(30,Oe,14,4,"li",11),e.qZA(),e.qZA(),e.TgZ(31,"li",5),e.TgZ(32,"h3",6),e._uU(33,"Which type of students do you like to tutor?"),e.qZA(),e.TgZ(34,"h5",13),e._uU(35,"(You can choose more than one value)"),e.qZA(),e.TgZ(36,"div",14),e.YNc(37,Ee,2,2,"mat-checkbox",15),e.YNc(38,Je,2,0,"span",10),e.qZA(),e.qZA(),e.TgZ(39,"li",5),e.TgZ(40,"h3",6),e._uU(41,"How many hours per week do you currently tutor?"),e.qZA(),e.TgZ(42,"div",14),e.TgZ(43,"mat-radio-group",16),e.YNc(44,Ye,2,2,"mat-radio-button",17),e.ALo(45,"async"),e.qZA(),e.YNc(46,Re,2,0,"span",10),e.qZA(),e.qZA(),e.TgZ(47,"li",5),e.TgZ(48,"h3",6),e._uU(49,"Please select a suitable day of the week for the interview. (US Pacific Standard Time)"),e.qZA(),e.TgZ(50,"div",18),e.YNc(51,je,18,21,"ng-container",19),e.qZA(),e.qZA(),e.TgZ(52,"li",5),e.TgZ(53,"h3",6),e._uU(54,"Would you also like to be considered for an instructor\u2019s position if one becomes available?"),e.qZA(),e.TgZ(55,"div",7),e.TgZ(56,"mat-radio-group",20),e.TgZ(57,"mat-radio-button",9),e._uU(58,"Yes"),e.qZA(),e.TgZ(59,"mat-radio-button",9),e._uU(60,"No"),e.qZA(),e.qZA(),e.YNc(61,Ve,2,0,"span",10),e.qZA(),e.YNc(62,tt,5,1,"div",21),e.TgZ(63,"h3",22),e._uU(64,"We would require a minimum of two professional references, please enter the information below."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"div",23),e.YNc(66,ct,26,14,"div",24),e.TgZ(67,"button",25),e.NdJ("click",function(){return r.addProfessionalReferencesForInstructor()}),e._uU(68,"+ Add more"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"div",26),e.TgZ(70,"a",27),e.NdJ("click",function(){return r.previousStep()}),e._uU(71,"PREVIOUS"),e.qZA(),e.TgZ(72,"a",28),e.NdJ("click",function(){return r.onSubmit()}),e._uU(73,"NEXT"),e.qZA(),e.qZA(),e.qZA()),2&t){let n,s,l,p,a,h,_,Z;e.xp6(1),e.Q6J("formGroup",r.form),e.xp6(11),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(2),e.Q6J("ngIf",(null==(n=r.form.get("everTutored"))?null:n.errors)&&(null==(n=r.form.get("everTutored"))?null:n.touched)),e.xp6(2),e.Q6J("ngIf",null==(s=r.form.get("everTutored"))?null:s.value),e.xp6(6),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(2),e.Q6J("ngIf",(null==(l=r.form.get("everTutoredOnline"))?null:l.errors)&&(null==(l=r.form.get("everTutoredOnline"))?null:l.touched)),e.xp6(2),e.Q6J("ngIf",null==(p=r.form.get("everTutoredOnline"))?null:p.value),e.xp6(7),e.Q6J("ngForOf",r.studentLevels),e.xp6(1),e.Q6J("ngIf",(null==(a=r.form.get("linkTutorAndStudentTypes"))?null:a.errors)&&(null==(a=r.form.get("linkTutorAndStudentTypes"))?null:a.touched)),e.xp6(6),e.Q6J("ngForOf",e.lcZ(45,19,r.hoursPerWeekForTutor$)),e.xp6(2),e.Q6J("ngIf",(null==(h=r.form.get("hoursPerWeekCurrently"))?null:h.errors)&&(null==(h=r.form.get("hoursPerWeekCurrently"))?null:h.touched)),e.xp6(5),e.Q6J("ngForOf",r.interview.controls),e.xp6(6),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(2),e.Q6J("ngIf",(null==(_=r.form.get("wantToBeInstructor"))?null:_.errors)&&(null==(_=r.form.get("wantToBeInstructor"))?null:_.touched)),e.xp6(1),e.Q6J("ngIf",!0===(null==(Z=r.form.get("wantToBeInstructor"))?null:Z.value)),e.xp6(4),e.Q6J("ngForOf",null==r.professionalReferencesForInstructor?null:r.professionalReferencesForInstructor.controls)}},directives:[u._Y,u.JL,u.sg,j.VQ,u.JJ,u.u,j.U0,i.O5,i.sg,u.Fj,E.oG,u.CE,u.x0,g.H,J.KE,D.nW,J.R9,L.Hw,D.Q0,D.Mq,ae.Nt,D.hl],pipes:[i.Ov],styles:[".mat-radio-button.mat-accent.mat-radio-checked   .mat-radio-outer-circle{border-color:#00ff19!important}  .mat-radio-button.mat-accent   .mat-radio-inner-circle{color:#00ff19!important;background-color:#00ff19!important;margin:0 1px!important}  .mat-radio-button.mat-accent .mat-radio-ripple .mat-ripple-element{background-color:#20bde542}  .mat-radio-inner-circle{left:50%!important;top:50%!important;transform:translate(-46%,-40%) scale(.5)!important}  .mat-radio-container{margin-top:-6px}.hoursPerWeekForTutor[_ngcontent-%COMP%]{width:30%}  .mat-checkbox-checked.mat-accent .mat-checkbox-ripple .mat-ripple-element{opacity:.03!important;background-color:#00ff19!important}  .mat-checkbox-checked.mat-accent .mat-checkbox-background, .mat-checkbox-indeterminate.mat-accent[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%]{background-color:#00ff19;transform:scale(1.3)}  .mat-radio-group{display:grid;grid-template-columns:repeat(2,1fr);flex-wrap:wrap;grid-gap:15px 0}mat-checkbox[_ngcontent-%COMP%]{width:26%}.everTutored[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%], .everTutoredOnline[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin-right:20px}.nested[_ngcontent-%COMP%]{padding-left:20px;list-style:none}.grid-gap-10[_ngcontent-%COMP%]{grid-gap:10px;margin:0 0 16px 47px}.warning-title[_ngcontent-%COMP%]{color:#3862b0;font-size:18px;font-weight:600;margin-bottom:24px}.nested-form-item[_ngcontent-%COMP%]{display:flex;align-items:center}.form-label-nested-content[_ngcontent-%COMP%]{position:relative}.form-label-nested-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:418px}.main-question[_ngcontent-%COMP%]{margin-bottom:12px}.question-list__item[_ngcontent-%COMP%]   .checkboxes-wrapper-flex[_ngcontent-%COMP%]{margin-bottom:12px}.grid-3-template[_ngcontent-%COMP%]{position:relative;display:inline-grid;grid-template-columns:repeat(3,1fr);grid-gap:10px 35px;margin-left:47px}.grid-3-template[_ngcontent-%COMP%]     .mat-radio-group{display:inline-grid;grid-template-columns:repeat(3,1fr);grid-gap:10px 35px}.grid-1-template[_ngcontent-%COMP%]     .mat-radio-group{grid-template-columns:repeat(1,1fr)}.checkboxes-wrapper-flex-with-min-width[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{transform:translate(6px,-6px)}.sub-question[_ngcontent-%COMP%]{font-size:1rem}.mb-20[_ngcontent-%COMP%]{margin-bottom:20px}"]}),o})();function pt(o,c){1&o&&(e.TgZ(0,"span",23),e._uU(1,"This is a required field"),e.qZA())}function ht(o,c){1&o&&(e.TgZ(0,"span",23),e._uU(1,"This is a required field"),e.qZA())}function mt(o,c){1&o&&(e.TgZ(0,"span",23),e._uU(1,"This is a required field"),e.qZA())}let dt=(()=>{class o{constructor(t,r,n,s,l){this.fb=t,this.registrationService=r,this.infoService=n,this.storageService=s,this.router=l,this.subscription=new v.w,this.actionType="CREATE"}ngOnInit(){this.formInitialization(),this.initializeSubscriptions(),this.registrationService.stepNumber$.next(5)}formInitialization(){this.form=this.fb.group({userId:[this.storageService.getUserId()],mobileCode:[null,[u.kI.required]],mobile:[null,[u.kI.required,u.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],linkToSocialMedia:[null,[u.kI.required]],socialMediaExistance:[!1,[u.kI.required]]})}initializeSubscriptions(){this.phoneCods$=this.infoService.getCountries(),this.getContactsPage(),this.socialMediaExistenceChange()}getContactsPage(){this.subscription.add(this.registrationService.getContactsPage(this.storageService.getUserId()).subscribe(t=>{t?(this.actionType="UPDATE",this.form.patchValue(t)):this.actionType="CREATE"}))}socialMediaExistenceChange(){var t;this.subscription.add(null===(t=this.form.get("socialMediaExistance"))||void 0===t?void 0:t.valueChanges.subscribe(r=>{var n,s,l,p,a;r?(null===(n=this.form.get("linkToSocialMedia"))||void 0===n||n.removeValidators(u.kI.required),null===(s=this.form.get("linkToSocialMedia"))||void 0===s||s.reset(),null===(l=this.form.get("linkToSocialMedia"))||void 0===l||l.updateValueAndValidity()):(null===(p=this.form.get("linkToSocialMedia"))||void 0===p||p.setValidators(u.kI.required),null===(a=this.form.get("linkToSocialMedia"))||void 0===a||a.updateValueAndValidity())}))}onSubmit(){this.form.valid?"CREATE"===this.actionType?this.saveContacts():this.updateContacts():this.form.markAllAsTouched()}saveContacts(){this.subscription.add(this.registrationService.saveContacts(this.form.value).subscribe())}updateContacts(){this.subscription.add(this.registrationService.updateContacts(this.form.value).subscribe())}previousStep(){this.registrationService.stepNumber$.next(4),this.router.navigate(["tutor/signUp/step-four"])}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.qu),e.Y36(M.g),e.Y36(W.M),e.Y36(F.V),e.Y36(N.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-fifth-step"]],decls:34,vars:10,consts:[[1,"flex-item"],[1,"margin-left-space"],[3,"formGroup"],[1,"register-form"],[1,"form-legend"],[1,"w-30","tutor-contact","wrapper-for-contact"],[1,"d-flex","position-relative"],[1,"form-label","phone-number-label","form-label--min-width","w-25"],["formControlName","mobileCode",3,"list","label","keyName"],["class","error-message",4,"ngIf"],["for","phone-number",1,"form-label","phone-number-label","phone-number-label-input"],["id","phone-number","autocomplete","phone-number","type","tel","placeholder","Phone number*","formControlName","mobile",1,"form-input"],["for","link-to-social-media",1,"form-label","form-label--min-width"],["id","link-to-social-media","autocomplete","link-to-social-media","type","text","placeholder","*link to the social media profile","formControlName","linkToSocialMedia",1,"form-input"],[1,"checkboxes-wrapper"],["formControlName","socialMediaExistance"],[1,"checkbox-divider-line"],[1,"container-for-checkbox","confirm"],["accept",""],["href","#",1,"terms-conditions-link"],[1,"flex-container-center","button-wrapper"],["type","button",1,"sophist-btn","flex-container-center","previous-btn",3,"click"],["type","submit",1,"sophist-btn","flex-container-center","next-btn",3,"disabled","click"],[1,"error-message"]],template:function(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"form",2),e.TgZ(3,"fieldset",3),e.TgZ(4,"legend",4),e._uU(5,"Contact Details"),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"app-select",8),e.ALo(10,"async"),e.YNc(11,pt,2,0,"span",9),e.qZA(),e.TgZ(12,"label",10),e._UZ(13,"input",11),e.YNc(14,ht,2,0,"span",9),e.qZA(),e.qZA(),e.TgZ(15,"label",12),e._UZ(16,"input",13),e.YNc(17,mt,2,0,"span",9),e.qZA(),e.qZA(),e.TgZ(18,"div",14),e.TgZ(19,"mat-checkbox",15),e._uU(20," I do not have a social media profile "),e.qZA(),e._UZ(21,"div",16),e.TgZ(22,"label",17),e._UZ(23,"mat-checkbox",null,18),e.TgZ(25,"span"),e._uU(26," I confirm that the information provided by me in the application is true, complete and accurate, and that I have not deliberately concealed any information which is likely to affect the review of my application in an adverse manner. I accept "),e.TgZ(27,"a",19),e._uU(28," Terms and Conditions."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",20),e.TgZ(30,"button",21),e.NdJ("click",function(){return r.previousStep()}),e._uU(31,"PREVIOUS "),e.qZA(),e.TgZ(32,"button",22),e.NdJ("click",function(){return e.CHM(n),e.MAs(24).checked&&r.onSubmit()}),e._uU(33,"Register "),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=e.MAs(24);let s,l,p;e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(7),e.Q6J("list",e.lcZ(10,8,r.phoneCods$))("label","+374")("keyName","phoneCode"),e.xp6(2),e.Q6J("ngIf",(null==(s=r.form.get("mobileCode"))?null:s.errors)&&(null==(s=r.form.get("mobileCode"))?null:s.touched)),e.xp6(3),e.Q6J("ngIf",(null==(l=r.form.get("mobile"))?null:l.errors)&&(null==(l=r.form.get("mobile"))?null:l.touched)),e.xp6(3),e.Q6J("ngIf",(null==(p=r.form.get("linkToSocialMedia"))?null:p.errors)&&(null==(p=r.form.get("linkToSocialMedia"))?null:p.touched)),e.xp6(15),e.Q6J("disabled",!n.checked)}},directives:[u._Y,u.JL,u.sg,g.H,u.JJ,u.u,i.O5,u.Fj,E.oG],pipes:[i.Ov],styles:[".w-30[_ngcontent-%COMP%]{width:450px}"]}),o})();var ft=d(4762);const de=new e.OlP("config"),xe=new e.OlP("NEW_CONFIG"),Ce=new e.OlP("INITIAL_CONFIG"),gt={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:".",clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},_t=["Hh:m0:s0","Hh:m0","m0:s0"],vt=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let ke=(()=>{class o{constructor(t){this._config=t,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(r,n,s,l)=>{const p=r.split(s),a=p.length>1?`${s}${p[1]}`:"";let h=p[0];const _=this.separatorLimit.replace(/\s/g,"");_&&+_&&(h="-"===h[0]?`-${h.slice(1,h.length).slice(0,_.length)}`:h.slice(0,_.length));const Z=/(\d+)(\d{3})/;for(;n&&Z.test(h);)h=h.replace(Z,"$1"+n+"$2");return void 0===l?h+a:0===l?h:h+a.substr(0,l+1)},this.percentage=r=>Number(r)>=0&&Number(r)<=100,this.getPrecision=r=>{const n=r.split(".");return n.length>1?Number(n[n.length-1]):1/0},this.checkAndRemoveSuffix=r=>{var n,s,l;for(let p=(null===(n=this.suffix)||void 0===n?void 0:n.length)-1;p>=0;p--){const a=this.suffix.substr(p,null===(s=this.suffix)||void 0===s?void 0:s.length);if(r.includes(a)&&(p-1<0||!r.includes(this.suffix.substr(p-1,null===(l=this.suffix)||void 0===l?void 0:l.length))))return r.replace(a,"")}return r},this.checkInputPrecision=(r,n,s)=>{if(n<1/0){const l=new RegExp(this._charToRegExpExpression(s)+`\\d{${n}}.*$`),p=r.match(l);p&&p[0].length-1>n&&(r=r.substring(0,r.length-(p[0].length-1-n))),0===n&&r.endsWith(s)&&(r=r.substring(0,r.length-1))}return r},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(t,r){const[n,s]=r;return this.customPattern=s,this.applyMask(t,n)}applyMask(t,r,n=0,s=!1,l=!1,p=(()=>{})){if(null==t||void 0===r)return"";let a=0,h="",_=!1,Z=!1,x=1,C=!1;t.slice(0,this.prefix.length)===this.prefix&&(t=t.slice(this.prefix.length,t.length)),this.suffix&&(null==t?void 0:t.length)>0&&(t=this.checkAndRemoveSuffix(t));const I=t.toString().split("");"IP"===r&&(this.ipError=I.filter(A=>"."===A).length<3&&I.length<7,r="099.099.099.099");const Y=[];for(let A=0;A<t.length;A++)t[A].match("\\d")&&Y.push(t[A]);if("CPF_CNPJ"===r&&(this.cpfCnpjError=11!==Y.length&&14!==Y.length,r=Y.length>11?"00.000.000/0000-00":"000.000.000-00"),r.startsWith("percent")){if(t.match("[a-z]|[A-Z]")||t.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){t=this._stripToDecimal(t);const A=this.getPrecision(r);t=this.checkInputPrecision(t,A,this.decimalMarker)}t.indexOf(".")>0&&!this.percentage(t.substring(0,t.indexOf(".")))&&(t=`${t.substring(0,t.indexOf(".")-1)}${t.substring(t.indexOf("."),t.length)}`),h=this.percentage(t)?t:t.substring(0,t.length-1)}else if(r.startsWith("separator")){(t.match("[w\u0430-\u044f\u0410-\u042f]")||t.match("[\u0401\u0451\u0410-\u044f]")||t.match("[a-z]|[A-Z]")||t.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||t.match("[^A-Za-z0-9,]"))&&(t=this._stripToDecimal(t)),t=t.length>1&&"0"===t[0]&&t[1]!==this.decimalMarker&&!l?t.slice(1,t.length):t;const A=this._charToRegExpExpression(this.thousandSeparator),y=this._charToRegExpExpression(this.decimalMarker),G='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(A,"").replace(y,""),K=new RegExp("["+G+"]");t.match(K)&&(t=t.substring(0,t.length-1));const fe=this.getPrecision(r),Ae=(t=this.checkInputPrecision(t,fe,this.decimalMarker)).replace(new RegExp(A,"g"),"");h=this._formatWithSeparators(Ae,this.thousandSeparator,this.decimalMarker,fe);const Se=h.indexOf(",")-t.indexOf(","),te=h.length-t.length;if(te>0&&","!==h[n]){Z=!0;let he=0;do{this._shift.add(n+he),he++}while(he<te)}else 0!==Se&&n>0&&!(h.indexOf(",")>=n&&n>3)||!(h.indexOf(".")>=n&&n>3)&&te<=0?(this._shift.clear(),Z=!0,x=te,this._shift.add(n+=te)):this._shift.clear()}else for(let A=0,y=I[0];A<I.length&&a!==r.length;A++,y=I[A])if(this._checkSymbolMask(y,r[a])&&"?"===r[a+1])h+=y,a+=2;else if("*"===r[a+1]&&_&&this._checkSymbolMask(y,r[a+2]))h+=y,a+=3,_=!1;else if(this._checkSymbolMask(y,r[a])&&"*"===r[a+1])h+=y,_=!0;else if("?"===r[a+1]&&this._checkSymbolMask(y,r[a+2]))h+=y,a+=3;else if(this._checkSymbolMask(y,r[a])){if("H"===r[a]&&Number(y)>2){a+=1,this._shiftStep(r,a,I.length),A--,this.leadZeroDateTime&&(h+="0");continue}if("h"===r[a]&&"2"===h&&Number(y)>3){a+=1,A--;continue}if("m"===r[a]&&Number(y)>5){a+=1,this._shiftStep(r,a,I.length),A--,this.leadZeroDateTime&&(h+="0");continue}if("s"===r[a]&&Number(y)>5){a+=1,this._shiftStep(r,a,I.length),A--,this.leadZeroDateTime&&(h+="0");continue}const G=31;if("d"===r[a]&&(Number(y)>3&&this.leadZeroDateTime||Number(t.slice(a,a+2))>G||"/"===t[a+1])){a+=1,this._shiftStep(r,a,I.length),A--,this.leadZeroDateTime&&(h+="0");continue}if("M"===r[a]){const K=12,fe=0===a&&(Number(y)>2||Number(t.slice(a,a+2))>K||"/"===t[a+1]),Ae=t.slice(a-3,a-1).includes("/")&&("/"===t[a-2]&&Number(t.slice(a-1,a+1))>K&&"/"!==t[a]||"/"===t[a]||"/"===t[a-3]&&Number(t.slice(a-2,a))>K&&"/"!==t[a-1]||"/"===t[a-1]),Se=Number(t.slice(a-3,a-1))<=G&&!t.slice(a-3,a-1).includes("/")&&"/"===t[a-1]&&(Number(t.slice(a,a+2))>K||"/"===t[a+1]),te=Number(t.slice(a-3,a-1))>G&&!t.slice(a-3,a-1).includes("/")&&!t.slice(a-2,a).includes("/")&&Number(t.slice(a-2,a))>K,he=Number(t.slice(a-3,a-1))<=G&&!t.slice(a-3,a-1).includes("/")&&"/"!==t[a-1]&&Number(t.slice(a-1,a+1))>K;if(Number(y)>1&&this.leadZeroDateTime||fe||Ae||Se||te||he){a+=1,this._shiftStep(r,a,I.length),A--,this.leadZeroDateTime&&(h+="0");continue}}h+=y,a++}else-1!==this.maskSpecialCharacters.indexOf(r[a])?(h+=r[a],a++,this._shiftStep(r,a,I.length),A--):this.maskSpecialCharacters.indexOf(y)>-1&&this.maskAvailablePatterns[r[a]]&&this.maskAvailablePatterns[r[a]].optional?(!!I[a]&&"099.099.099.099"!==r&&"000.000.000-00"!==r&&"00.000.000/0000-00"!==r&&(h+=I[a]),a++,A--):"*"===this.maskExpression[a+1]&&this._findSpecialChar(this.maskExpression[a+2])&&this._findSpecialChar(y)===this.maskExpression[a+2]&&_||"?"===this.maskExpression[a+1]&&this._findSpecialChar(this.maskExpression[a+2])&&this._findSpecialChar(y)===this.maskExpression[a+2]&&_?(a+=3,h+=y):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(y)<0&&y!==this.placeHolderCharacter&&(C=!0);h.length+1===r.length&&-1!==this.maskSpecialCharacters.indexOf(r[r.length-1])&&(h+=r[r.length-1]);let le=n+1;for(;this._shift.has(le);)x++,le++;let ce=s?a:this._shift.has(n)?x:0;C&&ce--,p(ce,Z),x<0&&this._shift.clear();let ue=!1;l&&(ue=I.every(A=>this.maskSpecialCharacters.includes(A)));let pe=`${this.prefix}${ue?"":h}${this.suffix}`;return 0===h.length&&(pe=`${this.prefix}${h}`),pe}_findSpecialChar(t){return this.maskSpecialCharacters.find(r=>r===t)}_checkSymbolMask(t,r){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[r]&&this.maskAvailablePatterns[r].pattern&&this.maskAvailablePatterns[r].pattern.test(t)}_stripToDecimal(t){return t.split("").filter((r,n)=>r.match("^-?\\d")||r.match("\\s")||"."===r||","===r||"-"===r&&0===n&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(t){return t&&(" "===t?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?"\\"+t:t)}_shiftStep(t,r,n){const s=/[*?]/g.test(t.slice(0,r))?n:r;this._shift.add(s+this.prefix.length||0)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(de))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),Ie=(()=>{class o extends ke{constructor(t,r,n,s){super(r),this.document=t,this._config=r,this._elementRef=n,this._renderer=s,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.onChange=l=>{}}applyMask(t,r,n=0,s=!1,l=!1,p=(()=>{})){if(!r)return t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const a=t&&"number"==typeof this.selStart?t[this.selStart]:"";let h="";if(this.hiddenInput&&!this.writingValue){let C=this.actualValue.split("");""!==t&&C.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(t.length>C.length?C.splice(this.selStart,0,a):t.length<C.length&&(C.length-t.length==1?C.splice(this.selStart-1,1):C.splice(this.selStart,this.selEnd-this.selStart))):C=[],h=this.actualValue.length&&C.length<=t.length?this.shiftTypedSymbols(C.join("")):t}h=Boolean(h)&&h.length?h:t;const _=super.applyMask(h,r,n,s,l,p);if(this.actualValue=this.getActualValue(_),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(C=>C!==this.decimalMarker)),this.formControlResult(_),!this.showMaskTyped)return this.hiddenInput&&_&&_.length?this.hideInput(_,this.maskExpression):_;const Z=_.length,x=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const C=this._numberSkipedSymbols(_);return _+x.slice(Z+C)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?_+x:_+x.slice(Z)}_numberSkipedSymbols(t){const r=/(^|\D)(\d\D)/g;let n=r.exec(t),s=0;for(;null!=n;)s+=1,n=r.exec(t);return s}applyValueChanges(t=0,r,n,s=(()=>{})){const l=this._elementRef.nativeElement;l.value=this.applyMask(l.value,this.maskExpression,t,r,n,s),l!==this.document.activeElement&&this.clearIfNotMatchFn()}hideInput(t,r){return t.split("").map((n,s)=>this.maskAvailablePatterns&&this.maskAvailablePatterns[r[s]]&&this.maskAvailablePatterns[r[s]].symbol?this.maskAvailablePatterns[r[s]].symbol:n).join("")}getActualValue(t){const r=t.split("").filter((n,s)=>this._checkSymbolMask(n,this.maskExpression[s])||this.maskSpecialCharacters.includes(this.maskExpression[s])&&n===this.maskExpression[s]);return r.join("")===t?r.join(""):t}shiftTypedSymbols(t){let r="";return(t&&t.split("").map((s,l)=>{if(this.maskSpecialCharacters.includes(t[l+1])&&t[l+1]!==this.maskExpression[l+1])return r=s,t[l+1];if(r.length){const p=r;return r="",p}return s})||[]).join("")}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(t){if("IP"===this.maskExpression)return this._checkForIp(t);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(t)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const t=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==t.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(t.value,this.maskExpression))}set formElementProperty([t,r]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,t,r))}checkSpecialCharAmount(t){return t.split("").filter(n=>this._findSpecialChar(n)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){if("#"===t)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const r=[];for(let n=0;n<t.length;n++)t[n].match("\\d")&&r.push(t[n]);return r.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:r.length>3&&r.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:r.length>6&&r.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(t){const r=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,n=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===t)return r;const s=[];for(let l=0;l<t.length;l++)t[l].match("\\d")&&s.push(t[l]);return s.length<=3?r.slice(s.length,r.length):s.length>3&&s.length<=6?r.slice(s.length+1,r.length):s.length>6&&s.length<=9?r.slice(s.length+2,r.length):s.length>9&&s.length<11?r.slice(s.length+3,r.length):11===s.length?"":12===s.length?n.slice(17===t.length?16:15,n.length):s.length>12&&s.length<=14?n.slice(s.length+4,n.length):""}formControlResult(t){this.writingValue||this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(t)):this._removeSuffix(t))}_toNumber(t){if(!this.isNumberValue||""===t)return t;const r=Number(t);return Number.isNaN(r)?t:r}_removeMask(t,r){return t&&t.replace(this._regExpForRemove(r),"")}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,""):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,""):t}_retrieveSeparatorValue(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters)}_regExpForRemove(t){return new RegExp(t.map(r=>`\\${r}`).join("|"),"gi")}_checkSymbols(t){if(""===t)return t;const r=this._retrieveSeparatorPrecision(this.maskExpression);let n=this._retrieveSeparatorValue(t);return"."!==this.decimalMarker&&(n=n.replace(this.decimalMarker,".")),this.isNumberValue?r?t===this.decimalMarker?null:this._checkPrecision(this.maskExpression,n):Number(n):n}_retrieveSeparatorPrecision(t){const r=t.match(new RegExp("^separator\\.([^d]*)"));return r?Number(r[1]):null}_checkPrecision(t,r){return t.indexOf("2")>0?Number(r).toFixed(2):Number(r)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(i.K0),e.LFG(de),e.LFG(e.SBq),e.LFG(e.Qsj))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),Tt=(()=>{class o{constructor(t,r,n){this.document=t,this._maskService=r,this._config=n,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=s=>{},this.onTouch=()=>{}}ngOnChanges(t){const{maskExpression:r,specialCharacters:n,patterns:s,prefix:l,suffix:p,thousandSeparator:a,decimalMarker:h,dropSpecialCharacters:_,hiddenInput:Z,showMaskTyped:x,placeHolderCharacter:C,shownMaskExpression:I,showTemplate:Y,clearIfNotMatch:le,validation:ce,separatorLimit:ue,allowNegativeNumbers:pe,leadZeroDateTime:A}=t;if(r&&(r.currentValue!==r.previousValue&&!r.firstChange&&(this._maskService.maskChanged=!0),this._maskValue=r.currentValue||"",r.currentValue&&r.currentValue.split("||").length>1&&(this._maskExpressionArray=r.currentValue.split("||").sort((y,G)=>y.length-G.length),this._maskValue=this._maskExpressionArray[0],this.maskExpression=this._maskExpressionArray[0],this._maskService.maskExpression=this._maskExpressionArray[0])),n){if(!n.currentValue||!Array.isArray(n.currentValue))return;this._maskService.maskSpecialCharacters=n.currentValue||[]}s&&s.currentValue&&(this._maskService.maskAvailablePatterns=s.currentValue),l&&(this._maskService.prefix=l.currentValue),p&&(this._maskService.suffix=p.currentValue),a&&(this._maskService.thousandSeparator=a.currentValue),h&&(this._maskService.decimalMarker=h.currentValue),_&&(this._maskService.dropSpecialCharacters=_.currentValue),Z&&(this._maskService.hiddenInput=Z.currentValue),x&&(this._maskService.showMaskTyped=x.currentValue),C&&(this._maskService.placeHolderCharacter=C.currentValue),I&&(this._maskService.shownMaskExpression=I.currentValue),Y&&(this._maskService.showTemplate=Y.currentValue),le&&(this._maskService.clearIfNotMatch=le.currentValue),ce&&(this._maskService.validation=ce.currentValue),ue&&(this._maskService.separatorLimit=ue.currentValue),pe&&(this._maskService.allowNegativeNumbers=pe.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(y=>"-"!==y))),A&&(this._maskService.leadZeroDateTime=A.currentValue),this._applyMask()}validate({value:t}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(t);if(this._maskService.cpfCnpjError)return this._createValidationError(t);if(this._maskValue.startsWith("separator")||vt.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(_t.includes(this._maskValue))return this._validateTime(t);if(t&&t.toString().length>=1){let r=0;for(const n in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[n].optional&&!0===this._maskService.maskAvailablePatterns[n].optional&&(this._maskValue.indexOf(n)!==this._maskValue.lastIndexOf(n)?r+=this._maskValue.split("").filter(l=>l===n).join("").length:-1!==this._maskValue.indexOf(n)&&r++,-1!==this._maskValue.indexOf(n)&&t.toString().length>=this._maskValue.indexOf(n)||r===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&t.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&t.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&t.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(t);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const n=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-r:this._maskValue.length-r;if(t.toString().length<n)return this._createValidationError(t)}}return null}onPaste(){this._justPasted=!0}onInput(t){const r=t.target;if(this._inputValue=r.value,this._setMask(),!this._maskValue)return void this.onChange(r.value);const n=1===r.selectionStart?r.selectionStart+this._maskService.prefix.length:r.selectionStart;let s=0,l=!1;if(this._maskService.applyValueChanges(n,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(a,h)=>{this._justPasted=!1,s=a,l=h}),this.document.activeElement!==r)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let p=this._position?this._inputValue.length+n+s:n+("Backspace"!==this._code||l?s:0);p>this._getActualInputLength()&&(p=this._getActualInputLength()),p<0&&(p=0),r.setSelectionRange(p,p),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onFocus(t){if(!this._maskValue)return;const r=t.target;null!==r&&null!==r.selectionStart&&r.selectionStart===r.selectionEnd&&r.selectionStart>this._maskService.prefix.length&&38!==t.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),r.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===r.value?(r.focus(),r.setSelectionRange(0,0)):r.selectionStart>this._maskService.actualValue.length&&r.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const l=r.value&&r.value!==this._maskService.prefix?r.value:this._maskService.prefix+this._maskService.maskIsShown;r.value!==l&&(r.value=l),(r.selectionStart||r.selectionEnd)<=this._maskService.prefix.length?r.selectionStart=this._maskService.prefix.length:r.selectionEnd>this._getActualInputLength()&&(r.selectionEnd=this._getActualInputLength())}onKeyDown(t){var r;if(!this._maskValue)return;this._code=t.code?t.code:t.key;const n=t.target;if(this._inputValue=n.value,this._setMask(),38===t.keyCode&&t.preventDefault(),37===t.keyCode||8===t.keyCode||46===t.keyCode){if(8===t.keyCode&&0===n.value.length&&(n.selectionStart=n.selectionEnd),8===t.keyCode&&0!==n.selectionStart)if(this.specialCharacters=(null===(r=this.specialCharacters)||void 0===r?void 0:r.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&n.selectionStart<=this.prefix.length)n.setSelectionRange(this.prefix.length,this.prefix.length);else{if(this._inputValue.length!==n.selectionStart&&1!==n.selectionStart)for(;this.specialCharacters.includes(this._inputValue[n.selectionStart-1].toString())&&(this.prefix.length>=1&&n.selectionStart>this.prefix.length||0===this.prefix.length);)n.setSelectionRange(n.selectionStart-1,n.selectionStart-1);this.suffixCheckOnPressDelete(t.keyCode,n)}this.suffixCheckOnPressDelete(t.keyCode,n),this._maskService.prefix.length&&n.selectionStart<=this._maskService.prefix.length&&n.selectionEnd<=this._maskService.prefix.length&&t.preventDefault();const s=n.selectionStart;8===t.keyCode&&!n.readOnly&&0===s&&n.selectionEnd===n.value.length&&0!==n.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<n.selectionStart?n.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===t.keyCode&&!0===t.ctrlKey||65===t.keyCode&&!0===t.metaKey)&&(n.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=n.selectionStart,this._maskService.selEnd=n.selectionEnd}writeValue(t){return(0,ft.mG)(this,void 0,void 0,function*(){"object"==typeof t&&null!==t&&"value"in t&&("disable"in t&&this.setDisabledState(Boolean(t.disable)),t=t.value),void 0===t&&(t=""),"number"==typeof t&&(t=String(t),t="."!==this.decimalMarker?t.replace(".",this.decimalMarker):t,this._maskService.isNumberValue=!0),this._inputValue=t,this._setMask(),t&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask(t,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",t],this._inputValue=t})}registerOnChange(t){this.onChange=t,this._maskService.onChange=this.onChange}registerOnTouched(t){this.onTouch=t}suffixCheckOnPressDelete(t,r){46===t&&this.suffix.length>0&&this._inputValue.length-this.suffix.length<=r.selectionStart&&r.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length),8===t&&(this.suffix.length>1&&this._inputValue.length-this.suffix.length<r.selectionStart&&r.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length),1===this.suffix.length&&this._inputValue.length===r.selectionStart&&r.setSelectionRange(r.selectionStart-1,r.selectionStart-1))}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split("").reduce((r,n,s)=>{if(this._start="{"===n?s:this._start,"}"!==n)return this._maskService._findSpecialChar(n)?r+n:r;this._end=s;const l=Number(t.slice(this._start+1,this._end));return r+new Array(l+1).join(t[this._start-1])},"")||t}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(t){const r=this._maskValue.split("").filter(n=>":"!==n).length;return t&&(0==+t[t.length-1]&&t.length<r||t.length<=r-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue,actualValue:t}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(t=>{var r,n;const s=(null===(r=this._maskService.removeMask(this._inputValue))||void 0===r?void 0:r.length)<=(null===(n=this._maskService.removeMask(t))||void 0===n?void 0:n.length);if(this._inputValue&&s)return this._maskValue=t,this.maskExpression=t,this._maskService.maskExpression=t,s;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.K0),e.Y36(Ie),e.Y36(de))},o.\u0275dir=e.lG2({type:o,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(t,r){1&t&&e.NdJ("paste",function(){return r.onPaste()})("input",function(s){return r.onInput(s)})("blur",function(){return r.onBlur()})("click",function(s){return r.onFocus(s)})("keydown",function(s){return r.onKeyDown(s)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime"},features:[e._Bn([{provide:u.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:u.Cf,useExisting:(0,e.Gpc)(()=>o),multi:!0},Ie]),e.TTD]}),o})(),Zt=(()=>{class o{static forRoot(t){return{ngModule:o,providers:[{provide:xe,useValue:t},{provide:Ce,useValue:gt},{provide:de,useFactory:bt,deps:[Ce,xe]},ke]}}static forChild(){return{ngModule:o}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})();function bt(o,c){return Object.assign(Object.assign({},o),c instanceof Function?c():c)}const qe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function yt(o,c){1&o&&(e.TgZ(0,"span",45),e._uU(1,"This is a required field"),e.qZA())}function kt(o,c){1&o&&(e.TgZ(0,"span",45),e._uU(1,"This is a required field"),e.qZA())}function At(o,c){1&o&&(e.TgZ(0,"span",45),e._uU(1,"This is a required field"),e.qZA())}function St(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",46),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().removeTutorSubjects(n)}),e._UZ(1,"img",47),e.qZA()}}function xt(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"i",48),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addTutorSubjects()}),e.qZA()}}function Ct(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",36),e.TgZ(2,"div",37),e.TgZ(3,"div",38),e.TgZ(4,"app-select",39),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).index;return e.oxw().categoryChange(n,l)}),e.ALo(5,"async"),e.qZA(),e.YNc(6,yt,2,0,"span",13),e.qZA(),e.TgZ(7,"div",38),e.TgZ(8,"app-select",40),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).index,p=e.oxw();return p.subjectChange(n,l,p.tutorSubjects.controls[l])}),e.ALo(9,"async"),e.qZA(),e.YNc(10,kt,2,0,"span",13),e.qZA(),e.TgZ(11,"div",38),e._UZ(12,"app-select",41),e.ALo(13,"async"),e.ALo(14,"async"),e.YNc(15,At,2,0,"span",13),e.qZA(),e.TgZ(16,"div",42),e.YNc(17,St,2,0,"div",43),e.YNc(18,xt,1,0,"i",44),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&o){const t=c.index,r=e.oxw();let n,s,l,p;e.xp6(2),e.Q6J("formGroupName",t),e.xp6(2),e.Q6J("label","Category*")("list",e.lcZ(5,16,r.categories$))("keyName","categoryName"),e.xp6(2),e.Q6J("ngIf",(null==r.tutorSubjects.controls[t]||null==(n=r.tutorSubjects.controls[t].get("categoryId"))?null:n.errors)&&(null==r.tutorSubjects.controls[t]||null==(n=r.tutorSubjects.controls[t].get("categoryId"))?null:n.touched)),e.xp6(2),e.Q6J("label","Subject*")("list",e.lcZ(9,18,null==r.observables[t]?null:r.observables[t].subjects$))("keyName","subjectName"),e.xp6(2),e.Q6J("ngIf",(null==r.tutorSubjects.controls[t]||null==(s=r.tutorSubjects.controls[t].get("subjectId"))?null:s.errors)&&(null==r.tutorSubjects.controls[t]||null==(s=r.tutorSubjects.controls[t].get("subjectId"))?null:s.touched)),e.xp6(2),e.Q6J("label","Level*")("list",e.lcZ(13,20,null==r.observables[t]?null:r.observables[t].levels$))("keyName","level")("disable",!(null!=(l=e.lcZ(14,22,null==r.observables[t]?null:r.observables[t].levels$))&&l.length)),e.xp6(3),e.Q6J("ngIf",(null==r.tutorSubjects.controls[t]||null==(p=r.tutorSubjects.controls[t].get("levelId"))?null:p.errors)&&(null==r.tutorSubjects.controls[t]||null==(p=r.tutorSubjects.controls[t].get("levelId"))?null:p.touched)),e.xp6(2),e.Q6J("ngIf",t>0),e.xp6(1),e.Q6J("ngIf",t==r.tutorSubjects.controls.length-1)}}function It(o,c){1&o&&(e.TgZ(0,"span",45),e._uU(1,"You cannot enter anything below $20"),e.qZA())}function qt(o,c){1&o&&(e.TgZ(0,"span",45),e._uU(1,"This is a required field"),e.qZA())}function wt(o,c){1&o&&(e.TgZ(0,"span",45),e._uU(1,"This is a required field"),e.qZA())}function Nt(o,c){1&o&&(e.TgZ(0,"span",49),e._uU(1,"This is a required field"),e.qZA())}function Mt(o,c){1&o&&(e.TgZ(0,"span",49),e._uU(1,"This is a required field"),e.qZA())}function Ut(o,c){if(1&o&&(e.TgZ(0,"div"),e.TgZ(1,"label",50),e._uU(2," Social Security Number* "),e.qZA(),e._UZ(3,"input",51),e.ALo(4,"slice"),e.YNc(5,Mt,2,0,"span",24),e.qZA()),2&o){const t=e.oxw();let r;e.xp6(3),e.Q6J("innerHTML",e.Dn7(4,2,"123456789",0,3),e.oJD),e.xp6(2),e.Q6J("ngIf",(null==(r=t.userAddress.get("socialSecurityNumber"))||null==r.errors?null:r.errors.required)&&(null==(r=t.userAddress.get("socialSecurityNumber"))?null:r.touched))}}function Pt(o,c){1&o&&(e.TgZ(0,"span",49),e._uU(1,"This is a required field"),e.qZA())}function Ft(o,c){1&o&&(e.TgZ(0,"span",49),e._uU(1,"This is a required field"),e.qZA())}function Ot(o,c){1&o&&(e.TgZ(0,"span",49),e._uU(1,"This is a required field"),e.qZA())}function Et(o,c){1&o&&(e.TgZ(0,"span",49),e._uU(1,"This is a required field"),e.qZA())}qe.KeyboardEvent||(qe.KeyboardEvent=function(o,c){});let Jt=(()=>{class o{constructor(t,r,n,s,l){this.fb=t,this.infoService=r,this.registrationService=n,this.storageService=s,this.router=l,this.subscription=new v.w,this.actionType="CREATE",this.observables=[{subjects$:null,levels$:null}]}ngOnInit(){this.initializeForm(),this.initializeListeners(),this.registrationService.stepNumber$.next(1)}getBasicInformation(){this.subscription.add(this.registrationService.getBasicInformation(this.storageService.getUserId()).subscribe(t=>{t?(this.actionType="UPDATE",this.form.patchValue(t),this.patchTutorSubjects(t)):this.actionType="CREATE"}))}patchTutorSubjects(t){t.tutorSubjects.length&&(this.tutorSubjects.controls=[],this.observables=[],t.tutorSubjects.forEach(r=>{var n,s;const l=this.newTutorSubjects();l.patchValue(r),null===(n=this.tutorSubjects)||void 0===n||n.controls.push(l),this.observables[(null===(s=this.tutorSubjects)||void 0===s?void 0:s.controls.length)-1]={subjects$:this.infoService.getSubjectsByCategoryId(r.categoryId),levels$:this.infoService.getLevelsBySubjectId(r.subjectId)}}),this.tutorSubjects.updateValueAndValidity())}initializeForm(){this.form=this.fb.group({id:[null],userId:[this.storageService.getUserId()],hourlyRate:[null,[u.kI.required]],cancellationId:[1],tutorSubjects:this.fb.array([this.newTutorSubjects()]),userAddress:this.fb.group({countryId:[null,[u.kI.required]],city:[null,[u.kI.required]],streetNumber:[null,[u.kI.required]],streetName:[null,[u.kI.required]],zipCode:[null,[u.kI.required]],socialSecurityNumber:[null]})})}newTutorSubjects(){return this.fb.group({id:[null],categoryId:[null,[u.kI.required]],subjectId:[null,[u.kI.required]],levelId:[null]})}initializeListeners(){this.categories$=this.infoService.getCategories(),this.cancelationHours$=this.infoService.getCancelationHours(),this.countries$=this.infoService.getCountries(),this.getBasicInformation()}get tutorSubjects(){var t;return null===(t=this.form)||void 0===t?void 0:t.get("tutorSubjects")}get userAddress(){return this.form.get("userAddress")}addTutorSubjects(){this.tutorSubjects.push(this.newTutorSubjects())}removeTutorSubjects(t){this.tutorSubjects.controls=this.tutorSubjects.controls.filter(r=>r!=t),this.tutorSubjects.updateValueAndValidity()}onSubmit(){this.form.valid?"CREATE"===this.actionType?this.saveBasicInformation():this.updateBasicInformation():this.form.markAllAsTouched()}saveBasicInformation(){this.subscription.add(this.registrationService.saveBasicInformation(this.form.value).subscribe(()=>this.nextStep()))}updateBasicInformation(){this.subscription.add(this.registrationService.updateBasicInformation(this.form.value).subscribe(()=>this.nextStep()))}nextStep(){this.registrationService.stepNumber$.next(2),this.router.navigate(["tutor/profileDetails/step-two"])}categoryChange(t,r){this.observables[r]||(this.observables[r]={subjects$:null,levels$:null}),this.observables[r].subjects$=this.infoService.getSubjectsByCategoryId(t)}subjectChange(t,r,n){this.observables[r].levels$=this.infoService.getLevelsBySubjectId(t).pipe((0,Q.b)(s=>{var l,p;s.length?(null===(l=n.get("levelId"))||void 0===l||l.setValidators(u.kI.required),n.get("levelId").updateValueAndValidity()):(null===(p=n.get("levelId"))||void 0===p||p.removeValidators(u.kI.required),n.get("levelId").updateValueAndValidity()),this.form.updateValueAndValidity()}))}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.qu),e.Y36(W.M),e.Y36(M.g),e.Y36(F.V),e.Y36(N.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tutor-first-step"]],decls:77,vars:20,consts:[[1,"tutor-sign-up-wrapper"],[1,"group-title"],[1,"group-subtitle"],[1,"tutor-sign-up-form-container"],[3,"formGroup"],[1,"group-title","group-title__bold","text-center","text-bold"],[1,"user-sign-up-list"],[1,"user-sign-up-list__item"],[1,"main-question"],[1,"d-flex","flex-wrap","flex-container-justify-start","gap-3","grid-gap-10","date-picker-container"],[4,"ngFor","ngForOf"],["for","hourly-rate",1,"form-label","form-label--flex-container"],["id","hourly-rate","type","text","placeholder","*the minimum hourly rate is $20","formControlName","hourlyRate",1,"form-input"],["class","error-message",4,"ngIf"],[1,"input-notification"],[1,"form-item-notification"],[1,"form-label"],[1,"dropdown-menu-with-selected-icon"],["formControlName","cancellationId",3,"label","list"],[1,"address-wrapper"],[1,"group-title","group-title__bold","group-title__m","text-center","text-bold"],["formGroupName","userAddress",1,"address-form","col-md-6","col-lg-6","col-xs-12","no-gutters"],[1,"address-form__item"],["formControlName","countryId",3,"label","list","keyName"],["class","error-message block",4,"ngIf"],[4,"ngIf"],["for","city",1,"form-label"],["id","city","name","city","type","text","placeholder","*city","formControlName","city",1,"form-input"],["for","street-number",1,"form-label"],["id","street-number","name","street-number","type","text","placeholder","street number*","formControlName","streetNumber",1,"form-input"],["for","street-name",1,"form-label"],["id","street-name","name","street-name","type","text","placeholder","street name*","formControlName","streetName",1,"form-input"],["for","zip-code",1,"form-label"],["id","zip-code","name","zip-code","type","text","placeholder","*zip-code","formControlName","zipCode",1,"form-input"],[1,"flex-container-center","button-wrapper","button-wrapper__mt"],["type","submit",1,"sophist-btn","flex-container-center","next-btn",3,"click"],["formArrayName","tutorSubjects"],[1,"d-flex","selectRow",3,"formGroupName"],[1,"selectWrapper"],["formControlName","categoryId",3,"label","list","keyName","ngModelChange"],["formControlName","subjectId",3,"label","list","keyName","ngModelChange"],["formControlName","levelId",3,"label","list","keyName","disable"],[1,"flex-container","grid-gap-for-icons"],["class","recycle-bin-wrapper text-danger",3,"click",4,"ngIf"],["class","fas fa-plus",3,"click",4,"ngIf"],[1,"error-message"],[1,"recycle-bin-wrapper","text-danger",3,"click"],["src","./assets/images/recycleBin.png","alt","recycle byn",1,"trashIcon"],[1,"fas","fa-plus",3,"click"],[1,"error-message","block"],[1,"form-label","label-for-security-number"],["mask","000-00-0000","name","securityNumber","type","text","formControlName","socialSecurityNumber",1,"form-input",3,"innerHTML"]],template:function(t,r){if(1&t&&(e.TgZ(0,"section",0),e.TgZ(1,"h3",1),e._uU(2,"Basic information"),e.qZA(),e.TgZ(3,"h5",2),e._uU(4," Please provide the following information so we can start composing your profile."),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"form",4),e.TgZ(7,"fieldset"),e.TgZ(8,"legend",5),e._uU(9," Administrative details "),e.qZA(),e.TgZ(10,"ul",6),e.TgZ(11,"li",7),e.TgZ(12,"h3",8),e._uU(13,"Please choose your subject"),e.qZA(),e.TgZ(14,"div",9),e.YNc(15,Ct,19,24,"ng-container",10),e.qZA(),e.qZA(),e.TgZ(16,"li",7),e.TgZ(17,"h3",8),e._uU(18,"Please enter hourly rate"),e.qZA(),e.TgZ(19,"label",11),e._UZ(20,"input",12),e.YNc(21,It,2,0,"span",13),e.YNc(22,qt,2,0,"span",13),e.qZA(),e.TgZ(23,"p",14),e._uU(24,"Please choose a default hourly rate. Sophist\u2019s fee is 18% of this amount"),e.qZA(),e.TgZ(25,"p",15),e._uU(26,"When choosing your rate, not only consider your level of experience, but also the cost of living in your area. Keep in mind that you can change your rate at any time and that you will have the ability to set online tutoring houry rates once you complete registration and are certified to tutor online."),e.qZA(),e.qZA(),e.TgZ(27,"li",7),e.TgZ(28,"h3",8),e._uU(29,"Please choose Cancellation notice"),e.qZA(),e.TgZ(30,"div",16),e.TgZ(31,"div",17),e._UZ(32,"app-select",18),e.ALo(33,"async"),e.YNc(34,wt,2,0,"span",13),e.qZA(),e.qZA(),e.TgZ(35,"p",15),e._uU(36,"You may wish to maintain a cancellation policy to guard against late notice of rescheduling or lesson cancellation. Please make sure to communicate this cancellation policy before you schedule a lesson with a student."),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",19),e.TgZ(38,"h2",20),e._uU(39," Your Address "),e.qZA(),e.TgZ(40,"ul",21),e.TgZ(41,"li",22),e.TgZ(42,"div",16),e._UZ(43,"app-select",23),e.ALo(44,"async"),e.TgZ(45,"span",15),e._uU(46,"Visible on the public profile"),e.qZA(),e.YNc(47,Nt,2,0,"span",24),e.qZA(),e.qZA(),e.TgZ(48,"li",22),e.YNc(49,Ut,6,6,"div",25),e.qZA(),e.TgZ(50,"li",22),e.TgZ(51,"label",26),e._UZ(52,"input",27),e.TgZ(53,"span",15),e._uU(54,"Not visible on the public profile"),e.qZA(),e.YNc(55,Pt,2,0,"span",24),e.qZA(),e.qZA(),e.TgZ(56,"li",22),e.TgZ(57,"label",28),e._UZ(58,"input",29),e.TgZ(59,"span",15),e._uU(60,"Not visible on the public profile"),e.qZA(),e.YNc(61,Ft,2,0,"span",24),e.qZA(),e.qZA(),e.TgZ(62,"li",22),e.TgZ(63,"label",30),e._UZ(64,"input",31),e.TgZ(65,"span",15),e._uU(66,"Not visible on the public profile"),e.qZA(),e.YNc(67,Ot,2,0,"span",24),e.qZA(),e.qZA(),e.TgZ(68,"li",22),e.TgZ(69,"label",32),e._UZ(70,"input",33),e.TgZ(71,"span",15),e._uU(72,"Not visible on the public profile"),e.qZA(),e.YNc(73,Et,2,0,"span",24),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(74,"div",34),e.TgZ(75,"button",35),e.NdJ("click",function(){return r.onSubmit()}),e._uU(76,"NEXT"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){let n,s,l,p,a,h,_,Z,x;e.xp6(6),e.Q6J("formGroup",r.form),e.xp6(9),e.Q6J("ngForOf",r.tutorSubjects.controls),e.xp6(6),e.Q6J("ngIf",(null==(n=r.form.get("hourlyRate"))||null==n.errors?null:n.errors.min)&&(null==(n=r.form.get("hourlyRate"))?null:n.touched)),e.xp6(1),e.Q6J("ngIf",(null==(s=r.form.get("hourlyRate"))||null==s.errors?null:s.errors.required)&&(null==(s=r.form.get("hourlyRate"))?null:s.touched)),e.xp6(10),e.Q6J("label","None*")("list",e.lcZ(33,16,r.cancelationHours$)),e.xp6(2),e.Q6J("ngIf",(null==(l=r.form.get("cancellationId"))||null==l.errors?null:l.errors.required)&&(null==(l=r.form.get("cancellationId"))?null:l.touched)),e.xp6(9),e.Q6J("label","Country*")("list",e.lcZ(44,18,r.countries$))("keyName","nameLowerCase"),e.xp6(4),e.Q6J("ngIf",(null==(p=r.userAddress.get("countryId"))||null==p.errors?null:p.errors.required)&&(null==(p=r.userAddress.get("countryId"))?null:p.touched)),e.xp6(2),e.Q6J("ngIf",226===(null==(a=r.userAddress.get("countryId"))?null:a.value)),e.xp6(6),e.Q6J("ngIf",(null==(h=r.userAddress.get("city"))||null==h.errors?null:h.errors.required)&&(null==(h=r.userAddress.get("city"))?null:h.touched)),e.xp6(6),e.Q6J("ngIf",(null==(_=r.userAddress.get("streetNumber"))||null==_.errors?null:_.errors.required)&&(null==(_=r.userAddress.get("streetNumber"))?null:_.touched)),e.xp6(6),e.Q6J("ngIf",(null==(Z=r.userAddress.get("streetName"))||null==Z.errors?null:Z.errors.required)&&(null==(Z=r.userAddress.get("streetName"))?null:Z.touched)),e.xp6(6),e.Q6J("ngIf",(null==(x=r.userAddress.get("zipCode"))||null==x.errors?null:x.errors.required)&&(null==(x=r.userAddress.get("zipCode"))?null:x.touched))}},directives:[u._Y,u.JL,u.sg,i.sg,u.Fj,u.JJ,u.u,i.O5,g.H,u.x0,u.CE,Tt],pipes:[i.Ov,i.OU],styles:[".address-form[_ngcontent-%COMP%]{padding:0;margin:0}"]}),o})();function Yt(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"This is a required field"),e.qZA())}function Rt(o,c){1&o&&(e.TgZ(0,"div",28),e._UZ(1,"img",29),e.qZA())}function Dt(o,c){if(1&o&&e._UZ(0,"img",30),2&o){const t=e.oxw();e.Q6J("src",t.userImage,e.LSH)}}function Ht(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"This is a required field"),e.qZA())}function Qt(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"This is a required field"),e.qZA())}function Lt(o,c){1&o&&(e.TgZ(0,"span",27),e._uU(1,"This is a required field"),e.qZA())}let $t=(()=>{class o{constructor(t,r,n,s,l,p){this.fb=t,this.storageService=r,this.registrationService=n,this.validationService=s,this.router=l,this.cd=p,this.subscription=new v.w,this.actionType="CREATE"}ngOnInit(){this.initializeForm(),this.getWrapUpProfile(),this.registrationService.stepNumber$.next(2)}initializeForm(){this.form=this.fb.group({id:[null],userId:[this.storageService.getUserId()],headline:[null,[u.kI.required,u.kI.minLength(15),u.kI.maxLength(100),u.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],photo:[null],bio:[null,[u.kI.required,u.kI.minLength(100),u.kI.maxLength(2e3),u.kI.pattern(/^(\s+\S+\s*)*(?!\s).*$/)]],wrapUp:[null]})}onSubmit(){this.form.valid?"CREATE"===this.actionType?this.saveWrapUpProfile():this.updateWrapUpProfile():this.form.markAllAsTouched()}saveWrapUpProfile(){this.subscription.add(this.registrationService.saveWrapUpProfile(Object.assign(Object.assign({},this.form.value),{photo:this.userImage})).subscribe(()=>this.nextStep()))}updateWrapUpProfile(){this.subscription.add(this.registrationService.updateWrapUpProfile(Object.assign(Object.assign({},this.form.value),{photo:this.userImage})).subscribe(()=>this.nextStep()))}selectFile(t){const r=new FileReader;r.readAsDataURL(t.target.files[0]),t.target.files[0]&&(r.onload=n=>{this.checkImageSizes(r.result)})}checkImageSizes(t){this.validationService.checkImageSizes(t).then(r=>{r?(this.userImage=r,this.isSmallSizeForImage=!1):this.isSmallSizeForImage=!0,this.cd.detectChanges()})}getWrapUpProfile(){this.subscription.add(this.registrationService.getWrapUpProfile(this.storageService.getUserId()).subscribe(t=>{t?(this.actionType="UPDATE",this.form.patchValue(t),this.userImage=t.photo):this.actionType="CREATE"}))}nextStep(){this.registrationService.stepNumber$.next(3),this.router.navigate(["tutor/profileDetails/step-three"])}previousStep(){this.registrationService.stepNumber$.next(1),this.router.navigate(["tutor/profileDetails/step-one"])}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.qu),e.Y36(F.V),e.Y36(M.g),e.Y36(U.R),e.Y36(N.F0),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tutor-second-step"]],decls:66,vars:15,consts:[[1,"tutor-sign-up-wrapper"],[1,"group-subtitle"],[1,"tutor-sign-up-form-container"],[3,"formGroup"],[1,"group-title","group-title__bold","text-center","text-bold"],[1,"user-sign-up-list"],[1,"user-sign-up-list__item"],[1,"main-question"],["for","profile-headline",1,"form-label","form-label--flex-container"],["id","profile-headline","type","text","rows","5","cols","3","placeholder","a short headline about yourself*","formControlName","headline",1,"form-textarea"],["class","error-message",4,"ngIf"],[1,"form-item-notification"],[1,"main-question","upload-photo-title"],[1,"file-upload-wrapper"],[1,"upload-image-box"],[1,"image-upload-wrap"],["type","file","accept","image/*",1,"file-upload-input",3,"change"],["class","drag-text",4,"ngIf"],["alt","Upload Photo",3,"src",4,"ngIf"],[1,"upload-image-requirement"],["for","bio",1,"form-label","form-label--flex-container"],["id","bio","type","text","rows","5","cols","3","placeholder","a paragraph or more about yourself*","formControlName","bio",1,"form-textarea"],["for","wrap-up-profile",1,"form-label","form-label--flex-container"],["id","wrap-up-profile","type","text","rows","5","cols","3","placeholder","enter the text","formControlName","wrapUp",1,"form-textarea"],[1,"flex-container-center","button-wrapper","button-wrapper__mt"],["type","button",1,"sophist-btn","flex-container-center",3,"click"],["type","submit",1,"sophist-btn","flex-container-center",3,"click"],[1,"error-message"],[1,"drag-text"],["src","assets/images/photo-camera%201.png","alt","Upload Photo","width","33","height","33"],["alt","Upload Photo",3,"src"]],template:function(t,r){if(1&t&&(e.TgZ(0,"section",0),e.TgZ(1,"h5",1),e._uU(2," Tell us about yourself! "),e.qZA(),e.TgZ(3,"h5",1),e._uU(4,"This is your chance to stand out. Students and parents will see this information on your profile page."),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"form",3),e.TgZ(7,"fieldset"),e.TgZ(8,"legend",4),e._uU(9," Create Your Profile "),e.qZA(),e.TgZ(10,"ul",5),e.TgZ(11,"li",6),e.TgZ(12,"h3",7),e._uU(13,"Profile Headline"),e.qZA(),e.TgZ(14,"label",8),e.TgZ(15,"textarea",9),e._uU(16," a short headline about yourself*\n                "),e.qZA(),e.YNc(17,Yt,2,0,"span",10),e.qZA(),e.TgZ(18,"p",11),e._uU(19,"This will appear at the top of your profile."),e.qZA(),e.TgZ(20,"p",11),e._uU(21,"Your profile headline must be between 15 and 100 characters. "),e.qZA(),e.qZA(),e.TgZ(22,"li",6),e.TgZ(23,"h3",12),e._uU(24,"Profile photo*"),e.qZA(),e.TgZ(25,"div",13),e.TgZ(26,"div",14),e.TgZ(27,"div",15),e.TgZ(28,"input",16),e.NdJ("change",function(s){return r.selectFile(s)}),e.qZA(),e.YNc(29,Rt,2,0,"div",17),e.YNc(30,Dt,1,1,"img",18),e.qZA(),e.YNc(31,Ht,2,0,"span",10),e.qZA(),e.TgZ(32,"div",19),e.TgZ(33,"p",11),e._uU(34,"Minimum size 200 x 200 pixels."),e.qZA(),e.TgZ(35,"p",11),e._uU(36,"Tutuors with a profile photo receive three times more business than tutors with one."),e.qZA(),e.TgZ(37,"p",11),e._uU(38,"You can upload a photo later or change your photo at any time."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"li",6),e.TgZ(40,"h3",7),e._uU(41,"Bio"),e.qZA(),e.TgZ(42,"label",20),e.TgZ(43,"textarea",21),e._uU(44," a paragraph or more about yourself*                                  "),e.qZA(),e.YNc(45,Qt,2,0,"span",10),e.qZA(),e.TgZ(46,"p",11),e._uU(47,"Help students get to know you."),e.qZA(),e.TgZ(48,"p",11),e._uU(49,"Do you have experience tutoring or teaching? What do you love about tutoring. "),e.qZA(),e.TgZ(50,"p",11),e._uU(51,"Your free response must be between 100 and 2000 characters. "),e.qZA(),e.qZA(),e.TgZ(52,"li",6),e.TgZ(53,"h3",7),e._uU(54,"Wrap up your profile"),e.qZA(),e.TgZ(55,"label",22),e.TgZ(56,"textarea",23),e._uU(57," enter the text\n                "),e.qZA(),e.YNc(58,Lt,2,0,"span",10),e.qZA(),e.TgZ(59,"p",11),e._uU(60,"Encourage students to contact you to learn more and schedule lessons."),e.qZA(),e.qZA(),e.qZA(),e.TgZ(61,"div",24),e.TgZ(62,"a",25),e.NdJ("click",function(){return r.previousStep()}),e._uU(63,"PREVIOUS"),e.qZA(),e.TgZ(64,"a",26),e.NdJ("click",function(){return r.onSubmit()}),e._uU(65,"NEXT"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){let n,s,l,p,a,h;e.xp6(6),e.Q6J("formGroup",r.form),e.xp6(11),e.Q6J("ngIf",(null==(n=r.form.get("headline"))||null==n.errors?null:n.errors.required)&&(null==(n=r.form.get("headline"))?null:n.touched)),e.xp6(3),e.ekj("text-danger",(null==(s=r.form.get("headline"))||null==s.errors?null:s.errors.minlength)||(null==(s=r.form.get("headline"))||null==s.errors?null:s.errors.maxlength)),e.xp6(7),e.ekj("image-uploaded",r.userImage),e.xp6(2),e.Q6J("ngIf",!r.userImage),e.xp6(1),e.Q6J("ngIf",r.userImage),e.xp6(1),e.Q6J("ngIf",(null==(l=r.form.get("photo"))?null:l.errors)&&(null==(l=r.form.get("photo"))?null:l.touched)),e.xp6(2),e.ekj("text-danger",r.isSmallSizeForImage),e.xp6(12),e.Q6J("ngIf",(null==(p=r.form.get("bio"))||null==p.errors?null:p.errors.required)&&(null==(p=r.form.get("bio"))?null:p.touched)),e.xp6(5),e.ekj("text-danger",(null==(a=r.form.get("bio"))||null==a.errors?null:a.errors.minlength)||(null==(a=r.form.get("bio"))||null==a.errors?null:a.errors.maxlength)),e.xp6(8),e.Q6J("ngIf",(null==(h=r.form.get("wrapUp"))?null:h.errors)&&(null==(h=r.form.get("wrapUp"))?null:h.touched))}},directives:[u._Y,u.JL,u.sg,u.Fj,u.JJ,u.u,i.O5],styles:[".group-title[_ngcontent-%COMP%]{margin-bottom:16px}.form-label--flex-container[_ngcontent-%COMP%]{margin-bottom:25px}.upload-photo-title[_ngcontent-%COMP%]{margin-bottom:15px}.image-uploaded[_ngcontent-%COMP%]{border-radius:50%;display:block;overflow:hidden}"]}),o})();function jt(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}function Vt(o,c){1&o&&(e.TgZ(0,"span",29),e._uU(1,"This is a required field"),e.qZA())}let Bt=(()=>{class o{constructor(t,r,n,s){this.fb=t,this.storageService=r,this.registrationService=n,this.router=s,this.subscription=new v.w}ngOnInit(){this.initializeForm(),setTimeout(()=>{this.registrationService.stepNumber$.next(3)})}initializeForm(){this.form=this.fb.group({id:[null],userId:[this.storageService.getUserId()],legalFirstName:[null,u.kI.required],legalLastName:[null,u.kI.required]})}onSubmit(){this.form.valid?this.subscription.add(this.registrationService.saveTermsForTutor(this.form.value).subscribe()):this.form.markAllAsTouched()}previousStep(){this.registrationService.stepNumber$.next(2),this.router.navigate(["tutor/profileDetails/step-two"])}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.qu),e.Y36(F.V),e.Y36(M.g),e.Y36(N.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tutor-third-step"]],decls:49,vars:4,consts:[[1,"tutor-sign-up-wrapper"],[3,"formGroup"],[1,"group-title","group-title__bold","text-center","text-bold"],[1,"user-sign-up-list"],[1,"user-sign-up-list__item"],[1,"terms-title"],[1,"terms-description"],[1,"terms-list"],[1,"terms-list__item"],[1,"checkboxes-wrapper-flex"],[1,"checkbox-wrapper"],["agree",""],[1,"terms-list__item-text"],["termsAndCondition",""],["href","#",1,"terms-link"],["security",""],[1,"terms-notify"],[1,"user-sign-up-list__item","flex-container-start"],[1,"flex-container-start","grid-gap-30"],["for","legal-first-name",1,"form-label"],["id","legal-first-name","type","text","placeholder","*legal first name","formControlName","legalFirstName",1,"form-input"],["class","error-message",4,"ngIf"],["for","legal-last-name",1,"form-label"],["id","legal-last-name","type","text","placeholder","*legal last name","formControlName","legalLastName",1,"form-input"],[1,"tutor-sign-up-image"],["src","assets/images/tutor-sign-up.png","alt","Tutor Sign Up","width","275","height","279"],[1,"flex-container-center","button-wrapper","col-md-12","col-lg-12","col-xs-12"],[1,"sophist-btn","flex-container-center",3,"click"],[1,"sophist-btn","flex-container-center",3,"disabled","click"],[1,"error-message"]],template:function(t,r){if(1&t&&(e.TgZ(0,"section",0),e.TgZ(1,"form",1),e.TgZ(2,"fieldset"),e.TgZ(3,"legend",2),e._uU(4," Terms for Tutoring "),e.qZA(),e.TgZ(5,"ul",3),e.TgZ(6,"li",4),e.TgZ(7,"h3",5),e._uU(8,"Agreement and Terms for Tutoring"),e.qZA(),e.TgZ(9,"p",6),e._uU(10,"The agreement on this page is a binding legal contract. By proceeding with registration, this legal Agreement is entered into between Wyzant, Inc. (\u201cthe Company\u201d) and you (the Tutor). "),e.qZA(),e.TgZ(11,"ul",7),e.TgZ(12,"li",8),e.TgZ(13,"div",9),e._UZ(14,"mat-checkbox",10,11),e.TgZ(16,"p",12),e._uU(17," I voluntarily agree to be bound by all terms provided in the above Independent Tutor Agreement as of today\u2019s date. I understand that I may refuse to conduct this transaction with Wyzant by electronic means. "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"li",8),e.TgZ(19,"div",9),e._UZ(20,"mat-checkbox",10,13),e.TgZ(22,"p",12),e._uU(23," I have read and agree to the "),e.TgZ(24,"a",14),e._uU(25," Terms and Condition."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"li",8),e.TgZ(27,"div",9),e.TgZ(28,"mat-checkbox",10,15),e.TgZ(30,"p",12),e._uU(31," I have a valid Social Security number, I am authorized to work and I am at least 18 years of age or older. "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"h3",16),e._uU(33,"The following is your digital signature. Please use your legal name."),e.qZA(),e.qZA(),e.TgZ(34,"li",17),e.TgZ(35,"div",18),e.TgZ(36,"label",19),e._UZ(37,"input",20),e.YNc(38,jt,2,0,"span",21),e.qZA(),e.TgZ(39,"label",22),e._UZ(40,"input",23),e.YNc(41,Vt,2,0,"span",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",24),e._UZ(43,"img",25),e.qZA(),e.qZA(),e.TgZ(44,"div",26),e.TgZ(45,"button",27),e.NdJ("click",function(){return r.previousStep()}),e._uU(46,"PREVIOUS"),e.qZA(),e.TgZ(47,"button",28),e.NdJ("click",function(){return r.onSubmit()}),e._uU(48,"NEXT"),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(15),s=e.MAs(21),l=e.MAs(29);let p,a;e.xp6(1),e.Q6J("formGroup",r.form),e.xp6(37),e.Q6J("ngIf",(null==(p=r.form.get("legalFirstName"))?null:p.errors)&&(null==(p=r.form.get("legalFirstName"))?null:p.touched)),e.xp6(3),e.Q6J("ngIf",(null==(a=r.form.get("legalLastName"))?null:a.errors)&&(null==(a=r.form.get("legalLastName"))?null:a.touched)),e.xp6(6),e.Q6J("disabled",!n.checked||!s.checked||!l.checked)}},directives:[u._Y,u.JL,u.sg,E.oG,u.Fj,u.JJ,u.u,i.O5],styles:['.tutor-sign-up-wrapper[_ngcontent-%COMP%]{position:relative;padding:15px 0 100px 30px}.tutor-sign-up-wrapper[_ngcontent-%COMP%]   .tutor-sign-up-image[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0}.group-title__bold[_ngcontent-%COMP%]{margin-bottom:18px}.terms-title[_ngcontent-%COMP%]{margin-bottom:25px;font:700 normal 1.125rem "Segoe UI",sans-serif;letter-spacing:.03em;text-transform:uppercase;color:#000}.terms-description[_ngcontent-%COMP%]{margin-bottom:39px;font:400 normal 1.125rem "Segoe UI",sans-serif;line-height:29px;color:#000}.terms-list[_ngcontent-%COMP%]{padding-left:24px}.terms-list__item[_ngcontent-%COMP%]{position:relative;margin-bottom:25px}.terms-list__item-text[_ngcontent-%COMP%]{padding-bottom:0;margin-bottom:0;font:400 normal 1.125rem "Segoe UI",sans-serif;line-height:29px;white-space:pre-wrap;color:#000}.terms-link[_ngcontent-%COMP%]{color:#ffb519;text-decoration:underline}.terms-notify[_ngcontent-%COMP%]{margin-bottom:25px;font:300 normal 1rem "Roboto",sans-serif;font-size:16px;line-height:20px;color:#de9300}.user-sign-up-list__item[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{width:418px}.user-sign-up-list__item[_ngcontent-%COMP%]   .grid-gap-30[_ngcontent-%COMP%]{grid-gap:30px}']}),o})();var we=d(863);const Wt=[{path:"signUp",component:ne,children:[{path:"step-one",component:k},{path:"step-two",component:T},{path:"step-three",component:$},{path:"step-four",component:ut},{path:"step-five",component:dt},{path:"",redirectTo:"step-one"}]},{path:"profileDetails",component:oe,children:[{path:"step-one",component:Jt},{path:"step-two",component:$t},{path:"step-three",component:Bt},{path:"",redirectTo:"step-one"}]},{path:"settings",loadChildren:()=>Promise.all([d.e(374),d.e(333)]).then(d.bind(d,6333)).then(o=>o.TutorSettingsModule),canActivate:[we.P]},{path:"profile",loadChildren:()=>Promise.all([d.e(374),d.e(333),d.e(592),d.e(30)]).then(d.bind(d,9030)).then(o=>o.TutorProfileModule),canActivate:[we.P]}];let zt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[N.Bz.forChild(Wt)],N.Bz]}),o})();var Gt=d(4466),Kt=d(2458);let Xt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[i.ez,zt,Gt.m,u.UX,J.lN,D.FA,L.Ps,Kt.si,J.lN,ae.c,j.Fk,E.p9,Zt.forRoot()]]}),o})()}}]);